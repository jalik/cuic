/*
 * The MIT License (MIT)
 *
 * Copyright (c) 2017 Karl STEIN
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){if("undefined"!=typeof n)throw"Cuic already exists";if("undefined"==typeof jQuery)throw"jQuery not found";var n={DEBUG:!1,mouseX:0,mouseY:0,addClass:function(e,t){e=this.getElement(e);for(var n=this.getClasses(e),i=(t||"").split(" "),o=0;o<i.length;o+=1)n.indexOf(i[o])===-1&&n.push(i[o]);return e.className=n.join(" "),n},addEventListener:function(e,t,n){return e=this.getElement(e),"function"==typeof e.addEventListener?e.addEventListener(t,n):"function"==typeof e.attachEvent?e.attachEvent(t,n):void 0},align:function(e,t,n){return e=this.getElement(e),this.css(e,this.calculateAlign(e,t,n)),e},anchor:function(e,t,n){return e=this.getElement(e),this.css(e,this.calculateAnchor(e,t,n)),e},apply:function(e,t,n){if("function"==typeof e)return e.apply(t,n)},border:function(e){var t=parseInt(this.getComputedStyle(e,"border-bottom-width")),n=parseInt(this.getComputedStyle(e,"border-left-width")),i=parseInt(this.getComputedStyle(e,"border-right-width")),o=parseInt(this.getComputedStyle(e,"border-top-width"));return{bottom:t,horizontal:n+i,left:n,right:i,top:o,vertical:t+o}},calculateAlign:function(e,n,i){var o=this;e=this.getElement(e),n=n||"",i?(i=this.getElement(i),"HTML"===i.nodeName&&(i=document.body),i!==e.parentNode&&i.append(e)):i=e.parentNode;var s=this.outerHeight(e,!0),a=this.outerWidth(e,!0),r=this.margin(e),l=this.innerHeight(i),c=this.innerWidth(i),u=this.padding(i),h=i.scrollLeft,d=i.scrollTop,p=-d,f=-h,m={bottom:"",left:"",right:"",top:""};"fixed"===this.css(e,"position")&&(i=t,l=this.innerHeight(i),c=this.innerWidth(i),h=0,d=0,p=0,f=0);var g=function(){return h+(o.width(i)/2-a/2)},C=function(){return d+(o.height(i)/2-s/2)};return a>c&&(m.width=c-(a-this.width(e))+"px"),s>l&&(m.height=l-(s-this.height(e))+"px"),n.indexOf("bottom")!==-1?m.bottom=Math.max(u.bottom,r.bottom)+"px":n.indexOf("top")!==-1?m.top=Math.max(u.top,r.top)+"px":m.top=C()+Math.max(u.top,r.top)+"px",n.indexOf("left")!==-1?m.left=Math.max(u.left,r.left)+"px":n.indexOf("right")!==-1?m.right=Math.max(u.right,r.right)+"px":m.left=g()+Math.max(u.left,r.left)+"px",m},calculateAnchor:function(e,n,i){n=n||"",e=this.element(e),i=this.element(i);var o=i instanceof Array&&2===i.length;console.log(e);var s=o?1:i.outerHeight(),a=s/2,r=o?1:i.outerWidth(),l=r/2,c=e.outerWidth(!0),u=c/2,h=e.outerHeight(!0),d=h/2,p=o?{left:i[0],top:i[1]}:i.offset(),f=n.split(" "),m={bottom:"",right:""};switch(f[0]){case"bottom":m.left=p.left+l-u,m.top=p.top+s;break;case"left":m.left=p.left-c,m.top=p.top+a-d;break;case"right":m.left=p.left+r,m.top=p.top+a-d;break;case"top":m.left=p.left+l-u,m.top=p.top-h}switch(f[1]){case"bottom":m.top=p.top+s;break;case"middle":m.top=p.top+a-d;break;case"top":m.top=p.top-h}return"fixed"===e.css("position")&&(m.left-=t.scrollX,m.top-=t.scrollY),null!=m.bottom&&m.bottom<0&&(m.bottom=0),null!=m.left&&m.left<0&&(m.left=0),null!=m.right&&m.right<0&&(m.right=0),null!=m.top&&m.top<0&&(m.top=0),console.log("anchor",m),m},calculateMaximize:function(e){e=this.getElement(e);var t=e.parentNode,n=this.padding(t),i=this.margin(e),o={bottom:"",height:this.height(t)-i.vertical+"px",left:"",right:"",top:"",width:this.width(t)-i.horizontal+"px"};return this.isPosition("right",e)?o.right=n.right+"px":o.left=n.left+"px",this.isPosition("bottom",e)?o.bottom=n.bottom+"px":o.top=n.top+"px",o},calculateMinimize:function(e,t){e=this.getElement(e),t=t||"";var n=e.cloneNode(!0);this.css(n,{height:"auto",width:"auto"});var i=this.calculateAlign(n,t,e.parentNode);return i.height=this.outerHeight(n)+"px",i.width=this.outerWidth(n)+"px",n.remove(),i},call:function(){var e=void 0,t=void 0,n=Array.prototype.slice.call(arguments);return n.length>=2?(t=n.shift(),e=n.shift()):n.length>0&&(t=n.shift()),this.apply(t,e,n)},closest:function(e,t){return e=this.getElement(e),e.closest(t)},css:function(e,t){if(e=this.getElement(e),t)if("object"===("undefined"==typeof t?"undefined":_typeof(t))){for(var n="",i=0;i<e.style.length;i+=1){var o=e.style[i];if(!(o in t)){var s=e.style[o];"string"==typeof s&&""===s&&(s='""'),n+=o+": "+s+";"}}for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];a in e.style||console.warn('Style "'+a+'" is not supported by element.',e),"string"==typeof r&&""===r&&(r='""'),n+=a+": "+r+";"}e.style=n}else if("string"==typeof t){if(t.indexOf(":")===-1)return e.style[t];e.style=t}return e.style},debug:function(){this.DEBUG&&void 0!==console&&console.log.apply(this,Array.prototype.slice.call(arguments))},element:function(e){return e instanceof this.Element?e:e instanceof HTMLElement?new this.Element(e):e instanceof jQuery?new this.Element(e.get(0)):e},enterFullScreen:function(e){e=this.getElement(e),e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},extend:function(){var e=Array.prototype.slice.call(arguments),t=!1,n=e.shift();"boolean"==typeof n&&(t=n,n=e.shift());for(var i=0;i<e.length;i+=1){var o=e[i];if("object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o&&void 0!==o&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&null!==n&&void 0!==n)for(var s in o)o.hasOwnProperty(s)&&(t&&"object"===_typeof(o[s])&&null!==o[s]&&void 0!==o[s]?n[s]=this.extend(n[s],o[s]):n[s]=o[s]);else null!==o&&void 0!==o&&(n=o)}return n},getClasses:function(e){return e=this.getElement(e),e.className.split(" ")},getComputedStyle:function(e,n){return e=this.getElement(e),t.getComputedStyle(e,null).getPropertyValue(n)},getElement:function(e){if(e instanceof HTMLElement)return e;if(e instanceof HTMLDocument)return e;if(e instanceof this.Element)return e.getElement();if(e instanceof jQuery)return e.get(0);throw new TypeError("element is not supported (HTMLElement, Cuic.Element or jQuery)")},getStylePrefix:function(){var e=document.createElement("div");return""==e.WebkitAnimation?"-webkit-":""==e.MozAnimation?"-moz-":""==e.OAnimation?"-o-":""==e.WebkitTransition?"-webkit-":""==e.MozTransition?"-moz-":""==e.OTransition?"-o-":""},hasClass:function(e,t){e=this.getElement(e);for(var n=this.getClasses(e),i=(t||"").split(" "),o=i.length>0,s=0;s<i.length;s+=1)if(n.indexOf(i[s])===-1){o=!1;break}return o},height:function(e){e=this.getElement(e);var t=this.padding(e);return e.clientHeight-t.vertical},innerHeight:function(e){return e=this.getElement(e),e.clientHeight},innerWidth:function(e){return e=this.getElement(e),e.clientWidth},isChrome:function(){return!!t.chrome&&!!t.chrome.webstore},isEdge:function(){return!isIE&&!!t.StyleMedia},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isFullScreenEnabled:function(){return(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)===!0},isIE:function(){return!!document.documentMode},isOpera:function(){return!!t.opr&&!!opr.addons||!!t.opera||navigator.userAgent.indexOf(" OPR/")>=0},isParent:function(e,t){e=this.getElement(e),t=this.getElement(t);var n=t;do if(n=n.parentNode,n===e)return!0;while(n);return!1},isPosition:function(e,t){t=this.getElement(t);var n=t.style;return e.indexOf("bottom")!==-1?n.bottom&&!n.top:e.indexOf("top")!==-1?n.top&&!n.bottom:e.indexOf("left")!==-1?n.left&&!n.right:e.indexOf("right")!==-1&&(n.right&&!n.left)},isSafari:function(){return/constructor/i.test(t.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!t.safari||safari.pushNotification)},margin:function(e){var t=parseInt(this.getComputedStyle(e,"margin-bottom")),n=parseInt(this.getComputedStyle(e,"margin-left")),i=parseInt(this.getComputedStyle(e,"margin-right")),o=parseInt(this.getComputedStyle(e,"margin-top"));return{bottom:t,horizontal:n+i,left:n,right:i,top:o,vertical:t+o}},maximize:function(e){return e=this.getElement(e),this.removeClass(e,"minimized"),this.addClass(e,"maximized"),this.css(e,this.calculateMaximize(e)),e},minimize:function(e,t){return e=this.getElement(e),this.removeClass(e,"maximized"),this.addClass(e,"minimized"),this.css(e,this.calculateMinimize(e,t)),e},namespace:function(e){return function(t,i){return i=n.slug(i),t+".cuic."+e+(i?"."+i:"")}},off:function(e,t,n){t=this.getElement(t);var i=this.whichEvent(e);if(e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(i||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(i||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(n,this,Array.prototype.slice.call(arguments))}return i||console.warn('Event "'+e+'" is not supported by this browser.'),this.removeEventListener(t,i,n)},offset:function(e){var t=parseInt(this.getComputedStyle(e,"offsetLeft")),n=parseInt(this.getComputedStyle(e,"offsetTop"));return{left:t,top:n}},on:function(e,t,n){t=this.getElement(t);var i=this.whichEvent(e);if(e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(i||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(i||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(n,this,Array.prototype.slice.call(arguments))}return i||console.warn('Event "'+e+'" is not supported by this browser.'),this.addEventListener(t,i,n)},once:function(e,t,i){t=this.getElement(t);var o=this.whichEvent(e);if(e.indexOf("animation")!==-1){var s=this.prefixStyle("animation-duration");(o||"animation"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var a=this.prefixStyle("transition-duration");(o||"transition"in t.style)&&"0s"!=getComputedStyle(t)[a]||this.apply(i,this,Array.prototype.slice.call(arguments))}o||console.warn('Event "'+e+'" is not supported by this browser.');var r=function e(s){n.removeEventListener(t,o,e),n.apply(i,this,Array.prototype.slice.call(arguments))};return this.addEventListener(t,o,r)},outerHeight:function(e,t){e=this.getElement(e);var n=this.margin(e);return e.offsetHeight+(t?n.vertical:0)},outerWidth:function(e,t){e=this.getElement(e);var n=this.margin(e);return e.offsetWidth+(t?n.horizontal:0)},padding:function(e){var t=parseInt(this.getComputedStyle(e,"padding-bottom")),n=parseInt(this.getComputedStyle(e,"padding-left")),i=parseInt(this.getComputedStyle(e,"padding-right")),o=parseInt(this.getComputedStyle(e,"padding-top"));return{bottom:t,horizontal:n+i,left:n,right:i,top:o,vertical:t+o}},position:function(e){var t=parseInt(this.getComputedStyle(e,"bottom")),n=parseInt(this.getComputedStyle(e,"left")),i=parseInt(this.getComputedStyle(e,"right")),o=parseInt(this.getComputedStyle(e,"top"));return{bottom:t,left:n,right:i,top:o}},prefixStyle:function(e){var t=this.getStylePrefix();return"string"==typeof t&&t.length?t+e:e},removeClass:function(e,t){e=this.getElement(e);for(var n=this.getClasses(e),i=(t||"").split(" "),o=0;o<i.length;o+=1){var s=n.indexOf(i[o]);s!==-1&&n.splice(s,1)}return e.className=n.join(" "),n},removeEventListener:function(e,t,n){return e=this.getElement(e),"function"==typeof e.removeEventListener?e.removeEventListener(t,n):"function"==typeof e.detachEvent?e.detachEvent(t,n):void 0},slug:function(e){return"string"==typeof e&&(e=e.replace(/ +/g,"-"),e=e.replace(/[^a-zA-Z0-9_-]+/g,"")),e},valueOf:function(e,t){switch("undefined"==typeof e?"undefined":_typeof(e)){case"function":e=e.call(t)}return e},whichEvent:function(e){var t=void 0,n=document.createElement("div"),i={};switch(e){case"transitionend":i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(t in i)if(void 0!==n.style[t])return i[t];if(void 0!==document[e]||void 0!==document["on"+e])return e},width:function(e){e=this.getElement(e);var t=this.padding(e);return e.clientWidth-t.horizontal}};t&&(t.Cuic=n),e(document).ready(function(){n.on("mousemove",document,function(e){n.mouseX=e.clientX,n.mouseY=e.clientY}),e("html,body").css({height:"100%",minHeight:"100%"})})}(jQuery,window),Cuic.Benchmark=function(){function e(){_classCallCheck(this,e);var t=this,n=null,i=null,o=0;t.getTime=function(){return n&&i?i-n:n?Date.now()-n:0},t.isStarted=function(){return"number"==typeof n},t.reset=function(){o=0,n=null,i=null},t.start=function(){n=Date.now(),i=null},t.stop=function(){n=null,i=Date.now()}}return e}(),Cuic.Collection=function(){function e(t){_classCallCheck(this,e),this.values=t instanceof Array?t:[],this.length=this.values.length}return _createClass(e,[{key:"add",value:function(e){this.values.push(e),this.length+=1,this.onAdded(e)}},{key:"get",value:function(e){return this.values[e]}},{key:"onAdded",value:function(e){}},{key:"onRemoved",value:function(e){}},{key:"remove",value:function(e){var t=this.values.indexOf(e);t!==-1&&(this.values.splice(t,1),this.length-=1,this.onRemoved(e))}},{key:"size",value:function(){return this.values.length}}]),e}(),function(e){var t=["checkbox","color","date","datetime","email","hidden","month","number","password","radio","range","search","tel","text","time","url","week"];Cuic.checkForm=function(t,n){function i(t){"function"==typeof n.onError&&(t=e(t),t.addClass(n.errorClass),n.onError.call(t,t.attr("name"),t.val()),o+=1)}t=e(t),n=Cuic.extend(!0,{errorClass:"error",filter:null,onError:null},n);var o=0;return t.find("."+n.errorClass).removeClass(n.errorClass),t.find("."+n.errorClass).removeClass(n.errorClass),t.find("[name]").not(":disabled").each(function(){var e=this.value;Cuic.isField(this)&&Cuic.isNodeFiltered(this,n.filter)&&(this.required&&void 0!==e&&null!==e?i(this):this.pattern&&!new RegExp(this.pattern).test(e)&&i(this))}),0===o},Cuic.getFields=function(t,n){var i={};return t=e(t),n=Cuic.extend(!0,{dynamicTyping:!0,filter:null,ignoreButtons:!0,ignoreEmpty:!1,ignoreUnchecked:!1,smartTyping:!0},n),t.find("[name]").not(":disabled").each(function(){var e=this,t=e.name,o=e.type,s=["button","reset","submit"].indexOf(o)!==-1,a=["checkbox","radio"].indexOf(o)!==-1;if(Cuic.isField(e)&&Cuic.isNodeFiltered(e,n.filter)&&(!n.ignoreButtons||!s)&&(!n.ignoreUnchecked||!a||e.checked)){var r=Cuic.getFieldValue(e,n);if(null!==r&&void 0!==r||!n.ignoreEmpty){if(e.multiple===!0&&(t=t.replace(/\[]$/g,"")),t.indexOf("[")!==-1){var l=t.substr(0,t.indexOf("[")),c=t.substr(t.indexOf("["));return void(i[l]=Cuic.resolveDimensionsTree(c,i[l],r))}a?e.checked?i[t]=r:["true","TRUE"].indexOf(r)!==-1?i[t]=!1:void 0===i[t]&&(i[t]=null):i[t]=r}}}),i},Cuic.resolveDimensionsTree=function(e,t,n){if(0===e.length)return n;if(void 0===t||null===t){var i=e.match(/\[/g).length,o=e.match(/]/g).length;if(i>o)throw new SyntaxError("Missing closing ']' in '"+e+"'");if(o<i)throw new SyntaxError("Missing opening '[' in '"+e+"'")}var s=e.indexOf("[");if(s!==-1){var a=e.indexOf("]",s+1),r=e.substr(a+1),l=e.substring(s+1,a),c=l.length;if(c&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(l)){void 0!==t&&null!==t||(t={});var u=this.resolveDimensionsTree(r,t[l],n);void 0!==u&&(t[l]=u)}else if(void 0!==t&&null!==t||(t=[]),0===c){var h=this.resolveDimensionsTree(r,t[l],n);void 0!==h&&t.push(h)}else if(/^[0-9]+$/.test(l)){var d=this.resolveDimensionsTree(r,t[l],n);void 0!==d&&(t[parseInt(l)]=d)}}return t},Cuic.getFieldValue=function(t,n){n=Cuic.extend({dynamicTyping:!0,smartTyping:!0},n);var i=t.value,o=t.nodeName.toUpperCase();switch(o){case"INPUT":var s="string"==typeof t.type?t.type.toLowerCase():"";["checkbox","radio"].indexOf(s)!==-1?i=t.checked?"on"===i||i:void 0:["button","reset","submit"].indexOf(s)!==-1||["number"].indexOf(s)!==-1&&n.smartTyping&&(i=Cuic.parseValue(i));break;case"SELECT":t.multiple&&(i=[],e(t).find("option").each(function(){var e=this;e.selected&&i.push(e.value)}));break;case"TEXTAREA":}if(n.dynamicTyping&&null!==i&&void 0!==i)if(i instanceof Array)for(var a=0;a<i.length;a+=1)i[a]=Cuic.parseValue(i[a]);else i=Cuic.parseValue(i);return i},Cuic.isField=function(e){var n=e.nodeName.toUpperCase();return"TEXTAREA"===n||"SELECT"===n||"INPUT"===n&&t.indexOf(e.type)!==-1},Cuic.isNodeFiltered=function(e,t){return void 0===t||null===t||t instanceof Array&&t.indexOf(e.name)!==-1||"function"==typeof t&&t.call(e,e.name)},Cuic.parseBoolean=function(e){return!!/^true$/i.test(e)||!/^false$/i.test(e)&&null},Cuic.parseValue=function(e){if("string"==typeof e){e=e.trim();var t=this.parseBoolean(e);if(t===!0||t===!1)return t;if(/^-?[0-9]+$/.test(e))return parseInt(e);if(/^-?[0-9]+\.[0-9]+$/.test(e))return parseFloat(e)}return""===e?null:e},Cuic.serializeQueryParams=function(e){var t="";if(null!=e)if("string"==typeof e)t=e;else if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var n=[];for(var i in e)e.hasOwnProperty(i)&&null!=e[i]&&(n.push("&"),n.push(encodeURIComponent(i).trim()),n.push("="),n.push(encodeURIComponent(e[i]).trim()));n.length>0&&(n.unshift(n),t=n.join(""))}return t}}(jQuery),Cuic.Shortcut=function(){function e(t){_classCallCheck(this,e);var n=this;if(t=Cuic.extend({},Cuic.Shortcut.prototype.options,t),n.options=t,n.options.element=Cuic.getElement(t.element),"function"!=typeof n.options.callback)throw new TypeError("Shortcut.options.callback is not a function.");n.options.active&&n.activate()}return _createClass(e,[{key:"activate",value:function(){var e=this,t=this.options,n=this.getElement();Cuic.on("keydown",n,function(i){if((t.keyCode===i.keyCode||t.key===i.key||t.key===i.code)&&t.altKey===i.altKey&&t.ctrlKey===i.ctrlKey&&t.shiftKey===i.shiftKey)return i.preventDefault(),i.stopPropagation(),t.callback.call(e,n,i),!1})}},{key:"deactivate",value:function(){Cuic.off("keydown",this.getElement(),this.options.callback)}},{key:"getElement",value:function(){return Cuic.getElement(this.options.element)}}]),e}(),Cuic.Shortcut.prototype.options={active:!0,altKey:!1,callback:null,ctrlKey:!1,element:document.body,key:null,keyCode:null,shiftKey:!1},Cuic.keys={BACKSPACE:8,DEL:46,DOWN:40,ENTER:13,ESC:27,INSERT:45,LEFT:37,MINUS:109,PAGE_UP:33,PAGE_DOWN:34,PLUS:107,RIGHT:39,TAB:9,UP:38},Cuic.Element=function(){function e(t,n,i){_classCallCheck(this,e);var o=this;if(n=Cuic.extend({},n,i),o.options=Cuic.extend({},Cuic.Element.prototype.options,i),o.options.element)o.element=Cuic.getElement(o.options.element);else if("string"==typeof t)o.element=document.createElement(t);else if(t instanceof HTMLElement)o.element=t;else if(t instanceof Cuic.Element)o.element=t.getElement();else{if(!(t instanceof jQuery))throw new TypeError("Cannot create element.");o.element=t.get(0)}o.options.parent&&(o.options.parent=Cuic.getElement(o.options.parent));for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];if("className"===s){o.addClass(a);continue}null!==a&&void 0!==a&&(void 0!==o.element[s]?o.element[s]=a:"html"===s?o.element.innerHTML=a:"text"===s?o.element.innerText=a:"zIndex"===s&&o.css({"z-index":parseInt(a)}))}n.css&&o.css(n.css),o.element.parentNode||o.options.parent instanceof HTMLElement&&(o.appendTo(o.options.parent),o.options.position&&o.align(o.options.position))}return _createClass(e,[{key:"addClass",value:function(e){return Cuic.addClass(this.getElement(),e),this}},{key:"align",value:function(e){return Cuic.align(this.getElement(),e),this.options.position=e,this}},{key:"anchor",value:function(e,t){return Cuic.anchor(this.getElement(),e,t),this.options.position=e,this}},{key:"append",value:function(e){return this.getElement().append(Cuic.getElement(e)),this}},{key:"appendTo",value:function(e){return Cuic.getElement(e).append(this.getElement()),this}},{key:"css",value:function(e){return Cuic.css(this.getElement(),e)}},{key:"disable",value:function(){return this.getElement().disabled=!0,this.addClass("disabled"),this}},{key:"enable",value:function(){return this.getElement().disabled=!1,this.removeClass("disabled"),this}},{key:"find",value:function(e){return this.getElement().querySelector(e)}},{key:"findAll",value:function(e){return this.getElement().querySelectorAll(e)}},{key:"getClasses",value:function(){return Cuic.getClasses(this.getElement())}},{key:"getElement",value:function(){return this.element}},{key:"getParentElement",value:function(){return this.getElement().parentNode}},{key:"hasClass",value:function(e){return Cuic.hasClass(this.getElement(),e)}},{key:"height",value:function(){return Cuic.height(this)}},{key:"hide",value:function(){return this.css({display:"none"}),this}},{key:"innerHeight",value:function(){return Cuic.innerHeight(this)}},{key:"innerWidth",value:function(){return Cuic.innerWidth(this)}},{key:"isEnabled",value:function(){return this.getElement().disabled!==!0||!this.hasClass("disabled")}},{key:"isRemoved",value:function(){var e=this.getElement().parentNode;return null===e||void 0===e}},{key:"off",value:function(e,t){return Cuic.off(e,this.getElement(),t),this}},{key:"offset",value:function(){return Cuic.offset(this.getElement())}},{key:"on",value:function(e,t){return Cuic.on(e,this.getElement(),t),this}},{key:"once",value:function(e,t){return Cuic.once(e,this.getElement(),t),this}},{key:"onRemove",value:function(){}},{key:"outerHeight",value:function(e){return Cuic.outerHeight(this,e)}},{key:"outerWidth",value:function(e){return Cuic.outerWidth(this,e)}},{key:"position",value:function(){return Cuic.position(this.getElement())}},{key:"prepend",value:function(e){return this.getElement().prepend(Cuic.getElement(e)),this}},{key:"prependTo",value:function(e){return Cuic.getElement(e).prepend(this.getElement()),this}},{key:"remove",value:function(){return this.onRemove(),this.getElement().remove(),this}},{key:"removeClass",value:function(e){return Cuic.removeClass(this.getElement(),e),this}},{key:"setContent",value:function(e){return this.setHtml(e),this}},{key:"setHtml",value:function(e){return this.getElement().innerHTML=e,this}},{key:"setText",value:function(e){return this.getElement().innerText=e,this}},{key:"show",value:function(){return this.css({display:""}),this}},{key:"width",value:function(){return Cuic.width(this)}}]),e}(),Cuic.Element.prototype.options={className:null,css:null,namespace:"cuic",parent:null,position:null},Cuic.Component=function(e){function t(e,n,i){_classCallCheck(this,t),i=Cuic.extend({},Cuic.Component.prototype.options,i);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i)),s=o;return i.className&&s.addClass("component"),o}return _inherits(t,e),_createClass(t,[{key:"close",value:function(e){var t=this;return this.onClose(),this.removeClass("opened"),this.addClass("closed"),this.once("transitionend",function(n){t.onClosed(n),"function"==typeof e&&e.call(t,n)}),this}},{key:"isOpened",value:function(){return this.hasClass("opened")}},{key:"maximize",value:function(e){var t=this;this.onMaximize(),this.removeClass("minimized"),this.addClass("maximized"),Cuic.maximize(this.getElement()),this.once("transitionend",function(n){t.onMaximized(n),"function"==typeof e&&e.call(t,n)})}},{key:"minimize",value:function(e){var t=this;this.onMinimize(),this.removeClass("maximized"),this.addClass("minimized"),Cuic.minimize(this.getElement(),this.options.position),this.once("transitionend",function(n){t.onMinimized(n),"function"==typeof e&&e.call(t,n)})}},{key:"onClose",value:function(){}},{key:"onClosed",value:function(){}},{key:"onMaximize",value:function(){}},{key:"onMaximized",value:function(){}},{key:"onMinimize",value:function(){}},{key:"onMinimized",value:function(){}},{key:"onOpen",value:function(){}},{key:"onOpened",value:function(){}},{key:"open",value:function(e){var t=this;return this.onOpen(),this.removeClass("closed"),this.addClass("opened"),this.once("transitionend",function(n){t.onOpened(n),"function"==typeof e&&e.call(t,n)}),this}},{key:"toggle",value:function(e){return this.isOpened()?this.close(e):this.open(e),this}}]),t}(Cuic.Element),Cuic.Component.prototype.options={className:null,css:null,parent:null,position:null},Cuic.GroupComponent=function(e){function t(e,n,i){_classCallCheck(this,t),i=Cuic.extend({},Cuic.GroupComponent.prototype.options,i);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Cuic.extend({className:i.className,role:"group"},n),i));return o.components=new Cuic.Collection,o.components.onAdded=function(e){o.onComponentAdded(e)},o.components.onRemoved=function(e){o.onComponentRemoved(e)},o}return _inherits(t,e),_createClass(t,[{key:"add",value:function(e){if(!(e instanceof Cuic.Component))throw new TypeError("Cannot add non component to a GroupComponent.");return Cuic.isPosition("top",this.getElement())?e.prependTo(this):e.appendTo(this),this.components.add(e),e}},{key:"onComponentAdded",value:function(e){}},{key:"onComponentRemoved",value:function(e){}},{key:"remove",value:function(e){return this.components.remove(e),e}}]),t}(Cuic.Component),Cuic.GroupComponent.prototype.options={className:"group"},Cuic.Draggable=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Draggable.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;return i.setHandle=function(e){return Cuic.addClass(e,i.options.className),Cuic.css(e,{cursor:"move"}),Cuic.addClass(e,i.options.handleClassName),Cuic.on("mousedown",e,function(e){if((!i.options.rootOnly||e.target===e.currentTarget)&&i.onDragStart(e)!==!1){e.preventDefault(),i.addClass("dragging");var t=i.getParentElement(),n=Cuic.margin(i),o=Cuic.outerHeight(i),s=Cuic.outerWidth(i),a=Cuic.position(i),r=Cuic.mouseX,l=Cuic.mouseY,c=setInterval(function(){var e={},c=Cuic.padding(t),u=Cuic.innerHeight(t),h=Cuic.innerWidth(t),d=Math.max(c.left),p=Math.max(c.top),f=d,m=p,g=h-c.horizontal-n.right,C=u-c.vertical-n.bottom,v=i.options.stepX,y=i.options.stepY,b=Cuic.mouseX-r,x=Cuic.mouseY-l,z=a.left+Math.round(b/v)*v,w=a.top+Math.round(x/y)*y;z<f?z=f:z+s>g&&(z=g-s),w<m?w=m:w+o>C&&(w=C-o),i.onDrag(z,w)!==!1&&(i.options.horizontal&&(e.left=z+"px",e.right=""),i.options.vertical&&(e.top=w+"px",e.bottom=""),i.css(e))},Math.round(1e3/i.options.fps));Cuic.once("mouseup",document.body,function(e){clearInterval(c),i.removeClass("dragging"),i.onDragStop()})}}),i},"static"===i.css("position")&&i.css({position:"relative"}),i.setHandle(e.handle||i.getElement()),n}return _inherits(t,e),_createClass(t,[{key:"onDrag",value:function(){}},{key:"onDragStart",value:function(){}},{key:"onDragStop",value:function(){}}]),t}(Cuic.Component),Cuic.Draggable.prototype.options={className:"draggable",fps:60,handle:null,handleClassName:"draggable-handle",horizontal:!0,rootOnly:!0,stepX:1,stepY:1,vertical:!0},function(e){var t=-1;Cuic.Hook=function(n){var i=this,o=Cuic.namespace("hook-"+(t+=1));n=Cuic.extend(!0,{},Cuic.Hook.prototype.options,n);var s=e(window),a=e(n.target);if(0===a.length)throw new Error("No target found for : "+n.target);a.css({position:"relative",top:"",width:""});var r=e("<div>",{css:{display:"none"}}).insertAfter(a),l=a.offset();i.hook=function(){"fixed"!==a.css("position")?(l=a.offset(),n.fixed&&(n.offsetTop=l.top),r.css({display:a.css("display"),float:a.css("float"),marginBottom:a.css("margin-bottom"),marginLeft:a.css("margin-left"),marginRight:a.css("margin-right"),marginTop:a.css("margin-top")}),a.css({position:"fixed",left:l.left,top:n.offsetTop,width:r.width(),zIndex:n.zIndex}).addClass(n.hookedC
