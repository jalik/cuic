/*
 * The MIT License (MIT)
 *
 * Copyright (c) 2017 Karl STEIN
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){if("undefined"!=typeof n)throw"Cuic already exists";if("undefined"==typeof jQuery)throw"jQuery not found";var n={DEBUG:!1,mouseX:0,mouseY:0,addEventListener:function(t,e,n){return t=this.getElement(t),"function"==typeof t.addEventListener?t.addEventListener(e,n):"function"==typeof t.attachEvent?t.attachEvent(e,n):void 0},addClass:function(t,e){t=this.getElement(t);for(var n=this.getClasses(t),i=(e||"").split(" "),o=0;o<i.length;o+=1)n.indexOf(i[o])===-1&&n.push(i[o]);return t.className=n.join(" "),n},anchor:function(t,e,n){return t=this.getElement(t),this.css(t,this.calculateAnchor(t,e,n)),t},apply:function(t,e,n){if("function"==typeof t)return t.apply(e,n)},border:function(t){var e=parseInt(this.getComputedStyle(t,"border-bottom-width")),n=parseInt(this.getComputedStyle(t,"border-left-width")),i=parseInt(this.getComputedStyle(t,"border-right-width")),o=parseInt(this.getComputedStyle(t,"border-top-width"));return{bottom:e,horizontal:n+i,left:n,right:i,top:o,vertical:e+o}},calculateAnchor:function(n,i,o){n=this.getElement(n);var s=o instanceof Array&&2===o.length;s||(o=t(o));var a=s?1:o.outerHeight(),r=a/2,l=s?1:o.outerWidth(),c=l/2,u=n.outerWidth(!0),d=u/2,p=n.outerHeight(!0),h=p/2,f=s?{left:o[0],top:o[1]}:o.offset(),m=i.split(" "),g={bottom:"",right:""};switch(m[0]){case"bottom":g.left=f.left+c-d,g.top=f.top+a;break;case"left":g.left=f.left-u,g.top=f.top+r-h;break;case"right":g.left=f.left+l,g.top=f.top+r-h;break;case"top":g.left=f.left+c-d,g.top=f.top-p}switch(m[1]){case"bottom":g.top=f.top+a;break;case"middle":g.top=f.top+r-h;break;case"top":g.top=f.top-p}return"fixed"===n.css("position")&&(g.left-=e.scrollX,g.top-=e.scrollY),null!=g.bottom&&g.bottom<0&&(g.bottom=0),null!=g.left&&g.left<0&&(g.left=0),null!=g.right&&g.right<0&&(g.right=0),null!=g.top&&g.top<0&&(g.top=0),g},calculateMaximize:function(t){t=this.getElement(t);var e=t.parentNode,n=this.padding(e),i=this.margin(t),o={bottom:"",height:this.height(e)-i.vertical+"px",left:"",right:"",top:"",width:this.width(e)-i.horizontal+"px"};return this.isPosition("right",t)?o.right=n.right+"px":o.left=n.left+"px",this.isPosition("bottom",t)?o.bottom=n.bottom+"px":o.top=n.top+"px",o},calculateMinimize:function(t,e){t=this.getElement(t),e=e||"";var n=t.cloneNode(!0);this.css(n,{height:"auto",width:"auto"});var i=this.calculatePosition(n,e,t.parentNode);return i.height=this.outerHeight(n)+"px",i.width=this.outerWidth(n)+"px",n.remove(),i},calculatePosition:function(t,n,i){var o=this;t=this.getElement(t),n=n||"",i?(i=this.getElement(i),"HTML"===i.nodeName&&(i=document.body),i!==t.parentNode&&i.append(t)):i=t.parentNode;var s=this.outerHeight(t,!0),a=this.outerWidth(t,!0),r=this.margin(t),l=this.innerHeight(i),c=this.innerWidth(i),u=this.padding(i),d=i.scrollLeft,p=i.scrollTop,h=-p,f=-d,m={bottom:"",left:"",right:"",top:""};"fixed"===this.css(t,"position")&&(i=e,l=this.innerHeight(i),c=this.innerWidth(i),d=0,p=0,h=0,f=0);var g=function(){return d+(o.width(i)/2-a/2)},C=function(){return p+(o.height(i)/2-s/2)};return a>c&&(m.width=c-(a-this.width(t))+"px"),s>l&&(m.height=l-(s-this.height(t))+"px"),n.indexOf("bottom")!==-1?m.bottom=Math.max(u.bottom,r.bottom)+"px":n.indexOf("top")!==-1?m.top=Math.max(u.top,r.top)+"px":m.top=C()+Math.max(u.top,r.top)+"px",n.indexOf("left")!==-1?m.left=Math.max(u.left,r.left)+"px":n.indexOf("right")!==-1?m.right=Math.max(u.right,r.right)+"px":m.left=g()+Math.max(u.left,r.left)+"px",m},call:function(){var t=void 0,e=void 0,n=Array.prototype.slice.call(arguments);return n.length>=2?(e=n.shift(),t=n.shift()):n.length>0&&(e=n.shift()),this.apply(e,t,n)},closest:function(t,e){return t=this.getElement(t),t.closest(e)},css:function(t,e){if(t=this.getElement(t),e)if("object"===("undefined"==typeof e?"undefined":_typeof(e))){for(var n="",i=0;i<t.style.length;i+=1){var o=t.style[i];if(!(o in e)){var s=t.style[o];"string"==typeof s&&""===s&&(s='""'),n+=o+": "+s+";"}}for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];a in t.style||console.warn('Style "'+a+'" is not supported by element.',t),"string"==typeof r&&""===r&&(r='""'),n+=a+": "+r+";"}t.style=n}else if("string"==typeof e){if(e.indexOf(":")===-1)return t.style[e];t.style=e}return t.style},debug:function(){this.DEBUG&&void 0!==console&&console.log.apply(this,Array.prototype.slice.call(arguments))},enterFullScreen:function(t){t=this.getElement(t),t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},extend:function(){var t=Array.prototype.slice.call(arguments),e=!1,n=t.shift();"boolean"==typeof n&&(e=n,n=t.shift());for(var i=0;i<t.length;i+=1){var o=t[i];if("object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o&&void 0!==o&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&null!==n&&void 0!==n)for(var s in o)o.hasOwnProperty(s)&&(e&&"object"===_typeof(o[s])&&null!==o[s]&&void 0!==o[s]?n[s]=this.extend(n[s],o[s]):n[s]=o[s]);else null!==o&&void 0!==o&&(n=o)}return n},getClasses:function(t){return t=this.getElement(t),t.className.split(" ")},getComputedStyle:function(t,n){return t=this.getElement(t),e.getComputedStyle(t,null).getPropertyValue(n)},getElement:function(t){if(t instanceof HTMLElement)return t;if(t instanceof jQuery)return t.get(0);if(t instanceof this.Element)return t.getElement();throw new TypeError("element is not an instance of HTMLElement")},getStylePrefix:function(){var t=document.createElement("div");return""==t.WebkitAnimation?"-webkit-":""==t.MozAnimation?"-moz-":""==t.OAnimation?"-o-":""==t.WebkitTransition?"-webkit-":""==t.MozTransition?"-moz-":""==t.OTransition?"-o-":""},hasClass:function(t,e){t=this.getElement(t);for(var n=this.getClasses(t),i=(e||"").split(" "),o=i.length>0,s=0;s<i.length;s+=1)if(n.indexOf(i[s])===-1){o=!1;break}return o},height:function(t){t=this.getElement(t);var e=this.padding(t);return t.clientHeight-e.vertical},innerHeight:function(t){return t=this.getElement(t),t.clientHeight},innerWidth:function(t){return t=this.getElement(t),t.clientWidth},isChrome:function(){return!!e.chrome&&!!e.chrome.webstore},isEdge:function(){return!isIE&&!!e.StyleMedia},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isFullScreenEnabled:function(){return(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)===!0},isIE:function(){return!!document.documentMode},isOpera:function(){return!!e.opr&&!!opr.addons||!!e.opera||navigator.userAgent.indexOf(" OPR/")>=0},isParent:function(t,e){t=this.getElement(t),e=this.getElement(e);var n=t;do if(n=n.parentNode,n===e)return!0;while(n);return!1},isPosition:function(t,e){e=this.getElement(e);var n=e.style;return t.indexOf("bottom")!==-1?n.bottom&&!n.top:t.indexOf("top")!==-1?n.top&&!n.bottom:t.indexOf("left")!==-1?n.left&&!n.right:t.indexOf("right")!==-1&&(n.right&&!n.left)},isSafari:function(){return/constructor/i.test(e.HTMLElement)||function(t){return"[object SafariRemoteNotification]"===t.toString()}(!e.safari||safari.pushNotification)},margin:function(t){var e=parseInt(this.getComputedStyle(t,"margin-bottom")),n=parseInt(this.getComputedStyle(t,"margin-left")),i=parseInt(this.getComputedStyle(t,"margin-right")),o=parseInt(this.getComputedStyle(t,"margin-top"));return{bottom:e,horizontal:n+i,left:n,right:i,top:o,vertical:e+o}},maximize:function(t){return t=this.getElement(t),this.removeClass(t,"minimized"),this.addClass(t,"maximized"),this.css(t,this.calculateMaximize(t)),t},minimize:function(t,e){return t=this.getElement(t),this.removeClass(t,"maximized"),this.addClass(t,"minimized"),this.css(t,this.calculateMinimize(t,e)),t},namespace:function(t){return function(e,i){return i=n.slug(i),e+".cuic."+t+(i?"."+i:"")}},off:function(t,e,n){e=this.getElement(e);var i=this.whichEvent(t);if(t.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(i||"animation"in e.style)&&"0s"!=getComputedStyle(e)[o]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(t.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(i||"transition"in e.style)&&"0s"!=getComputedStyle(e)[s]||this.apply(n,this,Array.prototype.slice.call(arguments))}return i||console.warn('Event "'+t+'" is not supported by this browser.'),this.removeEventListener(e,i,n)},offset:function(t){var e=parseInt(this.getComputedStyle(t,"bottom")),n=parseInt(this.getComputedStyle(t,"left")),i=parseInt(this.getComputedStyle(t,"right")),o=parseInt(this.getComputedStyle(t,"top"));return{bottom:e,left:n,right:i,top:o}},on:function(t,e,n){e=this.getElement(e);var i=this.whichEvent(t);if(t.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(i||"animation"in e.style)&&"0s"!=getComputedStyle(e)[o]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(t.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(i||"transition"in e.style)&&"0s"!=getComputedStyle(e)[s]||this.apply(n,this,Array.prototype.slice.call(arguments))}return i||console.warn('Event "'+t+'" is not supported by this browser.'),this.addEventListener(e,i,n)},once:function(t,e,i){e=this.getElement(e);var o=this.whichEvent(t);if(t.indexOf("animation")!==-1){var s=this.prefixStyle("animation-duration");(o||"animation"in e.style)&&"0s"!=getComputedStyle(e)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(t.indexOf("transition")!==-1){var a=this.prefixStyle("transition-duration");(o||"transition"in e.style)&&"0s"!=getComputedStyle(e)[a]||this.apply(i,this,Array.prototype.slice.call(arguments))}o||console.warn('Event "'+t+'" is not supported by this browser.');var r=function t(s){n.removeEventListener(e,o,t),n.apply(i,this,Array.prototype.slice.call(arguments))};return this.addEventListener(e,o,r)},outerHeight:function(t,e){t=this.getElement(t);var n=this.margin(t);return t.offsetHeight+(e?n.vertical:0)},outerWidth:function(t,e){t=this.getElement(t);var n=this.margin(t);return t.offsetWidth+(e?n.horizontal:0)},padding:function(t){var e=parseInt(this.getComputedStyle(t,"padding-bottom")),n=parseInt(this.getComputedStyle(t,"padding-left")),i=parseInt(this.getComputedStyle(t,"padding-right")),o=parseInt(this.getComputedStyle(t,"padding-top"));return{bottom:e,horizontal:n+i,left:n,right:i,top:o,vertical:e+o}},position:function(t,e,n){return t=this.getElement(t),this.css(t,this.calculatePosition(t,e,n)),t},prefixStyle:function(t){var e=this.getStylePrefix();return"string"==typeof e&&e.length?e+t:t},removeClass:function(t,e){t=this.getElement(t);for(var n=this.getClasses(t),i=(e||"").split(" "),o=0;o<i.length;o+=1){var s=n.indexOf(i[o]);s!==-1&&n.splice(s,1)}return t.className=n.join(" "),n},removeEventListener:function(t,e,n){return t=this.getElement(t),"function"==typeof t.removeEventListener?t.removeEventListener(e,n):"function"==typeof t.detachEvent?t.detachEvent(e,n):void 0},slug:function(t){return"string"==typeof t&&(t=t.replace(/ +/g,"-"),t=t.replace(/[^a-zA-Z0-9_-]+/g,"")),t},valueOf:function(t,e){switch("undefined"==typeof t?"undefined":_typeof(t)){case"function":t=t.call(e)}return t},whichEvent:function(t){var e=void 0,n=document.createElement("div"),i={};switch(t){case"transitionend":i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(e in i)if(void 0!==n.style[e])return i[e];if(void 0!==document[t]||void 0!==document["on"+t])return t},width:function(t){t=this.getElement(t);var e=this.padding(t);return t.clientWidth-e.horizontal}};e&&(e.Cuic=n),t(document).ready(function(){var e=n.namespace("base");t(document).off(e("mousemove")).on(e("mousemove"),function(t){n.mouseX=t.clientX,n.mouseY=t.clientY}),t("html,body").css({height:"100%",minHeight:"100%"})})}(jQuery,window),Cuic.Benchmark=function(){function t(){_classCallCheck(this,t);var e=this,n=null,i=null,o=0;e.getTime=function(){return n&&i?i-n:n?Date.now()-n:0},e.isStarted=function(){return"number"==typeof n},e.reset=function(){o=0,n=null,i=null},e.start=function(){n=Date.now(),i=null},e.stop=function(){n=null,i=Date.now()}}return t}(),Cuic.Collection=function(){function t(e){_classCallCheck(this,t),this.values=e instanceof Array?e:[],this.length=this.values.length}return _createClass(t,[{key:"add",value:function(t){this.values.push(t),this.length+=1,this.onAdded(t)}},{key:"get",value:function(t){return this.values[t]}},{key:"onAdded",value:function(t){}},{key:"onRemoved",value:function(t){}},{key:"remove",value:function(t){var e=this.values.indexOf(t);e!==-1&&(this.values.splice(e,1),this.length-=1,this.onRemoved(t))}},{key:"size",value:function(){return this.values.length}}]),t}(),function(t){var e=["checkbox","color","date","datetime","email","hidden","month","number","password","radio","range","search","tel","text","time","url","week"];Cuic.checkForm=function(e,n){function i(e){"function"==typeof n.onError&&(e=t(e),e.addClass(n.errorClass),n.onError.call(e,e.attr("name"),e.val()),o+=1)}e=t(e),n=Cuic.extend(!0,{errorClass:"error",filter:null,onError:null},n);var o=0;return e.find("."+n.errorClass).removeClass(n.errorClass),e.find("."+n.errorClass).removeClass(n.errorClass),e.find("[name]").not(":disabled").each(function(){var t=this.value;Cuic.isField(this)&&Cuic.isNodeFiltered(this,n.filter)&&(this.required&&void 0!==t&&null!==t?i(this):this.pattern&&!new RegExp(this.pattern).test(t)&&i(this))}),0===o},Cuic.getFields=function(e,n){var i={};return e=t(e),n=Cuic.extend(!0,{dynamicTyping:!0,filter:null,ignoreButtons:!0,ignoreEmpty:!1,ignoreUnchecked:!1,smartTyping:!0},n),e.find("[name]").not(":disabled").each(function(){var t=this,e=t.name,o=t.type,s=["button","reset","submit"].indexOf(o)!==-1,a=["checkbox","radio"].indexOf(o)!==-1;if(Cuic.isField(t)&&Cuic.isNodeFiltered(t,n.filter)&&(!n.ignoreButtons||!s)&&(!n.ignoreUnchecked||!a||t.checked)){var r=Cuic.getFieldValue(t,n);if(null!==r&&void 0!==r||!n.ignoreEmpty){if(t.multiple===!0&&(e=e.replace(/\[]$/g,"")),e.indexOf("[")!==-1){var l=e.substr(0,e.indexOf("[")),c=e.substr(e.indexOf("["));return void(i[l]=Cuic.resolveDimensionsTree(c,i[l],r))}a?t.checked?i[e]=r:["true","TRUE"].indexOf(r)!==-1?i[e]=!1:void 0===i[e]&&(i[e]=null):i[e]=r}}}),i},Cuic.resolveDimensionsTree=function(t,e,n){if(0===t.length)return n;if(void 0===e||null===e){var i=t.match(/\[/g).length,o=t.match(/]/g).length;if(i>o)throw new SyntaxError("Missing closing ']' in '"+t+"'");if(o<i)throw new SyntaxError("Missing opening '[' in '"+t+"'")}var s=t.indexOf("[");if(s!==-1){var a=t.indexOf("]",s+1),r=t.substr(a+1),l=t.substring(s+1,a),c=l.length;if(c&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(l)){void 0!==e&&null!==e||(e={});var u=this.resolveDimensionsTree(r,e[l],n);void 0!==u&&(e[l]=u)}else if(void 0!==e&&null!==e||(e=[]),0===c){var d=this.resolveDimensionsTree(r,e[l],n);void 0!==d&&e.push(d)}else if(/^[0-9]+$/.test(l)){var p=this.resolveDimensionsTree(r,e[l],n);void 0!==p&&(e[parseInt(l)]=p)}}return e},Cuic.getFieldValue=function(e,n){n=Cuic.extend({dynamicTyping:!0,smartTyping:!0},n);var i=e.value,o=e.nodeName.toUpperCase();switch(o){case"INPUT":var s="string"==typeof e.type?e.type.toLowerCase():"";["checkbox","radio"].indexOf(s)!==-1?i=e.checked?"on"===i||i:void 0:["button","reset","submit"].indexOf(s)!==-1||["number"].indexOf(s)!==-1&&n.smartTyping&&(i=Cuic.parseValue(i));break;case"SELECT":e.multiple&&(i=[],t(e).find("option").each(function(){var t=this;t.selected&&i.push(t.value)}));break;case"TEXTAREA":}if(n.dynamicTyping&&null!==i&&void 0!==i)if(i instanceof Array)for(var a=0;a<i.length;a+=1)i[a]=Cuic.parseValue(i[a]);else i=Cuic.parseValue(i);return i},Cuic.isField=function(t){var n=t.nodeName.toUpperCase();return"TEXTAREA"===n||"SELECT"===n||"INPUT"===n&&e.indexOf(t.type)!==-1},Cuic.isNodeFiltered=function(t,e){return void 0===e||null===e||e instanceof Array&&e.indexOf(t.name)!==-1||"function"==typeof e&&e.call(t,t.name)},Cuic.parseBoolean=function(t){return!!/^true$/i.test(t)||!/^false$/i.test(t)&&null},Cuic.parseValue=function(t){if("string"==typeof t){t=t.trim();var e=this.parseBoolean(t);if(e===!0||e===!1)return e;if(/^-?[0-9]+$/.test(t))return parseInt(t);if(/^-?[0-9]+\.[0-9]+$/.test(t))return parseFloat(t)}return""===t?null:t},Cuic.serializeQueryParams=function(t){var e="";if(null!=t)if("string"==typeof t)e=t;else if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var n=[];for(var i in t)t.hasOwnProperty(i)&&null!=t[i]&&(n.push("&"),n.push(encodeURIComponent(i).trim()),n.push("="),n.push(encodeURIComponent(t[i]).trim()));n.length>0&&(n.unshift(n),e=n.join(""))}return e}}(jQuery),Cuic.Shortcut=function(){function t(e){_classCallCheck(this,t);var n=this;if(e=Cuic.extend({},Cuic.Shortcut.prototype.options,e),n.options=e,n.options.target=Cuic.getElement(e.target),"function"!=typeof n.options.callback)throw new TypeError("Shortcut.options.callback is not a function.");n.options.active&&n.activate()}return _createClass(t,[{key:"activate",value:function(){var t=this,e=this.options,n=this.getTarget();Cuic.on("keydown",n,function(i){if((e.keyCode===i.keyCode||e.key===i.key||e.key===i.code)&&e.altKey===i.altKey&&e.ctrlKey===i.ctrlKey&&e.shiftKey===i.shiftKey)return i.preventDefault(),i.stopPropagation(),e.callback.call(t,n,i),!1})}},{key:"deactivate",value:function(){Cuic.off("keydown",this.getTarget(),this.options.callback)}},{key:"getTarget",value:function(){return Cuic.getElement(this.options.target)}}]),t}(),Cuic.Shortcut.prototype.options={active:!0,altKey:!1,callback:null,ctrlKey:!1,key:null,keyCode:null,shiftKey:!1,target:document.body},Cuic.keys={BACKSPACE:8,DEL:46,DOWN:40,ENTER:13,ESC:27,INSERT:45,LEFT:37,MINUS:109,PAGE_UP:33,PAGE_DOWN:34,PLUS:107,RIGHT:39,TAB:9,UP:38},Cuic.Element=function(){function t(e,n,i){_classCallCheck(this,t);var o=(Cuic.namespace("ui"),this);if(n=Cuic.extend({},n,i),o.options=Cuic.extend({},Cuic.Element.prototype.options,i),o.options.target)o.element=Cuic.getElement(o.options.target);else{if("string"!=typeof e)throw new TypeError("Cannot create component without node or target.");o.element=document.createElement(e)}o.options.parent&&(o.options.parent=Cuic.getElement(o.options.parent));for(var s in n)if(n.hasOwnProperty(s)){var a=n[s];if("className"===s){o.addClass(a);continue}null!==a&&void 0!==a&&(void 0!==o.element[s]?o.element[s]=a:"html"===s?o.element.innerHTML=a:"text"===s&&(o.element.innerText=a))}n.css&&o.css(o.options.css),o.element.parentNode||o.options.parent instanceof HTMLElement&&(o.appendTo(o.options.parent),o.options.position&&o.setPosition(o.options.position))}return _createClass(t,[{key:"addClass",value:function(t){return Cuic.addClass(this.getElement(),t)}},{key:"append",value:function(t){return t instanceof Cuic.Component&&(t=t.getElement()),this.getElement().append(t),this}},{key:"appendTo",value:function(t){return t instanceof Cuic.Component&&(t=t.getElement()),t.append(this.getElement()),this}},{key:"css",value:function(t){return Cuic.css(this.getElement(),t)}},{key:"disable",value:function(){this.getElement().disabled=!0,this.addClass("disabled")}},{key:"enable",value:function(){this.getElement().disabled=!1,this.removeClass("disabled")}},{key:"getClasses",value:function(){return Cuic.getClasses(this.getElement())}},{key:"getElement",value:function(){return this.element}},{key:"getParentElement",value:function(){return this.getElement().parentNode}},{key:"hasClass",value:function(t){return Cuic.hasClass(this.getElement(),t)}},{key:"height",value:function(t){return Cuic.height(t)}},{key:"hide",value:function(){this.css({display:"none"})}},{key:"innerHeight",value:function(t){return Cuic.innerHeight(t)}},{key:"innerWidth",value:function(t){return Cuic.innerWidth(t)}},{key:"isEnabled",value:function(){return this.getElement().disabled!==!0||!this.hasClass("disabled")}},{key:"off",value:function(t,e){Cuic.off(t,this.getElement(),e)}},{key:"on",value:function(t,e){Cuic.on(t,this.getElement(),e)}},{key:"once",value:function(t,e){Cuic.once(t,this.getElement(),e)}},{key:"onRemove",value:function(){}},{key:"outerHeight",value:function(t,e){return Cuic.outerHeight(t,e)}},{key:"outerWidth",value:function(t,e){return Cuic.outerWidth(t,e)}},{key:"prepend",value:function(t){return t instanceof Cuic.Component&&(t=t.getElement()),this.getElement().prepend(t),this}},{key:"prependTo",value:function(t){return t instanceof Cuic.Component&&(t=t.getElement()),t.prepend(this.getElement()),this}},{key:"remove",value:function(){this.onRemove(),this.getElement().remove()}},{key:"removeClass",value:function(t){return Cuic.removeClass(this.getElement(),t)}},{key:"setContent",value:function(t){this.setHtml(t)}},{key:"setHtml",value:function(t){this.getElement().innerHTML=t}},{key:"setPosition",value:function(t){Cuic.position(this.getElement(),t),this.options.position=t}},{key:"setText",value:function(t){this.getElement().innerText=t}},{key:"show",value:function(){this.css({display:""})}},{key:"width",value:function(t){return Cuic.width(t)}}]),t}(),Cuic.Element.prototype.options={className:null,css:null,parent:null,position:null},Cuic.Component=function(t){function e(t,n,i){_classCallCheck(this,e),i=Cuic.extend({},Cuic.Component.prototype.options,i);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,i)),s=o;return i.className&&s.addClass("component"),o}return _inherits(e,t),_createClass(e,[{key:"close",value:function(t){var e=this;return this.onClose(),this.removeClass("opened"),this.addClass("closed"),this.once("transitionend",function(n){e.onClosed(n),"function"==typeof t&&t.call(e,n)}),this}},{key:"isOpened",value:function(){return this.hasClass("opened")}},{key:"maximize",value:function(t){var e=this;this.onMaximize(),this.removeClass("minimized"),this.addClass("maximized"),Cuic.maximize(this.getElement()),this.once("transitionend",function(n){e.onMaximized(n),"function"==typeof t&&t.call(e,n)})}},{key:"minimize",value:function(t){var e=this;this.onMinimize(),this.removeClass("maximized"),this.addClass("minimized"),Cuic.minimize(this.getElement(),this.options.position),this.once("transitionend",function(n){e.onMinimized(n),"function"==typeof t&&t.call(e,n)})}},{key:"onClose",value:function(){}},{key:"onClosed",value:function(){}},{key:"onMaximize",value:function(){}},{key:"onMaximized",value:function(){}},{key:"onMinimize",value:function(){}},{key:"onMinimized",value:function(){}},{key:"onOpen",value:function(){}},{key:"onOpened",value:function(){}},{key:"open",value:function(t){var e=this;return this.onOpen(),this.removeClass("closed"),this.addClass("opened"),this.once("transitionend",function(n){e.onOpened(n),"function"==typeof t&&t.call(e,n)}),this}},{key:"toggle",value:function(t){return this.isOpened()?this.close(t):this.open(t),this}}]),e}(Cuic.Element),Cuic.Component.prototype.options={className:null,css:null,parent:null,position:null},Cuic.GroupComponent=function(t){function e(t,n,i){_classCallCheck(this,e),i=Cuic.extend({},Cuic.GroupComponent.prototype.options,i);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,Cuic.extend({className:i.className,role:"group"},n),i));return o.components=new Cuic.Collection,o.components.onAdded=function(t){o.onComponentAdded(t)},o.components.onRemoved=function(t){o.onComponentRemoved(t)},o}return _inherits(e,t),_createClass(e,[{key:"add",value:function(t){if(!(t instanceof Cuic.Component))throw new TypeError("Cannot add non component to a GroupComponent.");return Cuic.isPosition("top",this.getElement())?t.prependTo(this):t.appendTo(this),this.components.add(t),t}},{key:"onComponentAdded",value:function(t){}},{key:"onComponentRemoved",value:function(t){}},{key:"remove",value:function(t){return this.components.remove(t),t}}]),e}(Cuic.Component),Cuic.GroupComponent.prototype.options={className:"group"},Cuic.Draggable=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Draggable.prototype.options,t);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),i=n;return i.setHandle=function(t){return Cuic.addClass(t,i.options.className),Cuic.css(t,{cursor:"move"}),Cuic.addClass(t,i.options.handleClassName),Cuic.on("mousedown",t,function(t){if((!i.options.rootOnly||t.target===t.currentTarget)&&i.onDragStart(t)!==!1){t.preventDefault(),i.addClass("dragging");var e=i.getParentElement(),n=e===document.body,o=Cuic.margin(i),s=Cuic.outerHeight(i),a=Cuic.outerWidth(i),r=Cuic.offset(i),l=Cuic.mouseX,c=Cuic.mouseY,u=window.scrollX,d=window.scrollY,p=setInterval(function(){var t={},p=Cuic.padding(e),h=(Cuic.offset(e)||{left:0,top:0},Cuic.innerHeight(e)),f=Cuic.innerWidth(e),m=(Math.max(p.bottom),Math.max(p.left)),g=(Math.max(p.right),Math.max(p.top)),C=(n?u:0)+m,v=(n?d:0)+g;C=m,v=g;var y=f-p.horizontal-o.right,b=h-p.vertical-o.bottom,x=i.options.stepX,z=i.options.stepY,w=Cuic.mouseX-l,E=Cuic.mouseY-c,k=r.left+Math.round(w/x)*x,T=r.top+Math.round(E/z)*z;k<C?k=C:k+a>y&&(k=y-a),T<v?T=v:T+s>b&&(T=b-s),i.onDrag(k,T)!==!1&&(i.options.horizontal&&(t.left=k+"px",t.right=""),i.options.vertical&&(t.top=T+"px",t.bottom=""),i.css(t))},Math.round(1e3/i.options.fps));Cuic.once("mouseup",document.body,function(t){clearInterval(p),i.removeClass("dragging"),i.onDragStop()})}}),i},"static"===i.css("position")&&i.css({position:"relative"}),i.setHandle(t.handle||i.getElement()),n}return _inherits(e,t),_createClass(e,[{key:"onDrag",value:function(){}},{key:"onDragStart",value:function(){}},{key:"onDragStop",value:function(){}}]),e}(Cuic.Component),Cuic.Draggable.prototype.options={className:"draggable",fps:60,handle:null,handleClassName:"draggable-handle",horizontal:!0,rootOnly:!0,stepX:1,stepY:1,vertical:!0},function(t){var e=-1;Cuic.Hook=function(n){var i=this,o=Cuic.namespace("hook-"+(e+=1));n=Cuic.extend(!0,{},Cuic.Hook.prototype.options,n);var s=t(window),a=t(n.target);if(0===a.length)throw new Error("No target found for : "+n.target);a.css({position:"relative",top:"",width:""});var r=t("<div>",{css:{display:"none"}}).insertAfter(a),l=a.offset();i.hook=function(){"fixed"!==a.css("position")?(l=a.offset(),n.fixed&&(n.offsetTop=l.top),r.css({display:a.css("display"),float:a.css("float"),marginBottom:a.css("margin-bottom"),marginLeft:a.css("margin-left"),marginRight:a.css("margin-right"),marginTop:a.css("margin-top")}),a.css({position:"fixed",left:l.left,top:n.offsetTop,width:r.width(),zIndex:n.zIndex}).addClass(n.hookedClass),"function"==typeof n.onHook&&n.onHook.call(a)):r&&(l=r.offset(),a.css({left:l.left,width:r.width()}))},i.unhook=function(){"relative"!==a.css("position")&&(r.hide(),a.css({position:"relative",bottom:"",left:"",right:"",top:"",width:""}).removeClass(n.hookedClass),"function"==typeof n.onUnhook&&n.onUnhook.call(a))};var c=function(){var t=a.outerHeight(!0)<=window.screen.availHeight;if(t)if(n.fixed)i.hook();else{var e=parseFloat(a.css("margin-top"));s.scrollTop()>l.top-e?i.hook():i.unhook()}else i.unhook()};c(),s.off(o("scroll")).on(o("scroll"),function(){c()}),s.off(o("resize")).on(o("resize"),function(){c()})},Cuic.Hook.prototype.onHook=null,Cuic.Hook.prototype.onUnhook=null,Cuic.Hook.prototype.options={fixed:!1,hookedClass:"hooked",offsetBottom:0,offsetLeft:0,offsetRight:0,offsetTop:0,target:null,zIndex:4}}(jQuery),function(t){var e=Cuic.namespace("resizable");Cuic.Resizable=function(n){var i,o,s=this,a=[],r=[],l=[],c=1;n=Cuic.extend(!0,Cuic.Resizable.prototype.options,n),s.className=n.className,s.fps=parseInt(n.fps),s.horizontal=n.horizontal===!0,s.keepRatio=n.keepRatio===!0,s.maxHeight=parseInt(n.maxHeight),s.maxWidth=parseInt(n.maxWidth),s.minHeight=parseInt(n.minHeight),s.minWidth=parseInt(n.minWidth),s.stepX=parseInt(n.stepX),s.stepY=parseInt(n.stepY),s.vertical=n.vertical===!0,s.getElement=function(){return o},s.setContainer=function(e){return i=t(e),s},n.target&&(o=t(n.target)),o.addClass(s.className),"static"===o.css("position")&&o.css("position","relative"),s.setContainer(n.container||o.offsetParent());var u=function(n){if(!s.onResizeStart||s.onResizeStart.call(s,n)!==!1){n.preventDefault(),o.addClass("resizing");var a=i.offset().left,u=i.offset().top,d=o.height(),p=o.width(),h=Cuic.padding(o);c=d/p;var f=setInterval(function(){var t=i.innerHeight(),e=i.innerWidth(),f=o.offset().left,m=o.offset().top,g=t-(m-u+h.left+h.right),C=e-(f-a+h.bottom+h.top),v=Cuic.mouseX-n.clientX,y=Cuic.mouseY-n.clientY,b=null,x=null;r.indexOf(n.target)!==-1&&(x=p+v,x>C&&(x=C)),l.indexOf(n.target)!==-1&&(b=d+y,b>g&&(b=g)),s.keepRatio&&(null!==b?x=b/c:null!==x&&(b=x*c)),s.onResize&&s.onResize.call(s)===!1||(s.horizontal&&null!==x&&s.checkWidth(x)&&o.width(s.stepX?Math.round(x/s.stepX)*s.stepX:x),s.vertical&&null!==b&&s.checkHeight(b)&&o.height(s.stepY?Math.round(b/s.stepY)*s.stepY:b))},Math.round(1e3/s.fps));t(document).off(e("mouseup")).one(e("mouseup"),function(t){clearInterval(f),o.removeClass("resizing"),s.onResizeStop&&s.onResizeStop.call(s,t)})}},d=t("<div>",{css:{cursor:"e-resize",display:"none",height:"100%",position:"absolute",right:0,top:0,width:n.handlerSize,zIndex:1}}).off(e("mousedown")).on(e("mousedown"),u).appendTo(o),p=t("<div>",{css:{bottom:0,cursor:"s-resize",display:"none",height:n.handlerSize,position:"absolute",left:0,width:"100%",zIndex:1}}).off(e("mousedown")).on(e("mousedown"),u).appendTo(o),h=t("<div>",{css:{bottom:0,cursor:"se-resize",display:"none",height:n.handlerSize,position:"absolute",right:0,width:n.handlerSize,zIndex:2}}).off("mousedown").on(e("mousedown"),u).appendTo(o);a=[d,p,h],r=[d.get(0),h.get(0)],l=[p.get(0),h.get(0)],o.off("mouseenter").on(e("mouseenter"),function(){if(!o.hasClass("resizing"))for(var t=0;t<a.length;t+=1)a[t].stop(!0,!1).fadeIn(0)}),o.off("mouseleave").on(e("mouseleave"),function(){if(!o.hasClass("resizing"))for(var t=0;t<a.length;t+=1)a[t].stop(!0,!1).fadeOut(0)})},Cuic.Resizable.prototype.checkHeight=function(t){return(!Number(this.maxHeight)||t<=this.maxHeight)&&(!Number(this.minHeight)||t>=this.minHeight)},Cuic.Resizable.prototype.checkWidth=function(t){return(!Number(this.maxWidth)||t<=this.maxWidth)&&(!Number(this.minWidth)||t>=this.minWidth)},Cuic.Resizable.prototype.onResize=null,Cuic.Resizable.prototype.onResizeStart=null,Cuic.Resizable.prototype.onResizeStop=null,Cuic.Resizable.prototype.options={className:"resizable",fps:30,handlerSize:10,horizontal:!0,keepRatio:!1,maxHeight:null,maxWidth:null,minHeight:1,minWidth:1,stepX:1,stepY:1,vertical:!0}}(jQuery),Cuic.Button=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Button.prototype.options,t);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"button",{className:t.className,
disabled:!1,html:t.label,title:t.title,type:t.type},t)),i=n;return"number"==typeof t.shortcut&&(i.shortcut=new Cuic.Shortcut({keyCode:t.shortcut,target:i.element,callback:function(){i.getElement().click()}})),n}return _inherits(e,t),e}(Cuic.Component),Cuic.Button.prototype.options={className:"btn btn-default",disabled:!1,shortcut:null,title:null,type:"button"};var dialogZIndex=0;Cuic.dialogs=new Cuic.Collection,Cuic.dialogs.onAdded=function(){dialogZIndex+=1},Cuic.dialogs.onRemoved=function(){dialogZIndex-=1},Cuic.Dialog=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Dialog.prototype.options,t);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className,role:"dialog"},t)),i=Cuic.namespace("dialog"),o=n,s=void 0,a=void 0,r=void 0,l=void 0,c=void 0,u=void 0;o.buttons=new Cuic.Collection,o.addButton=function(t){return t instanceof Cuic.Button||!function(){var e=t.callback;t=new Cuic.Button({className:"btn btn-default",label:t.label}),"function"==typeof e?t.on("click",function(t){e.call(o,t)}):"close"===e&&t.on("click",function(){o.close()})}(),s.append(t.getElement()),o.buttons.add(t),o.buttons.length>1?l.show():1===o.buttons.length?l.show():l.hide(),t},o.getBody=function(){return r},o.getContent=function(){return r},o.getFooter=function(){return l},o.getHeader=function(){return c},o.onClose=function(){p.close(function(){o.options.autoRemove&&p.remove()})},o.onClosed=function(){o.options.autoRemove&&o.remove()},o.onOpen=function(){var e=t.zIndex+dialogZIndex;if(o.css({"z-index":e}),o.resizeContent(),o.options.modal&&(o.css({"z-index":e+1}),p.css({"z-index":e}),p.open()),o.options.maximized?o.maximize():o.setPosition(o.options.position),o.buttons.length>0){var n=o.buttons.get(o.buttons.length-1);n.getElement().focus()}},o.onOpened=function(){},o.resizeContent=function(){var t=o.getElement(),e=o.getParentElement(),n=t.style.display,i=window.innerHeight;e&&e!==document.body&&(i=Cuic.height(e));var s=Cuic.border(t),a=Cuic.margin(t);i-=a.vertical,i-=s.vertical,o.css({"max-height":i+"px"});var u=i;return c&&(u-=Cuic.outerHeight(c,!0)),l&&(u-=Cuic.outerHeight(l,!0)),Cuic.css(r,{"max-height":u+"px",overflow:"auto"}),o.css({display:n}),o},o.setTitle=function(t){return u.html(t),o};var d=o.getParentElement()===document.body;o.css({position:d?"fixed":"absolute"});var p=new Cuic.Fader({className:"fader dialog-fader"}).appendTo(t.parent);if(p.on("click",function(){o.close()}),c=new Cuic.Element("header",{className:"dialog-header",css:{display:null!=t.title?"block":"none"}}).appendTo(o),u=new Cuic.Element("h3",{className:"dialog-title",html:t.title}).appendTo(c),a=new Cuic.Element("span",{className:"dialog-close-btn glyphicon glyphicon-remove-sign"}).prependTo(c),r=new Cuic.Element("section",{className:"dialog-content",html:t.content,style:"overflow: auto"}).appendTo(o),l=new Cuic.Element("footer",{className:"dialog-footer",css:{display:null!=t.buttons?"block":"none"}}).appendTo(o),s=new Cuic.Element("div",{className:"btn-group",role:"group"}).appendTo(l),parseFloat(t.contentHeight)>0&&r.css("height",t.contentHeight),parseFloat(t.contentWidth)>0&&r.css("width",t.contentWidth),t.buttons instanceof Array)for(var h=0;h<t.buttons.length;h+=1)o.addButton(t.buttons[h]);return a.on(i("click"),function(){o.close()}),Cuic.dialogs.add(o),o.options.draggable&&(o.draggable=new Cuic.Draggable({handle:u,parent:o.getParentElement(),rootOnly:!1,target:o.getElement()})),o.shortcuts={close:new Cuic.Shortcut({keyCode:Cuic.keys.ESC,target:o.getElement(),callback:function(){o.close()}})},n}return _inherits(e,t),_createClass(e,[{key:"onRemove",value:function(){Cuic.dialogs.remove(this)}}]),e}(Cuic.Component),Cuic.Dialog.prototype.options={autoRemove:!0,autoResize:!0,buttons:[],className:"dialog",content:null,contentHeight:null,contentWidth:null,draggable:!0,maximized:!1,parent:document.body,position:"center",modal:!0,target:null,title:null,zIndex:5},Cuic.Fader=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Fader.prototype.options,t);var n=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),i=n.getParentElement()===document.body;return i&&n.css({position:"fixed"}),n}return _inherits(e,t),e}(Cuic.Component),Cuic.Button.prototype.options={className:"fader"},function(t){var e=0;Cuic.Grid=function(n){var i=this;n=Cuic.extend(!0,Cuic.Grid.prototype.options,n),i.animSpeed=parseInt(n.animSpeed),i.autoResize=n.autoResize===!0,i.colsWidth=parseFloat(n.colsWidth),i.editable=n.editable===!0,i.fps=parseInt(n.fps),i.maxCols=parseInt(n.maxCols),i.maxRows=parseInt(n.maxRows),i.minCols=parseInt(n.minCols),i.minRows=parseInt(n.minRows),i.rowsHeight=parseFloat(n.rowsHeight),i.spacing=parseFloat(n.spacing),i.widgets={},i.element=t(n.target),i.element.css({display:"block",minHeight:n.height,minWidth:n.width}),i.resize(n.cols,n.rows),new Cuic.Resizable({target:i.element}).onResizeStop=function(){var t=i.getSizeX(i.element.outerWidth()),e=i.getSizeY(i.element.outerHeight());i.maxCols=t,i.maxRows=e,i.maximize()},i.preview=t("<div>",{class:"preview",css:{"box-sizing":"border-box",height:i.rowsHeight,left:i.spacing,position:"absolute",top:i.spacing,width:i.colsWidth,zIndex:1}}),i.element.children(n.widgetSelector).each(function(){var t=this.id||"widget-"+(e+=1);i.addWidget(t,new Cuic.Grid.Widget({target:this}))}),i.autoResize&&i.minimize()},Cuic.Grid.prototype.addWidget=function(t,e){var n=this,i=e.element,o=n.preview;n.removeWidget(t),n.widgets[t]=e,n.element.append(e.element),e.element.attr("id",t),e.element.css({"box-sizing":"border-box",display:"block",margin:0,overflow:"hidden",position:"absolute"}),n.moveWidget(e,e.col,e.row),n.resizeWidget(e,e.sizeX,e.sizeY),e.col-1+e.sizeX>n.cols&&n.resize(e.col-1+e.sizeX,e.sizeY),e.row-1+e.sizeY>n.rows&&n.resize(e.sizeX,e.row-1+e.sizeY);var s,a,r=new Cuic.Resizable({target:e.element,container:n.element});r.onResize=function(){var t=i.outerHeight(),s=i.outerWidth(),a=Math.round(s/(n.colsWidth+n.spacing)),r=Math.round(t/(n.rowsHeight+n.spacing));a+e.col-1>n.maxCols?a=n.maxCols-(e.col-1):a<e.minSizeX&&(a=e.minSizeX),r+e.row-1>n.maxRows?r=n.maxRows-(e.row-1):r<e.minSizeY&&(r=e.minSizeY),o.css({height:n.calculateHeight(r),width:n.calculateWidth(a)})},r.onResizeStart=function(){return!(!n.editable||!e.resizable||e.isDragging())&&(s=i.outerHeight(),a=i.outerWidth(),i.css({zIndex:2}),n.element.append(o.css({left:i.css("left"),height:s,top:i.css("top"),width:a})),n.autoResize&&n.maximize(),!0)},r.onResizeStop=function(){o.detach();var t=n.getSizeX(o.outerWidth()),i=n.getSizeY(o.outerHeight());n.resizeWidget(e,t,i),n.autoResize&&n.minimize()};var l=new Cuic.Draggable({target:e.element,rootOnly:!0,container:n.element});return l.onDrag=function(){var t=parseFloat(i.css("left")),s=parseFloat(i.css("top")),a=n.getPositionX(t),r=n.getPositionY(s);a>0&&a+e.sizeX<=n.cols+1&&r>0&&r+e.sizeY<=n.rows+1||(a=e.col,r=e.row),o.css({left:n.calculateLeft(a),top:n.calculateTop(r)})},l.onDragStart=function(t){return!(!n.editable||!e.draggable||e.isResizing())&&(s=i.outerHeight(),a=i.outerWidth(),i.css({zIndex:2}),n.element.append(o.css({left:i.css("left"),height:s,top:i.css("top"),width:a})),n.autoResize&&n.maximize(),!0)},l.onDragStop=function(){o.detach();var t=parseFloat(i.css("left")),s=parseFloat(i.css("top")),a=n.getSizeX(t)+1,r=n.getSizeY(s)+1;n.moveWidget(e,a,r),n.autoResize&&n.minimize()},e},Cuic.Grid.prototype.calculateHeight=function(t){return parseInt(t)*(this.rowsHeight+this.spacing)-this.spacing},Cuic.Grid.prototype.calculateLeft=function(t){return parseInt(t)*(this.colsWidth+this.spacing)-this.colsWidth},Cuic.Grid.prototype.calculateTop=function(t){return parseInt(t)*(this.rowsHeight+this.spacing)-this.rowsHeight},Cuic.Grid.prototype.calculateWidth=function(t){return parseInt(t)*(this.colsWidth+this.spacing)-this.spacing},Cuic.Grid.prototype.clear=function(){for(var t in this.widgets)this.widgets.hasOwnProperty(t)&&this.removeWidget(t);return this},Cuic.Grid.prototype.getPosition=function(t,e){return[this.getPositionX(t),this.getPositionY(e)]},Cuic.Grid.prototype.getPositionX=function(t){return Math.round(parseFloat(t)/(this.colsWidth+this.spacing))+1},Cuic.Grid.prototype.getPositionY=function(t){return Math.round(parseFloat(t)/(this.rowsHeight+this.spacing))+1},Cuic.Grid.prototype.getSize=function(t,e){return[this.getSizeX(t),this.getSizeY(e)]},Cuic.Grid.prototype.getSizeX=function(t){return Math.round(parseFloat(t)/(this.colsWidth+this.spacing))},Cuic.Grid.prototype.getSizeY=function(t){return Math.round(parseFloat(t)/(this.rowsHeight+this.spacing))},Cuic.Grid.prototype.getWidget=function(t){return this.widgets[t]},Cuic.Grid.prototype.maximize=function(){return this.resize(this.maxCols,this.maxRows)},Cuic.Grid.prototype.minimize=function(){var t=this.minCols||1,e=this.minRows||1;for(var n in this.widgets)if(this.widgets.hasOwnProperty(n)){var i=this.wi
