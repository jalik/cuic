/*
 * The MIT License (MIT)
 *
 * Copyright (c) 2017 Karl STEIN
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;--i>=0&&t.item(i)!==this;);return i>-1}),function(e){var t={DEBUG:!1,mouseX:0,mouseY:0,addEventListener:function(e,t,i){return"function"==typeof e.addEventListener?e.addEventListener(t,i):"function"==typeof e.attachEvent?e.attachEvent(t,i):void 0},apply:function(e,t,i){if("function"==typeof e)return e.apply(t,i)},autoPixel:function(e){var t=["bottom","left","padding","right","top","max-height","max-width","height","width","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top"];for(var i in e)e.hasOwnProperty(i)&&"number"==typeof e[i]&&t.indexOf(i)!==-1&&(e[i]=e[i]+"px");return e},calculateAlign:function(t,i,n){t=this.element(t),i=i||"",n?(n=this.element(n),"HTML"===n.node().nodeName&&(n=this.element(document.body))):n=t.offsetParent();var o=t.outerHeight(!0),s=t.outerWidth(!0),a=n.height(),r=n.width(),l=n.node().scrollLeft,c=n.node().scrollTop,u=-c,h=-l,d={bottom:"",left:"",right:"",top:""};switch(t.css("position")){case"fixed":n=this.element(e),a=n.innerHeight(),r=n.innerWidth(),l=0,c=0,u=0,h=0}var p=l+Math.max(0,n.innerWidth()/2-s/2),f=c+Math.max(0,n.innerHeight()/2-o/2);i.indexOf("top")!==-1?d.top=0:i.indexOf("bottom")!==-1?d.bottom=0:d.top=f,i.indexOf("left")!==-1?d.left=0:i.indexOf("right")!==-1?d.right=0:d.left=p;var m=this.calculateAvailablePosition(t,n);return d.left<m.minX?d.left=m.minX:d.left>m.maxX&&(d.left=m.maxX),d},calculateAnchor:function(t,i,n){i=i||"",t=this.element(t);var o=void 0,s=void 0,a=void 0;n instanceof Array&&2===n.length?(o=1,s=1,a={left:n[0],top:n[1]}):(n=this.element(n),o=n.outerHeight(),s=n.outerWidth(),a=n.offset());var r=t.outerWidth(!0),l=t.outerHeight(!0),c=r/2,u=l/2,h=s/2,d=o/2,p={bottom:"",left:"",right:"",top:""};return i.indexOf("bottom")!==-1?p.top=a.top+o:i.indexOf("top")!==-1?p.top=a.top-l:p.top=a.top+d-u,i.indexOf("left")!==-1?p.left=a.left-r:i.indexOf("right")!==-1?p.left=a.left+s:p.left=a.left+h-c,"fixed"===t.css("position")&&(p.left-=e.scrollX,p.top-=e.scrollY),p},calculateAvailablePosition:function(e,t){e=this.element(e),t=t?this.element(t):e.offsetParent();var i={minX:0,minY:0,maxX:Math.max(0,t.width()-e.outerWidth(!0)),maxY:Math.max(0,t.height()-e.outerHeight(!0))};switch(e.css("position")){case"absolute":case"fixed":var n=t.padding();i.maxX+=n.horizontal,i.maxY+=n.vertical}return i},calculateAvailableSpace:function(e,t){e=this.element(e),t=t?this.element(t):e.offsetParent();var i=e.margin(),n={height:t.height(),width:t.width()};switch(e.css("position")){case"absolute":case"fixed":var o=t.padding();n.height+=o.vertical,n.width+=o.horizontal,n.height-=i.vertical,n.width-=i.horizontal;break;case"relative":n.height-=i.vertical,n.width-=i.horizontal}return n},calculateMaximize:function(e){e=this.element(e);var t=e.offsetParent(),i=t.padding(),n=e.margin(),o={bottom:"",height:t.innerHeight()-i.vertical,left:"",right:"",top:"",width:t.innerWidth()-i.horizontal};switch(e.css("position")){case"absolute":case"fixed":o.height+=i.vertical,o.height-=n.vertical,o.width+=i.horizontal,o.width-=n.horizontal;break;case"relative":o.height-=n.vertical,o.width-=n.horizontal}return e.isAligned("right")?o.right=0:o.left=0,e.isAligned("bottom")?o.bottom=0:o.top=0,o},calculateMinimize:function(e,t){e=this.element(e),t=t||"";var i=e.clone();i.css({height:"auto",width:"auto"}),i.appendTo(e.parent());var n=this.calculateAlign(i,t);return n.height=i.outerHeight(),n.width=i.outerWidth(),i.remove(),n},call:function(){var e=void 0,t=void 0,i=Array.prototype.slice.call(arguments);return i.length>=2?(t=i.shift(),e=i.shift()):i.length>0&&(t=i.shift()),this.apply(t,e,i)},debug:function(){this.DEBUG&&void 0!==console&&console.log.apply(this,Array.prototype.slice.call(arguments))},element:function(e){return e instanceof this.Element?e:e instanceof HTMLDocument?new this.Element(e):e instanceof HTMLElement?new this.Element(e):e instanceof Window?new this.Element(e):e instanceof jQuery?new this.Element(e.get(0)):"string"==typeof e?new this.Element(document.querySelector(e)):e},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},extend:function(){var e=Array.prototype.slice.call(arguments),t=!1,i=e.shift();"boolean"==typeof i&&(t=i,i=e.shift());for(var n=0;n<e.length;n+=1){var o=e[n];if("object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o&&void 0!==o&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&null!==i&&void 0!==i)for(var s in o)o.hasOwnProperty(s)&&(t&&"object"===_typeof(o[s])&&null!==o[s]&&void 0!==o[s]?i[s]=this.extend(i[s],o[s]):i[s]=o[s]);else null!==o&&void 0!==o&&(i=o)}return i},find:function(e,t){return t=this.node(t||document),this.element(t).find(e)},getComputedStyle:function(t,i){return t=this.node(t),e.getComputedStyle(t,null).getPropertyValue(i)},getStylePrefix:function(){var e=document.createElement("div");return""==e.WebkitAnimation?"-webkit-":""==e.MozAnimation?"-moz-":""==e.OAnimation?"-o-":""==e.WebkitTransition?"-webkit-":""==e.MozTransition?"-moz-":""==e.OTransition?"-o-":""},isChrome:function(){return!!e.chrome&&!!e.chrome.webstore},isEdge:function(){return!isIE&&!!e.StyleMedia},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isFullScreenEnabled:function(){return(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)===!0},isIE:function(){return!!document.documentMode},isOpera:function(){return!!e.opr&&!!opr.addons||!!e.opera||navigator.userAgent.indexOf(" OPR/")>=0},isSafari:function(){return/constructor/i.test(e.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!e.safari||safari.pushNotification)},namespace:function(e){return function(i,n){return n=t.slug(n),i+".cuic."+e+(n?"."+n:"")}},node:function(e){if(e instanceof HTMLElement)return e;if(e instanceof HTMLDocument)return e;if(e instanceof this.Element)return e.node();if(e instanceof jQuery)return e.get(0);throw console.log(e),new TypeError("cannot get HTMLElement from element.")},off:function(e,t,i){if(t instanceof this.Element)t=t.node();else if(t instanceof jQuery)t=t.get(0);else if(!(t instanceof HTMLElement||t instanceof HTMLDocument||t instanceof Window))throw console.log(e,t),new TypeError("Cannot add event listener on unsupported element.");var n=this.whichEvent(e);if(n||console.warn('Event "'+e+'" is not supported by this browser.'),e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(n||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(n||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}return this.removeEventListener(t,n,i)},on:function(e,t,i){if(t instanceof this.Element)t=t.node();else if(t instanceof jQuery)t=t.get(0);else if(!(t instanceof HTMLElement||t instanceof HTMLDocument||t instanceof Window))throw console.log(e,t),new TypeError("Cannot add event listener on unsupported element.");var n=this.whichEvent(e);if(n||console.warn('Event "'+e+'" is not supported by this browser.'),e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(n||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(n||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}return this.addEventListener(t,n,i)},once:function(e,i,n){var o=this,s=arguments;if(i instanceof this.Element)i=i.node();else if(i instanceof jQuery)i=i.get(0);else if(!(i instanceof HTMLElement||i instanceof HTMLDocument||i instanceof Window))throw console.log(e,i),new TypeError("Cannot add event listener on unsupported element.");var a=this.whichEvent(e);if(a||console.warn('Event "'+e+'" is not supported by this browser.'),e.indexOf("animation")!==-1){var r=this.prefixStyle("animation-duration");(a||"animation"in i.style)&&"0s"!=getComputedStyle(i)[r]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var l=this.prefixStyle("transition-duration");(a||"transition"in i.style)&&"0s"!=getComputedStyle(i)[l]||this.apply(n,this,Array.prototype.slice.call(arguments))}var c=function e(r){t.removeEventListener(i,a,e),t.apply(n,o,Array.prototype.slice.call(s))};return this.addEventListener(i,a,c)},prefixStyle:function(e){var t=this.getStylePrefix();return"string"==typeof t&&t.length?t+e:e},ready:function(e){document.addEventListener("DOMContentLoaded",e)},removeEventListener:function(e,t,i){return"function"==typeof e.removeEventListener?e.removeEventListener(t,i):"function"==typeof e.detachEvent?e.detachEvent(t,i):void 0},slug:function(e){return"string"==typeof e&&(e=e.replace(/ +/g,"-"),e=e.replace(/[^a-zA-Z0-9_-]+/g,"")),e},toCamelCase:function(e){return e.toLowerCase().replace(/[-_]+/g," ").replace(/[^\w\s]/g,"").replace(/ (.)/g,function(e){return e.toUpperCase()}).replace(/ /g,"")},valueOf:function(e,t){switch("undefined"==typeof e?"undefined":_typeof(e)){case"function":e=e.call(t)}return e},whichEvent:function(t){var i=void 0,n=document.createElement("div"),o={};switch(t){case"transitionend":o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(i in o)if(void 0!==n.style[i])return o[i];return void 0!==document[t]||void 0!==document["on"+t]?t:void 0!==e[t]||void 0!==e["on"+t]?t:void 0}};e&&(e.Cuic=t),t.ready(function(){t.element(document).on("mousemove",function(e){t.mouseX=e.clientX,t.mouseY=e.clientY}),t.find("html,body").css({height:"100%",minHeight:"100%"}),t.find("body").css({position:"relative"})})}(window),Cuic.Benchmark=function(){function e(){_classCallCheck(this,e);var t=null,i=null,n=0;this.getTime=function(){return t&&i?i-t:t?Date.now()-t:0},this.isStarted=function(){return"number"==typeof t},this.reset=function(){n=0,t=null,i=null},this.start=function(){t=Date.now(),i=null},this.stop=function(){t=null,i=Date.now()}}return e}(),Cuic.Collection=function(){function e(t){_classCallCheck(this,e),this.events=new Cuic.Events,this.values=t instanceof Array?t:[],this.length=this.values.length}return _createClass(e,[{key:"add",value:function(e){this.values.push(e),this.length+=1,this.events.trigger("added",e)}},{key:"each",value:function(e){for(var t=0;t<this.values.length;t+=1)e.call(this,this.values[t])}},{key:"get",value:function(e){return this.values[e]}},{key:"indexOf",value:function(e){return this.values.indexOf(e)}},{key:"onAdded",value:function(e){return this.events.on("added",e),this}},{key:"onRemoved",value:function(e){return this.events.on("removed",e),this}},{key:"remove",value:function(e){var t=this.values.indexOf(e);t!==-1&&(this.values.splice(t,1),this.length-=1,this.events.trigger("removed",e))}},{key:"size",value:function(){return this.values.length}}]),e}(),Cuic.Events=function(){function e(t){_classCallCheck(this,e),this.callbacks={},this.context=t}return _createClass(e,[{key:"clear",value:function(){this.callbacks=[]}},{key:"off",value:function(e,t){if(this.callbacks[e]instanceof Array)for(var i=this.callbacks[e],n=0;n<i.length;n+=1)if(i[n]===t){i.splice(n,1);break}}},{key:"on",value:function(e,t){this.callbacks[e]instanceof Array||(this.callbacks[e]=[]),this.callbacks[e].push(t)}},{key:"once",value:function(e,t){var i=arguments,n=this;this.callbacks[e]instanceof Array||(this.callbacks[e]=[]);var o=function o(){var s=Array.prototype.slice.call(i),a=s.shift();t.apply(a,s),n.off(e,o)};this.callbacks[e].push(o)}},{key:"trigger",value:function(e){if(this.callbacks[e]instanceof Array)for(var t=this.callbacks[e],i=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n+=1)t[n].apply(this.context,i)}}]),e}(),function(e){var t=["checkbox","color","date","datetime","email","hidden","month","number","password","radio","range","search","tel","text","time","url","week"];Cuic.checkForm=function(t,i){function n(t){"function"==typeof i.onError&&(t=e(t),t.addClass(i.errorClass),i.onError.call(t,t.attr("name"),t.val()),o+=1)}t=e(t),i=Cuic.extend(!0,{errorClass:"error",filter:null,onError:null},i);var o=0;return t.find("."+i.errorClass).removeClass(i.errorClass),t.find("."+i.errorClass).removeClass(i.errorClass),t.find("[name]").not(":disabled").each(function(){var e=this.value;Cuic.isField(this)&&Cuic.isNodeFiltered(this,i.filter)&&(this.required&&void 0!==e&&null!==e?n(this):this.pattern&&!new RegExp(this.pattern).test(e)&&n(this))}),0===o},Cuic.getFields=function(t,i){var n={};return t=e(t),i=Cuic.extend(!0,{dynamicTyping:!0,filter:null,ignoreButtons:!0,ignoreEmpty:!1,ignoreUnchecked:!1,smartTyping:!0},i),t.find("[name]").not(":disabled").each(function(){var e=this,t=e.name,o=e.type,s=["button","reset","submit"].indexOf(o)!==-1,a=["checkbox","radio"].indexOf(o)!==-1;if(Cuic.isField(e)&&Cuic.isNodeFiltered(e,i.filter)&&(!i.ignoreButtons||!s)&&(!i.ignoreUnchecked||!a||e.checked)){var r=Cuic.getFieldValue(e,i);if(null!==r&&void 0!==r||!i.ignoreEmpty){if(e.multiple===!0&&(t=t.replace(/\[]$/g,"")),t.indexOf("[")!==-1){var l=t.substr(0,t.indexOf("[")),c=t.substr(t.indexOf("["));return void(n[l]=Cuic.resolveDimensionsTree(c,n[l],r))}a?e.checked?n[t]=r:["true","TRUE"].indexOf(r)!==-1?n[t]=!1:void 0===n[t]&&(n[t]=null):n[t]=r}}}),n},Cuic.resolveDimensionsTree=function(e,t,i){if(0===e.length)return i;if(void 0===t||null===t){var n=e.match(/\[/g).length,o=e.match(/]/g).length;if(n>o)throw new SyntaxError("Missing closing ']' in '"+e+"'");if(o<n)throw new SyntaxError("Missing opening '[' in '"+e+"'")}var s=e.indexOf("[");if(s!==-1){var a=e.indexOf("]",s+1),r=e.substr(a+1),l=e.substring(s+1,a),c=l.length;if(c&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(l)){void 0!==t&&null!==t||(t={});var u=this.resolveDimensionsTree(r,t[l],i);void 0!==u&&(t[l]=u)}else if(void 0!==t&&null!==t||(t=[]),0===c){var h=this.resolveDimensionsTree(r,t[l],i);void 0!==h&&t.push(h)}else if(/^[0-9]+$/.test(l)){var d=this.resolveDimensionsTree(r,t[l],i);void 0!==d&&(t[parseInt(l)]=d)}}return t},Cuic.getFieldValue=function(t,i){i=Cuic.extend({dynamicTyping:!0,smartTyping:!0},i);var n=t.value,o=t.nodeName.toUpperCase();switch(o){case"INPUT":var s="string"==typeof t.type?t.type.toLowerCase():"";["checkbox","radio"].indexOf(s)!==-1?n=t.checked?"on"===n||n:void 0:["button","reset","submit"].indexOf(s)!==-1||["number"].indexOf(s)!==-1&&i.smartTyping&&(n=Cuic.parseValue(n));break;case"SELECT":t.multiple&&(n=[],e(t).find("option").each(function(){var e=this;e.selected&&n.push(e.value)}));break;case"TEXTAREA":}if(i.dynamicTyping&&null!==n&&void 0!==n)if(n instanceof Array)for(var a=0;a<n.length;a+=1)n[a]=Cuic.parseValue(n[a]);else n=Cuic.parseValue(n);return n},Cuic.isField=function(e){var i=e.nodeName.toUpperCase();return"TEXTAREA"===i||"SELECT"===i||"INPUT"===i&&t.indexOf(e.type)!==-1},Cuic.isNodeFiltered=function(e,t){return void 0===t||null===t||t instanceof Array&&t.indexOf(e.name)!==-1||"function"==typeof t&&t.call(e,e.name)},Cuic.parseBoolean=function(e){return!!/^true$/i.test(e)||!/^false$/i.test(e)&&null},Cuic.parseValue=function(e){if("string"==typeof e){e=e.trim();var t=this.parseBoolean(e);if(t===!0||t===!1)return t;if(/^-?[0-9]+$/.test(e))return parseInt(e);if(/^-?[0-9]+\.[0-9]+$/.test(e))return parseFloat(e)}return""===e?null:e},Cuic.serializeQueryParams=function(e){var t="";if(null!=e)if("string"==typeof e)t=e;else if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var i=[];for(var n in e)e.hasOwnProperty(n)&&null!=e[n]&&(i.push("&"),i.push(encodeURIComponent(n).trim()),i.push("="),i.push(encodeURIComponent(e[n]).trim()));i.length>0&&(i.unshift(i),t=i.join(""))}return t}}(jQuery),Cuic.Shortcut=function(){function e(t){if(_classCallCheck(this,e),t=Cuic.extend({},Cuic.Shortcut.prototype.options,t),this.options=t,this.options.element=Cuic.node(t.element),"function"!=typeof this.options.callback)throw new TypeError("Shortcut.options.callback is not a function.");this.options.active&&this.activate()}return _createClass(e,[{key:"activate",value:function(){var e=this,t=this.options,i=this.node();Cuic.on("keydown",i,function(n){if((t.keyCode===n.keyCode||t.key===n.key||t.key===n.code)&&t.altKey===n.altKey&&t.ctrlKey===n.ctrlKey&&t.shiftKey===n.shiftKey)return n.preventDefault(),n.stopPropagation(),t.callback.call(e,i,n),!1})}},{key:"deactivate",value:function(){Cuic.off("keydown",this.node(),this.options.callback)}},{key:"node",value:function(){return Cuic.node(this.options.element)}}]),e}(),Cuic.Shortcut.prototype.options={active:!0,altKey:!1,callback:null,ctrlKey:!1,element:document.body,key:null,keyCode:null,shiftKey:!1},Cuic.keys={BACKSPACE:8,DEL:46,DOWN:40,ENTER:13,ESC:27,INSERT:45,LEFT:37,MINUS:109,PAGE_UP:33,PAGE_DOWN:34,PLUS:107,RIGHT:39,TAB:9,UP:38},Cuic.Element=function(){function e(t,i,n){if(_classCallCheck(this,e),i=Cuic.extend({},i),this.options=Cuic.extend({},Cuic.Element.prototype.options,n),this.options.element)this.element=Cuic.node(this.options.element);else if("string"==typeof t)this.element=document.createElement(t);else if(t instanceof HTMLElement||t instanceof HTMLDocument||t instanceof Window)this.element=t;else if(t instanceof Cuic.Element)this.element=t.node();else if(t instanceof Cuic.Elements)this.element=t.get(0);else{if(!(t instanceof jQuery))throw console.log(t),new TypeError("Cannot create element using given node.");this.element=t.get(0)}for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];if(null!==s&&void 0!==s){if("className"===o){this.addClass(s);continue}if("css"===o){this.css(s);continue}void 0!==this.element[o]?this.element[o]=s:"html"===o?this.html(s):"text"===o&&this.text(s)}}if("number"==typeof this.options.zIndex&&this.css({"z-index":parseInt(this.options.zIndex)}),this.options.css&&this.css(this.options.css),this.options.debug&&this.addClass("debug"),this.options.mainClass&&this.addClass(this.options.mainClass),this.events=new Cuic.Events(this),this.options.parent){var a=null;a="string"==typeof this.options.parent?Cuic.find(this.options.parent).get(0):Cuic.node(this.options.parent),a&&this.appendTo(a)}this.options.position&&this.hasParent()&&this.align(this.options.position)}return _createClass(e,[{key:"addClass",value:function(e){this.debug("addClass",e);for(var t=this.getClasses(),i=(e||"").split(" "),n=0;n<i.length;n+=1)t.indexOf(i[n])===-1&&t.push(i[n]);return this.node().className=t.join(" "),this}},{key:"addPositionClass",value:function(e,t){this.debug("addPositionClass",e,t);var i=function(e){return t?t+"-"+e:e};return this.removeClass([i("bottom"),i("center"),i("left"),i("right"),i("top")].join(" ")),e.indexOf("bottom")!==-1?this.addClass(i("bottom")):e.indexOf("top")!==-1?this.addClass(i("top")):this.addClass(i("center")),e.indexOf("left")!==-1?this.addClass(i("left")):e.indexOf("right")!==-1?this.addClass(i("right")):this.addClass(i("center")),this}},{key:"align",value:function(e){return this.debug("align",e),this.css(Cuic.calculateAlign(this,e)),this.addPositionClass(e,"aligned"),this.options.position=e,this.events.trigger("aligned",e),this}},{key:"anchor",value:function(e,t){return this.debug("anchor",e,t),t=Cuic.element(t||this.options.target),this.css(Cuic.calculateAnchor(this,e,t)),this.addPositionClass(e,"anchored"),this.options.anchor=e,this.options.target=t,this.events.trigger("anchored",e),this}},{key:"append",value:function(e){return this.debug("append",e),this.node().append(Cuic.node(e)),this}},{key:"appendTo",value:function(e){return this.debug("appendTo",e),Cuic.node(e).append(this.node()),this}},{key:"attr",value:function(e,t){var i=this.node();return void 0!==t?(e in i&&(i[e]=t),this):i[e]}},{key:"autoAlign",value:function(){this.debug("autoAlign");for(var e=Cuic.calculateAvailablePosition(this,this.parent()),t=["bottom","left","right","top"],i=this.position(),n=0;n<t.length;n+=1)this.css(t[n])||(i[t[n]]="");return"number"==typeof i.left&&(i.left<e.minX?i.left=e.minX:i.left>e.maxX&&(i.left=e.maxX)),"number"==typeof i.right&&(i.right<e.minX?i.right=e.minX:i.right>e.maxX&&(i.right=e.maxX)),"number"==typeof i.top&&(i.top<e.minY?i.top=e.minY:i.top>e.maxY&&(i.top=e.maxY)),"number"==typeof i.bottom&&(i.bottom<e.minY?i.bottom=e.minY:i.bottom>e.maxY&&(i.bottom=e.maxY)),this.css(i),this}},{key:"autoFit",value:function(){return this.autoAlign(),this.autoResize(),this}},{key:"autoResize",value:function(){this.debug("autoResize");var e=Cuic.calculateAvailableSpace(this,this.parent()),t={height:this.outerHeight(),width:this.outerWidth()};return t.width&&t.width>e.width&&(t.width=e.width),t.height&&t.height>e.height&&(t.height=e.height),this.css(t),this}},{key:"border",value:function(){var e=parseFloat(Cuic.getComputedStyle(this,"border-bottom-width")),t=parseFloat(Cuic.getComputedStyle(this,"border-left-width")),i=parseFloat(Cuic.getComputedStyle(this,"border-right-width")),n=parseFloat(Cuic.getComputedStyle(this,"border-top-width"));return{bottom:e,horizontal:t+i,left:t,right:i,top:n,vertical:e+n}}},{key:"children",value:function e(t){for(var e=[],i=this.node().children||this.node().childNodes,n=0;n<i.length;n+=1)i[n]instanceof HTMLElement&&(t&&!i[n].matches(t)||e.push(i[n]));return new Cuic.Elements(e,this.node(),t)}},{key:"clone",value:function(){return this.debug("clone"),Cuic.element(this.node().cloneNode(!0))}},{key:"closest",value:function(e){var t=this.node().closest(e);return t?Cuic.element(t):null}},{key:"css",value:function(e){var t=this.node();if(e){if("object"===("undefined"==typeof e?"undefined":_typeof(e))){this.debug("css",e);var i="";Cuic.autoPixel(e);for(var n=0;n<t.style.length;n+=1){var o=t.style[n];if(!(o in e)){var s=t.style[o];"string"==typeof s&&""===s&&(s='""'),i+=o+": "+s+";"}}for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];a in t.style||console.warn('Style "'+a+'" is not supported by element.',t),"string"==typeof r&&""===r&&(r='""'),i+=a+": "+r+";"}return t.style=i,this}if("string"==typeof e){if(e.indexOf(":")!==-1)return this.debug("css",e),t.style=e,this;switch(e){case"position":return Cuic.getComputedStyle(t,e)}return t.style[e]}}return t.style}},{key:"data",value:function(e,t){this.debug("data",e,t);var i=this.node().dataset;return void 0!==t?(i[Cuic.toCamelCase(e)]=t,this):e?i[e]:i}},{key:"debug",value:function(){if(Cuic.DEBUG||this.options.debug){var e=Array.prototype.slice.call(arguments);console.log.apply(this,e)}}},{key:"disable",value:function(){return this.debug("disable"),this.node().disabled=!0,this.addClass("disabled"),this.events.trigger("disabled"),this}},{key:"empty",value:function(){return this.debug("empty"),this.text(""),this}},{key:"enable",value:function(){return this.debug("enable"),this.node().disabled=!1,this.removeClass("disabled"),this.events.trigger("enabled"),this}},{key:"enterFullScreen",value:function(){var e=this.node();return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this}},{key:"find",value:function(e){var t=this.node(),i=t.querySelectorAll(e);return new Cuic.Elements(i,t,e)}},{key:"getClasses",value:function(){return this.node().className.split(" ")}},{key:"hasClass",value:function(e){for(var t=this.getClasses(),i=(e||"").split(" "),n=i.length>0,o=0;o<i.length;o+=1)if(t.indexOf(i[o])===-1){n=!1;break}return n}},{key:"hasParent",value:function(){return!!this.parentNode()}},{key:"height",value:function(){var e=this.node();return e instanceof Window?e.screen.height:e.clientHeight-this.padding().vertical}},{key:"hide",value:function(){return this.debug("hide"),this.addClass("hidden"),this.events.trigger("hidden"),this}},{key:"html",value:function(e){return void 0!==e?(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?e instanceof HTMLElement?(this.empty(),this.append(e)):e instanceof Cuic.Element?(this.empty(),this.append(e.node())):e instanceof jQuery&&(this.empty(),this.append(e.get(0))):this.node().innerHTML=e,this):this.node().innerHTML}},{key:"innerHeight",value:function(){var e=this.node();return e instanceof Window?e.screen.height:e.clientHeight}},{key:"innerWidth",value:function(){var e=this.node();return e instanceof Window?e.screen.width:e.clientWidth}},{key:"insertAfter",value:function(e){this.debug("insertAfter",e),e=Cuic.node(e);var t=this.node().parentNode;return t.insertBefore(e,this.node().nextSibling),this}},{key:"insertBefore",value:function(e){this.debug("insertBefore",e),e=Cuic.node(e);var t=this.node().parentNode;return t.insertBefore(e,this.node()),this}},{key:"isAligned",value:function(e){var t=!1;if(this.options.position){var i=(e||"").split(" ");t=!0;for(var n=0;n<i.length;n+=1)if(this.options.position.indexOf(i[n])===-1){t=!1;break}}return t}},{key:"isChildOf",value:function(e){e=Cuic.node(e);var t=this.node();do if(t=t.parentNode,t===e)return!0;while(t);return!1}},{key:"isDisabled",value:function(){return this.node().disabled||this.hasClass("disabled")}},{key:"isEnabled",value:function(){return this.node().disabled!==!0||!this.hasClass("disabled")}},{key:"isHidden",value:function(){return this.hasClass("hidden")||"none"===this.css("display")}},{key:"isPosition",value:function(e){var t=this.position();return e.indexOf("center")!==-1?t.top==t.bottom||t.left==t.right:e.indexOf("bottom")!==-1?t.bottom<t.top:e.indexOf("top")!==-1?t.top<t.bottom:e.indexOf("left")!==-1?t.left<t.right:e.indexOf("right")!==-1&&t.right<t.left}},{key:"isRemoved",value:function(){var e=this.node().parentNode;return null===e||void 0===e}},{key:"isShown",value:function(){return!this.hasClass("hidden")&&"none"!==this.css("display")}},{key:"margin",value:function(){var e=0,t=0,i=0,n=0;return this.node()instanceof Window||(e=parseFloat(Cuic.getComputedStyle(this,"margin-bottom")),t=parseFloat(Cuic.getComputedStyle(this,"margin-left")),i=parseFloat(Cuic.getComputedStyle(this,"margin-right")),n=parseFloat(Cuic.getComputedStyle(this,"margin-top"))),{bottom:e,horizontal:t+i,left:t,right:i,top:n,vertical:e+n}}},{key:"node",value:function(){return this.element}},{key:"off",value:function(e,t){return Cuic.off(e,this.node(),t),this}},{key:"offset",value:function(){var e=this.node();return{left:e.offsetLeft,top:e.offsetTop}}},{key:"offsetParent",value:function(){var e=this.offsetParentNode();return e?Cuic.element(e):null}},{key:"offsetParentNode",value:function(){return this.node().offsetParent}},{key:"on",value:function(e,t){return Cuic.on(e,this.node(),t),this}},{key:"once",value:function(e,t){return Cuic.once(e,this.node(),t),this}},{key:"onAligned",value:function(e){return this.events.on("aligned",e),this}},{key:"onAnchored",value:function(e){return this.events.on("anchored",e),this}},{key:"onRemoved",value:function(e){return this.events.on("removed",e),this}},{key:"outerHeight",value:function(e){var t=this.node();return t instanceof Window?t.screen.height:this.node().offsetHeight+(e?this.margin().vertical:0)}},{key:"outerWidth",value:function(e){var t=this.node();return t instanceof Window?t.screen.width:this.node().offsetWidth+(e?this.margin().horizontal:0)}},{key:"padding",value:function(){var e=0,t=0,i=0,n=0;return this.node()instanceof Window||(e=parseFloat(Cuic.getComputedStyle(this,"padding-bottom")),t=parseFloat(Cuic.getComputedStyle(this,"padding-left")),i=parseFloat(Cuic.getComputedStyle(this,"padding-right")),n=parseFloat(Cuic.getComputedStyle(this,"padding-top"))),{bottom:e,horizontal:t+i,left:t,right:i,top:n,vertical:e+n}}},{key:"parent",value:function e(){var e=this.parentNode();return e?Cuic.element(e):null}},{key:"parentNode",value:function(){return this.node().parentNode}},{key:"position",value:function(){var e=parseFloat(Cuic.getComputedStyle(this,"bottom")),t=parseFloat(Cuic.getComputedStyle(this,"left")),i=parseFloat(Cuic.getComputedStyle(this,"right")),n=parseFloat(Cuic.getComputedStyle(this,"top"));return{bottom:e,left:t,right:i,top:n}}},{key:"prepend",value:function(e){return this.debug("prepend",e),this.node().prepend(Cuic.node(e)),this}},{key:"prependTo",value:function(e){return this.debug("prependTo",e),Cuic.node(e).prepend(this.node()),this}},{key:"remove",value:function(){return this.debug("remove"),this.node().remove(),this.events.trigger("removed"),this}},{key:"removeClass",value:function(e){this.debug("removeClass",e);for(var t=this.getClasses(),i=(e||"").split(" "),n=0;n<i.length;n+=1){var o=t.indexOf(i[n]);o!==-1&&t.splice(o,1)}return this.node().className=t.join(" "),this}},{key:"show",value:function(){return this.debug("show"),this.removeClass("hidden"),this.events.trigger("shown"),this}},{key:"text",value:function(e){return this.debug("text",e),void 0!==e?(this.node().innerText=e,this):this.node().innerText}},{key:"val",value:function(e){return this.debug("val",e),void 0!==e?(this.node().value=e,this):this.node().value}},{key:"width",value:function(){var e=this.node();return e instanceof Window?e.screen.width:e.clientWidth-this.padding().horizontal}}]),e}(),Cuic.Element.prototype.options={className:null,css:null,debug:!1,namespace:null,parent:null},Cuic.Component=function(e){function t(e,i,n){_classCallCheck(this,t),n=Cuic.extend({},Cuic.Component.prototype.options,n);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));return o.addClass("component"),o.options.closable&&o.addClass("closable"),void 0!==o.options.opened&&(o.options.opened?o.open():(o.hide(),o.close())),o.hasParent()&&(o.options.maximized&&o.maximize(),o.options.maximizedX&&o.maximizeX(),o.options.maximizedY&&o.maximizeY()),o}return _inherits(t,e),_createClass(t,[{key:"close",value:function(e){var t=this;return this.debug("close"),this.events.trigger("close"),this.removeClass("opened"),this.addClass("closed"),this.once("transitionend",function(i){t.isOpened()||(t.debug("closed"),t.events.trigger("closed",i),t.hide(),"function"==typeof e&&e.call(t,i))}),this}},{key:"isMaximized",value:function(){return this.hasClass("maximized")||this.hasClass("maximized-x maximized-y")||"100%"===this.css("width")&&"100%"===this.css("height")}},{key:"isMaximizedX",value:function(){return this.hasClass("maximized-x")||"100%"===this.css("width")}},{key:"isMaximizedY",value:function(){return this.hasClass("maximized-y")||"100%"===this.css("height")}},{key:"isMinimized",value:function(){return this.hasClass("minimized");
}},{key:"isOpened",value:function(){return this.hasClass("opened")}},{key:"maximize",value:function(e){var t=this;return this.debug("maximize"),this.events.trigger("maximize"),this.removeClass("minimized"),this.addClass("maximized"),this.css(Cuic.calculateMaximize(this)),this.once("transitionend",function(i){t.isMaximized()&&(t.debug("maximized"),t.events.trigger("maximized",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"maximizeX",value:function(e){var t=this;return this.debug("maximizeX"),this.events.trigger("maximizeX"),this.removeClass("minimized"),this.addClass("maximized-x"),this.css({width:Cuic.calculateMaximize(this).width}),this.autoAlign(),this.once("transitionend",function(i){t.isMaximizedX()&&(t.debug("maximizedX"),t.events.trigger("maximizedX",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"maximizeY",value:function(e){var t=this;return this.debug("maximizeY"),this.events.trigger("maximizeY"),this.removeClass("minimized"),this.addClass("maximized-y"),this.css({height:Cuic.calculateMaximize(this).height}),this.autoAlign(),this.once("transitionend",function(i){t.isMaximizedY()&&(t.debug("maximizedY"),t.events.trigger("maximizedY",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"minimize",value:function(e){var t=this;return this.debug("minimize"),this.events.trigger("minimize"),this.removeClass("maximized maximized-x maximized-y"),this.addClass("minimized"),this.css(Cuic.calculateMinimize(this,this.options.position)),this.once("transitionend",function(i){t.isMinimized()&&(t.debug("minimized"),t.events.trigger("minimized",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"onClose",value:function(e){this.events.on("close",e)}},{key:"onClosed",value:function(e){this.events.on("closed",e)}},{key:"onMaximize",value:function(e){this.events.on("maximize",e)}},{key:"onMaximized",value:function(e){this.events.on("maximized",e)}},{key:"onMinimize",value:function(e){this.events.on("minimize",e)}},{key:"onMinimized",value:function(e){this.events.on("minimized",e)}},{key:"onOpen",value:function(e){this.events.on("open",e)}},{key:"onOpened",value:function(e){this.events.on("opened",e)}},{key:"open",value:function(e){var t=this;return this.debug("open"),this.show(),this.events.trigger("open"),this.removeClass("closed"),this.addClass("opened"),this.once("transitionend",function(i){t.isOpened()&&(t.debug("opened"),t.events.trigger("opened",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"toggle",value:function(e){return this.isOpened()?this.close(e):this.open(e),this}}]),t}(Cuic.Element),Cuic.Component.prototype.options={opened:!0,maximized:!1,maximizedX:!1,maximizedY:!1},Cuic.Group=function(e){function t(e,i,n){_classCallCheck(this,t),n=Cuic.extend({},Cuic.Group.prototype.options,n);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Cuic.extend({className:n.className,role:"group"},i),n));return o.addClass("component-group"),o.components=new Cuic.Collection,o}return _inherits(t,e),_createClass(t,[{key:"addComponent",value:function(e){if(!(e instanceof Cuic.Element))throw new TypeError("Cannot add object to the group.");return this.events.trigger("addComponent",e),this.isAligned("top")?e.prependTo(this):e.appendTo(this),this.components.add(e),this}},{key:"onAddComponent",value:function(e){return this.events.on("addComponent",e),this}},{key:"onComponentAdded",value:function(e){return this.components.onAdded(e),this}},{key:"onComponentRemoved",value:function(e){return this.components.onRemoved(e),this}},{key:"onRemoveComponent",value:function(e){return this.events.on("removeComponent",e),this}},{key:"removeComponent",value:function(e){return this.events.trigger("removeComponent",e),this.components.remove(e),this}}]),t}(Cuic.Component),Cuic.Group.prototype.options={namespace:"group"},Cuic.Elements=function(){function e(t,i,n){_classCallCheck(this,e);var o=void 0;for(o=0;o<t.length;o+=1)t.hasOwnProperty(o)&&(this[o]=Cuic.element(t[o]));this.length=o,this.context=i,this.selector=n}return _createClass(e,[{key:"align",value:function(e){return this.each(function(t){t.align(e)})}},{key:"anchor",value:function(e,t){return this.each(function(i){i.anchor(e,t)})}},{key:"css",value:function(e){return this.each(function(t){t.css(e)})}},{key:"each",value:function(e){for(var t=0;t<this.length;t+=1)e.call(this,this[t]);return this}},{key:"empty",value:function(){return this.each(function(e){e.empty()})}},{key:"eq",value:function(e){return this[e]}},{key:"filter",value:function(e){var t=[];return"string"==typeof e&&this.each(function(i){i.node().matches(e)&&t.push(i)}),new Cuic.Elements(t,this.context,e)}},{key:"find",value:function(e){var t=[];return"string"==typeof e&&this.each(function(i){i.find(e).each(function(e){t.push(e)})}),new Cuic.Elements(t,this.context,e)}},{key:"first",value:function(){return this.length?this[0]:nul
