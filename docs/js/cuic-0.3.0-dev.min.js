"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),i=t.length;--i>=0&&t.item(i)!==this;);return i>-1}),function(e){var t={options:{debug:!1},mouseX:0,mouseY:0,addEventListener:function(e,t,i){return"function"==typeof e.addEventListener?e.addEventListener(t,i):"function"==typeof e.attachEvent?e.attachEvent(t,i):void 0},apply:function(e,t,i){if("function"==typeof e)return e.apply(t,i)},autoPixel:function(e){var t=["bottom","left","padding","right","top","max-height","max-width","height","width","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top"];for(var i in e)e.hasOwnProperty(i)&&"number"==typeof e[i]&&t.indexOf(i)!==-1&&(e[i]=e[i]+"px");return e},call:function(){var e=void 0,t=void 0,i=Array.prototype.slice.call(arguments);return i.length>=2?(t=i.shift(),e=i.shift()):i.length>0&&(t=i.shift()),this.apply(t,e,i)},constraintPosition:function(e,t){return"number"==typeof e.left&&(e.left<t.minX?e.left=t.minX:e.left>t.maxX&&(e.left=t.maxX)),"number"==typeof e.right&&(e.right<t.minX?e.right=t.minX:e.right>t.maxX&&(e.right=t.maxX)),"number"==typeof e.top&&(e.top<t.minY?e.top=t.minY:e.top>t.maxY&&(e.top=t.maxY)),"number"==typeof e.bottom&&(e.bottom<t.minY?e.bottom=t.minY:e.bottom>t.maxY&&(e.bottom=t.maxY)),e},debug:function(){this.options.debug&&void 0!==console&&(console.debug||console.log).apply(this,Array.prototype.slice.call(arguments))},element:function(e){return e instanceof this.Element?e:this.isNode(e)?new this.Element(e):e instanceof Window?new this.Element(e):e instanceof jQuery?new this.Element(e.get(0)):"string"==typeof e?this.find(e).eq(0):e},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},extend:function(){var e=Array.prototype.slice.call(arguments),t=!1,i=e.shift();"boolean"==typeof i&&(t=i,i=e.shift());for(var n=0;n<e.length;n+=1){var o=e[n];if("object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o&&void 0!==o&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&null!==i&&void 0!==i)for(var s in o)t&&"object"===_typeof(o[s])&&null!==o[s]&&void 0!==o[s]?i[s]=this.extend(i[s],o[s]):i[s]=o[s];else null!==o&&void 0!==o&&(i=o)}return i},find:function(e,t){return t=this.node(t||document),this.element(t).find(e)},getComputedStyle:function(t,i){return t=this.node(t),e.getComputedStyle(t,null).getPropertyValue(i)},getStylePrefix:function(){var e=document.createElement("div");return""==e.WebkitAnimation?"-webkit-":""==e.MozAnimation?"-moz-":""==e.OAnimation?"-o-":""==e.WebkitTransition?"-webkit-":""==e.MozTransition?"-moz-":""==e.OTransition?"-o-":""},isElement:function(e){return"object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},isFullScreenEnabled:function(){return(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)===!0},isNode:function(e){return"object"===("undefined"==typeof Node?"undefined":_typeof(Node))?e instanceof Node:e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},namespace:function(e){return function(i,n){return n=t.slug(n),i+".cuic."+e+(n?"."+n:"")}},node:function(e){if(this.isNode(e))return e;if(e instanceof Window)return e;if(e instanceof this.Element)return e.node();if(e instanceof jQuery)return e.get(0);if("string"==typeof e)return this.find(e).get(0);throw console.info(e),new TypeError("cannot get HTMLElement from element.")},off:function(e,t,i){if(t instanceof this.Element)t=t.node();else if(t instanceof jQuery)t=t.get(0);else if(!(this.isNode(t)||t instanceof Window))throw console.info(e,t),new TypeError("Cannot add event listener on unsupported element.");var n=this.whichEvent(e);if(n||console.warn('Event "'+e+'" is not supported by this browser.'),e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(n||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(n||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}return this.removeEventListener(t,n,i)},on:function(e,t,i){if(t instanceof this.Element)t=t.node();else if(t instanceof jQuery)t=t.get(0);else if(!(this.isNode(t)||t instanceof Window))throw console.info(e,t),new TypeError("Cannot add event listener on unsupported element.");var n=this.whichEvent(e);if(n||console.warn('Event "'+e+'" is not supported by this browser.'),e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(n||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(n||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}return this.addEventListener(t,n,i)},once:function(e,i,n){var o=this,s=arguments;if(i instanceof this.Element)i=i.node();else if(i instanceof jQuery)i=i.get(0);else if(!(this.isNode(i)||i instanceof Window))throw console.info(e,i),new TypeError("Cannot add event listener on unsupported element.");var a=this.whichEvent(e);if(a||console.warn('Event "'+e+'" is not supported by this browser.'),e.indexOf("animation")!==-1){var r=this.prefixStyle("animation-duration");(a||"animation"in i.style)&&"0s"!=getComputedStyle(i)[r]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var l=this.prefixStyle("transition-duration");(a||"transition"in i.style)&&"0s"!=getComputedStyle(i)[l]||this.apply(n,this,Array.prototype.slice.call(arguments))}var c=function e(r){t.removeEventListener(i,a,e),t.apply(n,o,Array.prototype.slice.call(s))};return this.addEventListener(i,a,c)},onWindowResized:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=void 0;this.on("resize",e,function(e){var o=this;clearTimeout(n),n=setTimeout(function(){t.call(o,e)},i)})},parseBoolean:function(e){return!!/^true$/i.test(e)||!/^false$/i.test(e)&&null},prefixStyle:function(e){var t=this.getStylePrefix();return"string"==typeof t&&t.length?t+e:e},ready:function(e){document.addEventListener("DOMContentLoaded",e)},removeEventListener:function(e,t,i){return"function"==typeof e.removeEventListener?e.removeEventListener(t,i):"function"==typeof e.detachEvent?e.detachEvent(t,i):void 0},slug:function(e){return"string"==typeof e&&(e=e.replace(/ +/g,"-"),e=e.replace(/[^a-zA-Z0-9_-]+/g,"")),e},toCamelCase:function(e){return e.toLowerCase().replace(/[-_]+/g," ").replace(/[^\w\s]/g,"").replace(/ (.)/g,function(e){return e.toUpperCase()}).replace(/ /g,"")},valueOf:function(e,t){switch("undefined"==typeof e?"undefined":_typeof(e)){case"function":e=e.call(t)}return e},whichEvent:function(t){var i=void 0,n=document.createElement("div"),o={};switch(t){case"transitionend":o={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(i in o)if(void 0!==n.style[i])return o[i];return void 0!==document[t]||void 0!==document["on"+t]?t:void 0!==e[t]||void 0!==e["on"+t]?t:void 0}};e&&(e.Cuic=t),t.ready(function(){t.element(document).on("mousemove",function(e){t.mouseX=e.clientX,t.mouseY=e.clientY}),t.find("html,body").css({height:"100%",minHeight:"100%"}),t.find("body").css({position:"relative"})})}(window),Cuic.Benchmark=function(){function e(){_classCallCheck(this,e);var t=null,i=null,n=0;this.getTime=function(){return t&&i?i-t:t?Date.now()-t:0},this.isStarted=function(){return"number"==typeof t},this.reset=function(){n=0,t=null,i=null},this.start=function(){t=Date.now(),i=null},this.stop=function(){t=null,i=Date.now()}}return e}(),Cuic.browser={isChrome:function(){return!!window.chrome&&!!window.chrome.webstore},isEdge:function(){return!isIE&&!!window.StyleMedia},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isIE:function(){return!!document.documentMode},isOpera:function(){return!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0},isSafari:function(){return/constructor/i.test(window.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!window.safari||safari.pushNotification)}},Cuic.Collection=function(){function e(t){_classCallCheck(this,e),this.events=new Cuic.Events,this.values=t instanceof Array?t:[],this.length=this.values.length}return _createClass(e,[{key:"add",value:function(e){this.values.push(e),this.length+=1,this.events.trigger("added",e)}},{key:"each",value:function(e){for(var t=0;t<this.values.length;t+=1)e.call(this,this.values[t])}},{key:"get",value:function(e){return this.values[e]}},{key:"indexOf",value:function(e){return this.values.indexOf(e)}},{key:"onAdded",value:function(e){return this.events.on("added",e),this}},{key:"onRemoved",value:function(e){return this.events.on("removed",e),this}},{key:"remove",value:function(e){var t=this.values.indexOf(e);t!==-1&&(this.values.splice(t,1),this.length-=1,this.events.trigger("removed",e))}},{key:"size",value:function(){return this.values.length}}]),e}(),Cuic.Events=function(){function e(t){_classCallCheck(this,e),this.callbacks={},this.context=t}return _createClass(e,[{key:"clear",value:function(){this.callbacks=[]}},{key:"off",value:function(e,t){if(this.callbacks[e]instanceof Array)for(var i=this.callbacks[e],n=0;n<i.length;n+=1)if(i[n]===t){i.splice(n,1);break}}},{key:"on",value:function(e,t){this.callbacks[e]instanceof Array||(this.callbacks[e]=[]),this.callbacks[e].push(t)}},{key:"once",value:function(e,t){var i=arguments,n=this;this.callbacks[e]instanceof Array||(this.callbacks[e]=[]);var o=function o(){var s=Array.prototype.slice.call(i),a=s.shift();t.apply(a,s),n.off(e,o)};this.callbacks[e].push(o)}},{key:"trigger",value:function(e){if(this.callbacks[e]instanceof Array)for(var t=this.callbacks[e],i=Array.prototype.slice.call(arguments,1),n=0;n<t.length;n+=1)t[n].apply(this.context,i)}}]),e}(),Cuic.getFields=function(e,t){e=this.element(e),t=Cuic.extend(!0,{dynamicTyping:!0,filter:null,ignoreButtons:!0,ignoreEmpty:!1,ignoreUnchecked:!1,smartTyping:!0},t);var i={};return e.find("[name]").not(":disabled").each(function(e){var n=e.node(),o=n.name,s=n.type,a=["button","reset","submit"].indexOf(s)!==-1,r=["checkbox","radio"].indexOf(s)!==-1;if(Cuic.isFormField(n)&&Cuic.isNodeFiltered(n,t.filter)&&(!t.ignoreButtons||!a)&&(!t.ignoreUnchecked||!r||n.checked)){var l=Cuic.getFieldValue(n,t);if(null!==l&&void 0!==l||!t.ignoreEmpty){if(n.multiple===!0&&(o=o.replace(/\[]$/g,"")),o.indexOf("[")!==-1){var c=o.substr(0,o.indexOf("[")),u=o.substr(o.indexOf("["));return void(i[c]=Cuic.resolveDimensionsTree(u,i[c],l))}r?n.checked?i[o]=l:["true","TRUE"].indexOf(l)!==-1?i[o]=!1:void 0===i[o]&&(i[o]=null):i[o]=l}}}),i},Cuic.getFieldValue=function(e,t){t=Cuic.extend({dynamicTyping:!0,smartTyping:!0},t);var i=e.value,n=e.nodeName.toUpperCase();switch(n){case"INPUT":var o="string"==typeof e.type?e.type.toLowerCase():"";["checkbox","radio"].indexOf(o)!==-1?i=e.checked?"on"===i||i:void 0:["button","reset","submit"].indexOf(o)!==-1||["number"].indexOf(o)!==-1&&t.smartTyping&&(i=Cuic.parseValue(i));break;case"SELECT":e.multiple&&(i=[],this.element(e).find("option").each(function(e){var t=e.node();t.selected&&i.push(t.value)}));break;case"TEXTAREA":}if(t.dynamicTyping&&null!==i&&void 0!==i)if(i instanceof Array)for(var s=0;s<i.length;s+=1)i[s]=Cuic.parseValue(i[s]);else i=Cuic.parseValue(i);return i},Cuic.isFormField=function(e){var t=e.nodeName.toUpperCase();return"TEXTAREA"===t||"SELECT"===t||"INPUT"===t&&["checkbox","color","date","datetime","email","hidden","month","number","password","radio","range","search","tel","text","time","url","week"].indexOf(e.type)!==-1},Cuic.isNodeFiltered=function(e,t){return void 0===t||null===t||t instanceof Array&&t.indexOf(e.name)!==-1||"function"==typeof t&&t.call(e,e.name)},Cuic.parseValue=function(e){if("string"==typeof e){e=e.trim();var t=this.parseBoolean(e);if(t===!0||t===!1)return t;if(/^-?[0-9]+$/.test(e))return parseInt(e);if(/^-?[0-9]+\.[0-9]+$/.test(e))return parseFloat(e)}return""===e?null:e},Cuic.resolveDimensionsTree=function(e,t,i){if(0===e.length)return i;if(void 0===t||null===t){var n=e.match(/\[/g).length,o=e.match(/]/g).length;if(n>o)throw new SyntaxError("Missing closing ']' in '"+e+"'");if(o<n)throw new SyntaxError("Missing opening '[' in '"+e+"'")}var s=e.indexOf("[");if(s!==-1){var a=e.indexOf("]",s+1),r=e.substr(a+1),l=e.substring(s+1,a),c=l.length;if(c&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(l)){void 0!==t&&null!==t||(t={});var u=this.resolveDimensionsTree(r,t[l],i);void 0!==u&&(t[l]=u)}else if(void 0!==t&&null!==t||(t=[]),0===c){var h=this.resolveDimensionsTree(r,t[l],i);void 0!==h&&t.push(h)}else if(/^[0-9]+$/.test(l)){var d=this.resolveDimensionsTree(r,t[l],i);void 0!==d&&(t[parseInt(l)]=d)}}return t},Cuic.serializeQueryParams=function(e){var t="";if(null!=e)if("string"==typeof e)t=e;else if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var i=[];for(var n in e)e.hasOwnProperty(n)&&null!=e[n]&&(i.push("&"),i.push(encodeURIComponent(n).trim()),i.push("="),i.push(encodeURIComponent(e[n]).trim()));i.length>0&&(i.unshift(i),t=i.join(""))}return t},Cuic.Shortcut=function(){function e(t){if(_classCallCheck(this,e),t=Cuic.extend({},Cuic.Shortcut.prototype.options,t),this.options=t,this.options.element=Cuic.node(t.element),"function"!=typeof this.options.callback)throw new TypeError("Shortcut.options.callback is not a function.");this.options.active&&this.activate()}return _createClass(e,[{key:"activate",value:function(){var e=this,t=this.options,i=this.node();Cuic.on("keydown",i,function(n){if((t.keyCode===n.keyCode||t.key===n.key||t.key===n.code)&&t.altKey===n.altKey&&t.ctrlKey===n.ctrlKey&&t.shiftKey===n.shiftKey)return n.preventDefault(),n.stopPropagation(),t.callback.call(e,i,n),!1})}},{key:"deactivate",value:function(){Cuic.off("keydown",this.node(),this.options.callback)}},{key:"node",value:function(){return Cuic.node(this.options.element)}}]),e}(),Cuic.Shortcut.prototype.options={active:!0,altKey:!1,callback:null,ctrlKey:!1,element:document.body,key:null,keyCode:null,shiftKey:!1},Cuic.keys={BACKSPACE:8,DEL:46,DOWN:40,ENTER:13,ESC:27,INSERT:45,LEFT:37,MINUS:109,PAGE_UP:33,PAGE_DOWN:34,PLUS:107,RIGHT:39,TAB:9,UP:38},Cuic.Element=function(){function e(t,i,n){if(_classCallCheck(this,e),i=Cuic.extend({},i),this.options=Cuic.extend({},Cuic.Element.prototype.options,n),this.options.element)this.element=Cuic.node(this.options.element);else if("string"==typeof t)this.element=document.createElement(t);else if(Cuic.isNode(t)||t instanceof Window)this.element=t;else if(t instanceof Cuic.Element)this.element=t.node();else if(t instanceof Cuic.Elements)this.element=t.get(0);else{if(!(t instanceof jQuery))throw console.info(t),new TypeError("Cannot create element using given node.");this.element=t.get(0)}for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];if(null!==s&&void 0!==s){if("className"===o){this.addClass(s);continue}if("css"===o){this.css(s);continue}void 0!==this.element[o]?this.element[o]=s:"html"===o?this.html(s):"text"===o&&this.text(s)}}"number"==typeof this.options.zIndex&&this.css({"z-index":parseInt(this.options.zIndex)}),this.options.css&&this.css(this.options.css),this.options.debug&&this.addClass("debug"),this.options.mainClass&&this.addClass(this.options.mainClass),this.events=new Cuic.Events(this),this.options.parent&&(this.appendTo(this.options.parent),Cuic.element(this.options.parent).append(this)),this.options.position&&this.hasParent()&&this.align(this.options.position)}return _createClass(e,[{key:"_calculateAlign",value:function(e,t){e=e||"",t?(t=Cuic.element(t),"HTML"===t.node().nodeName&&(t=Cuic.element(document.body))):t=this.offsetParent();var i=this.outerHeight(!0),n=this.outerWidth(!0),o=t.height(),s=t.width(),a=t.node().scrollLeft,r=t.node().scrollTop,l=-r,c=-a,u={bottom:"",left:"",right:"",top:""};switch(this.css("position")){case"fixed":t=Cuic.element(window),o=t.innerHeight(),s=t.innerWidth(),a=0,r=0,l=0,c=0}var h=a+Math.max(0,t.innerWidth()/2-n/2),d=r+Math.max(0,t.innerHeight()/2-i/2);e.indexOf("top")!==-1?u.top=0:e.indexOf("bottom")!==-1?u.bottom=0:u.top=d,e.indexOf("left")!==-1?u.left=0:e.indexOf("right")!==-1?u.right=0:u.left=h;var p=this._calculateAvailablePosition(t);return u.left<p.minX?u.left=p.minX:u.left>p.maxX&&(u.left=p.maxX),u}},{key:"_calculateAnchor",value:function(e,t,i){e=e||"";var n=void 0,o=void 0,s=void 0;t instanceof Array&&2===t.length?(n=1,o=1,s={left:t[0],top:t[1]}):(t=Cuic.element(t),n=t.outerHeight(),o=t.outerWidth(),s=t.offset());var a=this.outerWidth(!0),r=this.outerHeight(!0),l=a/2,c=r/2,u=o/2,h=n/2,d={bottom:"",left:"",right:"",top:""};return e.indexOf("bottom")!==-1?d.top=s.top+n:e.indexOf("top")!==-1?d.top=s.top-r:d.top=s.top+h-c,e.indexOf("left")!==-1?d.left=s.left-a:e.indexOf("right")!==-1?d.left=s.left+o:d.left=s.left+u-l,"fixed"===this.css("position")&&(d.left-=window.scrollX,d.top-=window.scrollY),d}},{key:"_calculateAvailablePosition",value:function(e){e=e?Cuic.element(e):this.offsetParent();var t={minX:0,minY:0,maxX:Math.max(0,e.width()-this.outerWidth(!0)),maxY:Math.max(0,e.height()-this.outerHeight(!0))};switch(this.css("position")){case"absolute":case"fixed":var i=e.padding();t.maxX+=i.horizontal,t.maxY+=i.vertical}return t}},{key:"_calculateAvailableSpace",value:function(e){e=e?Cuic.element(e):this.offsetParent();var t=this.margin(),i={height:e.height(),width:e.width()};switch(this.css("position")){case"absolute":case"fixed":var n=e.padding();i.height+=n.vertical,i.width+=n.horizontal,i.height-=t.vertical,i.width-=t.horizontal;break;case"relative":i.height-=t.vertical,i.width-=t.horizontal}return i}},{key:"_calculateMaximize",value:function(){var e=this.offsetParent(),t=e.padding(),i=this.margin(),n={bottom:"",height:e.innerHeight()-t.vertical,left:"",right:"",top:"",width:e.innerWidth()-t.horizontal};switch(this.css("position")){case"absolute":case"fixed":n.height+=t.vertical,n.height-=i.vertical,n.width+=t.horizontal,n.width-=i.horizontal;break;case"relative":n.height-=i.vertical,n.width-=i.horizontal}return this.isAligned("right")?n.right=0:n.left=0,this.isAligned("bottom")?n.bottom=0:n.top=0,n}},{key:"_calculateMinimize",value:function(e){e=e||"";var t=this.clone();t.css({height:"auto",width:"auto"}),t.appendTo(this.parent());var i=t._calculateAlign(e);return i.height=t.outerHeight(),i.width=t.outerWidth(),t.remove(),i}},{key:"_display",value:function(){return this.hasClass("computing")||(this._previousDisplay=this.css("display"),"none"===this._previousDisplay&&(this.addClass("computing"),this.css({display:""}),this.hasClass("hidden")&&(this.removeClass("hidden"),this._previousClass="hidden"))),this}},{key:"_restoreDisplay",value:function(){return this.hasClass("computing")&&(this._previousClass&&this.addClass(this._previousClass),this.removeClass("computing"),this.css({display:this._previousDisplay}),this._previousDisplay=null,this._previousClass=null),this}},{key:"addClass",value:function(e){this.debug("addClass",e);for(var t=this.getClasses(),i=(e||"").split(" "),n=0;n<i.length;n+=1)t.indexOf(i[n])===-1&&t.push(i[n]);return this.node().className=t.join(" "),this}},{key:"addPositionClass",value:function(e,t){this.debug("addPositionClass",e,t);var i=function(e){return t?t+"-"+e:e};return this.removeClass([i("bottom"),i("center"),i("left"),i("right"),i("top")].join(" ")),e.indexOf("bottom")!==-1?this.addClass(i("bottom")):e.indexOf("top")!==-1?this.addClass(i("top")):this.addClass(i("center")),e.indexOf("left")!==-1?this.addClass(i("left")):e.indexOf("right")!==-1?this.addClass(i("right")):this.addClass(i("center")),this}},{key:"align",value:function(e){if(this.isInDOM()){var t=this.css("position");["absolute","fixed"].indexOf(t)!==-1&&(this.debug("align",e),this.css(this._calculateAlign(e)),this.addPositionClass(e,"aligned"),this.options.position=e,this.events.trigger("aligned",e))}return this}},{key:"alignInParent",value:function(){if(this.isInDOM()){this.debug("alignInParent");for(var e=["bottom","left","right","top"],t=this.position(),i=0;i<e.length;i+=1)this.css(e[i])||(t[e[i]]="");var n=this._calculateAvailablePosition();t=Cuic.constraintPosition(t,n),this.css(t)}return this}},{key:"alignInScreen",value:function(){if(this.isInDOM()){this.debug("alignInScreen");for(var e=["bottom","left","right","top"],t=this.position(),i=0;i<e.length;i+=1)this.css(e[i])||(t[e[i]]="");for(var n={minX:0,maxX:Cuic.element(window).width(),minY:0,maxY:Cuic.element(window).height()},o=this.positionOnScreen(),s=this.outerWidth(!0),a=this.outerHeight(!0),r=0;r<e.length;r+=1){var l=e[r],c=o[l];if("number"==typeof t[l])if(c<0)t[l]+=Math.abs(c);else if(["bottom","top"].indexOf(l)!==-1){if(c+a>n.maxY){var u=Math.abs(n.maxY-Math.abs(o[l])-a);t[l]-=u}}else if(["left","right"].indexOf(l)!==-1&&c+s>n.maxX){var h=Math.abs(n.maxX-Math.abs(o[l])-s);t[l]-=h}}this.css(t)}return this}},{key:"anchor",value:function(e,t,i){return this.isInDOM()&&(this.debug("anchor",e,t),t=Cuic.element(t||this.options.target),this.css(this._calculateAnchor(e,t,i)),this.addPositionClass(e,"anchored"),this.options.anchor=e,this.options.target=t,this.events.trigger("anchored",e)),this}},{key:"append",value:function(e){return this.debug("append",e),this.node().append(Cuic.node(e)),this}},{key:"appendTo",value:function(e){return this.debug("appendTo",e),Cuic.node(e).append(this.node()),this}},{key:"attr",value:function(e,t){var i=this.node();return void 0!==t?(e in i&&(i[e]=t),this):i[e]}},{key:"autoFit",value:function(){return this.alignInParent(),this.autoResize(),this}},{key:"autoResize",value:function(){if(this.isInDOM()){this.debug("autoResize");var e=this._calculateAvailableSpace(),t={height:this.outerHeight(),width:this.outerWidth()};t.width&&t.width>e.width&&(t.width=e.width),t.height&&t.height>e.height&&(t.height=e.height),this.css(t)}return this}},{key:"border",value:function(){var e=parseFloat(Cuic.getComputedStyle(this,"border-bottom-width")),t=parseFloat(Cuic.getComputedStyle(this,"border-left-width")),i=parseFloat(Cuic.getComputedStyle(this,"border-right-width")),n=parseFloat(Cuic.getComputedStyle(this,"border-top-width"));return{bottom:e,horizontal:t+i,left:t,right:i,top:n,vertical:e+n}}},{key:"children",value:function e(t){for(var e=[],i=this.node().children||this.node().childNodes,n=0;n<i.length;n+=1)Cuic.isNode(i[n])&&(t&&!i[n].matches(t)||e.push(i[n]));return new Cuic.Elements(e,this.node(),t)}},{key:"clone",value:function(){return this.debug("clone"),Cuic.element(this.node().cloneNode(!0))}},{key:"closest",value:function(e){this._display();var t=this.node().closest(e);return this._restoreDisplay(),t?Cuic.element(t):null}},{key:"css",value:function(e){var t=this.node();if(e){if("object"===("undefined"==typeof e?"undefined":_typeof(e))){this.debug("css",e),Cuic.autoPixel(e);for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];i in t.style||console.warn('Style "'+i+'" is not supported by element.',t),t.style[i]=n}return this}if("string"==typeof e){if(e.indexOf(":")!==-1)return this.debug("css",e),t.style=e,this;switch(e){case"display":case"position":return Cuic.getComputedStyle(t,e)}return t.style[e]}}return t.style}},{key:"data",value:function(e,t){this.debug("data",e,t);var i=this.node().dataset;return void 0!==t?(i[Cuic.toCamelCase(e)]=t,this):e?i[e]:i}},{key:"debug",value:function(){if(Cuic.options.debug||this.options.debug){var e=Array.prototype.slice.call(arguments);(console.debug||console.log).apply(this,e)}}},{key:"disable",value:function(){return this.debug("disable"),this.node().disabled=!0,this.addClass("disabled"),this.events.trigger("disabled"),this}},{key:"empty",value:function(){return this.debug("empty"),this.text(""),this}},{key:"enable",value:function(){return this.debug("enable"),this.node().disabled=!1,this.removeClass("disabled"),this.events.trigger("enabled"),this}},{key:"enterFullScreen",value:function(){var e=this.node();return e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen(),this}},{key:"find",value:function(e){var t=this.node(),i=t.querySelectorAll(e);return new Cuic.Elements(i,t,e)}},{key:"getClasses",value:function(){return this.node().className.split(" ")}},{key:"hasClass",value:function(e){for(var t=this.getClasses(),i=(e||"").split(" "),n=i.length>0,o=0;o<i.length;o+=1)if(t.indexOf(i[o])===-1){n=!1;break}return n}},{key:"hasParent",value:function(){return!!this.parentNode()}},{key:"height",value:function e(){var t=this.node(),e=void 0;return e=t instanceof Window?t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight:t.clientHeight-this.padding().vertical}},{key:"hide",value:function(){return this.debug("hide"),this.addClass("hidden"),this.events.trigger("hidden"),this}},{key:"html",value:function(e){return void 0!==e?(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))?Cuic.isNode(e)?(this.empty(),this.append(e)):e instanceof Cuic.Element?(this.empty(),this.append(e.node())):e instanceof jQuery&&(this.empty(),this.append(e.get(0))):this.node().innerHTML=e,this):this.node().innerHTML}},{key:"innerHeight",value:function(){var e=this.node(),t=void 0;return t=e instanceof Window?e.screen.height:e.clientHeight}},{key:"innerWidth",value:function(){var e=this.node(),t=void 0;return t=e instanceof Window?e.screen.width:e.clientWidth}},{key:"insertAfter",value:function(e){this.debug("insertAfter",e),e=Cuic.node(e);var t=this.node().parentNode;return t.insertBefore(e,this.node().nextSibling),this}},{key:"insertBefore",value:function(e){this.debug("insertBefore",e),e=Cuic.node(e);var t=this.node().parentNode;return t.insertBefore(e,this.node()),this}},{key:"isAbsolute",value:function(){return"absolute"===this.css("position")}},{key:"isAligned",value:function(e){var t=!1;if(this.options.position){var i=(e||"").split(" ");t=!0;for(var n=0;n<i.length;n+=1)if(this.options.position.indexOf(i[n])===-1){t=!1;break}}return t}},{key:"isAnchored",value:function(e){var t=!1;if(this.options.anchor){var i=(e||"").split(" ");t=!0;for(var n=0;n<i.length;n+=1)if(this.options.anchor.indexOf(i[n])===-1){t=!1;break}}return t}},{key:"isChildOf",value:function(e){e=Cuic.node(e);var t=this.node();do if(t=t.parentNode,t===e)return!0;while(t);return!1}},{key:"isDisabled",value:function(){return this.node().disabled||this.hasClass("disabled")}},{key:"isEnabled",value:function(){return this.node().disabled!==!0||!this.hasClass("disabled")}},{key:"isFixed",value:function(){return"fixed"===this.css("position")}},{key:"isHidden",value:function(){return this.hasClass("hidden")||"none"===this.css("display")}},{key:"isInDOM",value:function(){return document.body.contains(this.node())||!!this.offsetParent()}},{key:"isPosition",value:function(e){var t=this.position();return e.indexOf("center")!==-1?t.top==t.bottom||t.left==t.right:e.indexOf("bottom")!==-1?t.bottom<t.top:e.indexOf("top")!==-1?t.top<t.bottom:e.indexOf("left")!==-1?t.left<t.right:e.indexOf("right")!==-1&&t.right<t.left}},{key:"isRelative",value:function(){return"relative"===this.css("position")}},{key:"isRemoved",value:function(){var e=this.node().parentNode;return null===e||void 0===e}},{key:"isShown",value:function(){return!this.hasClass("hidden")&&"none"!==this.css("display")}},{key:"isStatic",value:function(){return"static"===this.css("position")}},{key:"margin",value:function(){var e=0,t=0,i=0,n=0;return this.node()instanceof Window||(e=parseFloat(Cuic.getComputedStyle(this,"margin-bottom")),t=parseFloat(Cuic.getComputedStyle(this,"margin-left")),i=parseFloat(Cuic.getComputedStyle(this,"margin-right")),n=parseFloat(Cuic.getComputedStyle(this,"margin-top"))),{bottom:e,horizontal:t+i,left:t,right:i,top:n,vertical:e+n}}},{key:"node",value:function(){return this.element}},{key:"off",value:function(e,t){return Cuic.off(e,this.node(),t),this}},{key:"offset",value:function e(){var t=this.node();this._display();var e={left:t.offsetLeft,top:t.offsetTop};return this._restoreDisplay(),e}},{key:"offsetParent",value:function(){var e=this.offsetParentNode();return e?Cuic.element(e):null}},{key:"offsetParentNode",value:function(){this._display();var e=this.node().offsetParent;return this._restoreDisplay(),e}},{key:"on",value:function(e,t){return Cuic.on(e,this.node(),t),this}},{key:"once",value:function(e,t){return Cuic.once(e,this.node(),t),this}},{key:"onAligned",value:function(e){return this.events.on("aligned",e),this}},{key:"onAnchored",value:function(e){return this.events.on("anchored",e),this}},{key:"onRemoved",value:function(e){return this.events.on("removed",e),this}},{key:"outerHeight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.node(),i=void 0;return i=t instanceof Window?t.screen.height:t.offsetHeight+(e?this.margin().vertical:0)}},{key:"outerWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.node(),i=void 0;return i=t instanceof Window?t.screen.width:t.offsetWidth+(e?this.margin().horizontal:0)}},{key:"padding",value:function(){var e=0,t=0,i=0,n=0;return this.node()instanceof Window||(e=parseFloat(Cuic.getComputedStyle(this,"padding-bottom")),t=parseFloat(Cuic.getComputedStyle(this,"padding-left")),i=parseFloat(Cuic.getComputedStyle(this,"padding-right")),n=parseFloat(Cuic.getComputedStyle(this,"padding-top"))),{bottom:e,horizontal:t+i,left:t,right:i,top:n,vertical:e+n}}},{key:"parent",value:function e(){var e=this.parentNode();return e?Cuic.element(e):null}},{key:"parentNode",value:function(){return this.node().parentNode}},{key:"position",value:function(){this._display();var e=parseFloat(Cuic.getComputedStyle(this,"bottom")),t=parseFloat(Cuic.getComputedStyle(this,"left")),i=parseFloat(Cuic.getComputedStyle(this,"right")),n=parseFloat(Cuic.getComputedStyle(this,"top"));return this._restoreDisplay(),{bottom:e,left:t,right:i,top:n}}},{key:"positionOnScreen",value:function(){return Cuic.extend({},this.node().getBoundingClientRect())}},{key:"prepend",value:function(e){return this.debug("prepend",e),this.node().prepend(Cuic.node(e)),this}},{key:"prependTo",
value:function(e){return this.debug("prependTo",e),Cuic.node(e).prepend(this.node()),this}},{key:"remove",value:function(){return this.debug("remove"),this.node().remove(),this.events.trigger("removed"),this}},{key:"removeClass",value:function(e){this.debug("removeClass",e);for(var t=this.getClasses(),i=(e||"").split(" "),n=0;n<i.length;n+=1){var o=t.indexOf(i[n]);o!==-1&&t.splice(o,1)}return this.node().className=t.join(" "),this}},{key:"show",value:function(){return this.debug("show"),this.css({display:""}),this.removeClass("hidden"),this.events.trigger("shown"),this}},{key:"text",value:function(e){return this.debug("text",e),void 0!==e?(this.node().innerText=e,this):this.node().innerText}},{key:"val",value:function(e){return this.debug("val",e),void 0!==e?(this.node().value=e,this):this.node().value}},{key:"width",value:function e(){var t=this.node(),e=void 0;return e=t instanceof Window?t.innerWidth||document.documentElement.clientWidth||document.body.clientWidth:t.clientWidth-this.padding().horizontal}}]),e}(),Cuic.Element.prototype.options={className:null,css:null,debug:!1,namespace:null,parent:null},Cuic.Component=function(e){function t(e,i,n){_classCallCheck(this,t),n=Cuic.extend({},Cuic.Component.prototype.options,n);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,n));return o.addClass("component"),o.options.closable&&o.addClass("closable"),void 0!==o.options.opened&&(o.options.opened?o.open():(o.hide(),o.close())),o.hasParent()&&(o.options.maximized&&o.maximize(),o.options.maximizedX&&o.maximizeX(),o.options.maximizedY&&o.maximizeY()),o}return _inherits(t,e),_createClass(t,[{key:"close",value:function(e){var t=this;return this.debug("close"),this.events.trigger("close"),this.removeClass("opened"),this.addClass("closed"),this.once("transitionend",function(i){t.isOpened()||(t.debug("closed"),t.events.trigger("closed",i),t.hide(),"function"==typeof e&&e.call(t,i))}),this}},{key:"isMaximized",value:function(){return this.hasClass("maximized")||this.hasClass("maximized-x maximized-y")||"100%"===this.css("width")&&"100%"===this.css("height")}},{key:"isMaximizedX",value:function(){return this.hasClass("maximized-x")||"100%"===this.css("width")}},{key:"isMaximizedY",value:function(){return this.hasClass("maximized-y")||"100%"===this.css("height")}},{key:"isMinimized",value:function(){return this.hasClass("minimized")}},{key:"isOpened",value:function(){return this.hasClass("opened")}},{key:"maximize",value:function(e){var t=this;return this.debug("maximize"),this.events.trigger("maximize"),this.removeClass("minimized"),this.addClass("maximized"),this.css(this._calculateMaximize()),this.once("transitionend",function(i){t.isMaximized()&&(t.debug("maximized"),t.events.trigger("maximized",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"maximizeX",value:function(e){var t=this;this.debug("maximizeX"),this.events.trigger("maximizeX"),this.removeClass("minimized"),this.addClass("maximized-x");var i=this._calculateMaximize();return this.css({width:i.width,left:i.left,right:i.right}),this.once("transitionend",function(i){t.isMaximizedX()&&(t.debug("maximizedX"),t.events.trigger("maximizedX",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"maximizeY",value:function(e){var t=this;this.debug("maximizeY"),this.events.trigger("maximizeY"),this.removeClass("minimized"),this.addClass("maximized-y");var i=this._calculateMaximize();return this.css({height:i.height,top:i.top,bottom:i.bottom}),this.once("transitionend",function(i){t.isMaximizedY()&&(t.debug("maximizedY"),t.events.trigger("maximizedY",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"minimize",value:function(e){var t=this;return this.debug("minimize"),this.events.trigger("minimize"),this.removeClass("maximized maximized-x maximized-y"),this.addClass("minimized"),this.css(this._calculateMinimize(this.options.position)),this.once("transitionend",function(i){t.isMinimized()&&(t.debug("minimized"),t.events.trigger("minimized",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"onClose",value:function(e){this.events.on("close",e)}},{key:"onClosed",value:function(e){this.events.on("closed",e)}},{key:"onMaximize",value:function(e){this.events.on("maximize",e)}},{key:"onMaximized",value:function(e){this.events.on("maximized",e)}},{key:"onMinimize",value:function(e){this.events.on("minimize",e)}},{key:"onMinimized",value:function(e){this.events.on("minimized",e)}},{key:"onOpen",value:function(e){this.events.on("open",e)}},{key:"onOpened",value:function(e){this.events.on("opened",e)}},{key:"open",value:function(e){var t=this;return this.debug("open"),this.show(),this.events.trigger("open"),this.removeClass("closed"),this.addClass("opened"),this.once("transitionend",function(i){t.isOpened()&&(t.debug("opened"),t.events.trigger("opened",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"toggle",value:function(e){return this.isOpened()?this.close(e):this.open(e),this}}]),t}(Cuic.Element),Cuic.Component.prototype.options={opened:!0,maximized:!1,maximizedX:!1,maximizedY:!1},Cuic.Group=function(e){function t(e,i,n){_classCallCheck(this,t),n=Cuic.extend({},Cuic.Group.prototype.options,n);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Cuic.extend({className:n.className,role:"group"},i),n));return o.addClass("component-group"),o.components=new Cuic.Collection,o}return _inherits(t,e),_createClass(t,[{key:"addComponent",value:function(e){if(!(e instanceof Cuic.Element))throw new TypeError("Cannot add object to the group.");return this.events.trigger("addComponent",e),this.isAligned("top")?e.prependTo(this):e.appendTo(this),this.components.add(e),this}},{key:"onAddComponent",value:function(e){return this.events.on("addComponent",e),this}},{key:"onComponentAdded",value:function(e){return this.components.onAdded(e),this}},{key:"onComponentRemoved",value:function(e){return this.components.onRemoved(e),this}},{key:"onRemoveComponent",value:function(e){return this.events.on("removeComponent",e),this}},{key:"removeComponent",value:function(e){return this.events.trigger("removeComponent",e),this.components.remove(e),this}}]),t}(Cuic.Component),Cuic.Group.prototype.options={namespace:"group"},Cuic.Elements=function(){function e(t,i,n){_classCallCheck(this,e);var o=void 0;for(o=0;o<t.length;o+=1)t.hasOwnProperty(o)&&(this[o]=Cuic.element(t[o]));this.length=o,this.context=i,this.selector=n}return _createClass(e,[{key:"addClass",value:function(e){return this.each(function(t){t.addClass(e)})}},{key:"align",value:function(e){return this.each(function(t){t.align(e)})}},{key:"anchor",value:function(e,t){return this.each(function(i){i.anchor(e,t)})}},{key:"attr",value:function(e,t){return this.each(function(i){i.attr(e,t)})}},{key:"css",value:function(e){return this.each(function(t){t.css(e)})}},{key:"each",value:function(e){for(var t=0;t<this.length;t+=1)e.call(this[t],this[t],this);return this}},{key:"empty",value:function(){return this.each(function(e){e.empty()})}},{key:"eq",value:function(e){return this[e]}},{key:"filter",value:function(e){var t=[];return"string"==typeof e&&this.each(function(i){i.node().matches(e)&&t.push(i)}),new Cuic.Elements(t,this.context,e)}},{key:"find",value:function(e){var t=[];return"string"==typeof e&&this.each(function(i){i.find(e).each(function(e){t.push(e)})}),new Cuic.Elements(t,this.context,e)}},{key:"first",value:function(){return this.length?this[0]:null}},{key:"get",value:function(e){return this[e].node()}},{key:"hide",value:function(){return this.each(function(e){e.hide()})}},{key:"html",value:function(e){return this.each(function(t){t.html(e)})}},{key:"index",value:function(e){for(var t=0;t<this.length;t+=1)if(this.eq(t)===e||this.get(t)===e)return t;return-1}},{key:"last",value:function(){return this.length?this[this.length-1]:null}},{key:"not",value:function(e){var t=[];return"string"==typeof e&&this.each(function(i){i.node().matches(e)||t.push(i)}),new Cuic.Elements(t,this.context)}},{key:"remove",value:function(){return this.each(function(e){e.remove()})}},{key:"removeClass",value:function(e){return this.each(function(t){t.removeClass(e)})}},{key:"show",value:function(){return this.each(function(e){e.show()})}},{key:"toggleClass",value:function(e){return this.each(function(t){t.toggleClass(e)})}},{key:"val",value:function(e){return this.each(function(t){t.val(e)})}}]),e}(),Cuic.Hook=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Hook.prototype.options,e);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));i.addClass("hook"),i.css({position:"relative",top:"",width:""}),i.space=new Cuic.Element("div",{className:"hook-space"});var n=i.offset(),o=function(){var e=i.outerHeight(!0)<=window.screen.availHeight;if(e)if(i.options.fixed)i.hook();else{var t=i.margin();window.scrollY>n.top-t.top?i.hook():i.unhook()}else i.unhook()};return o(),window.onscroll=function(){o()},window.onresize=function(){o()},i}return _inherits(t,e),_createClass(t,[{key:"hook",value:function(){if(console.log("hook"),"fixed"!==this.css("position")){var e=this.offset(),t=this.margin();this.options.fixed&&(this.options.offsetTop=e.top),this.space.css({display:this.css("display"),float:this.css("float"),height:this.outerHeight(),width:this.outerWidth(),"margin-bottom":t.bottom,"margin-left":t.left,"margin-right":t.right,"margin-top":t.top}),this.insertBefore(this.space),this.space.show(),this.css({position:"fixed",left:e.left,top:this.options.offsetTop,height:this.space.height(),width:this.space.width(),zIndex:this.options.zIndex}),this.addClass("hooked"),this.onHook(this)}}},{key:"isHooked",value:function(){return this.hasClass("hooked")}},{key:"onHook",value:function(){}},{key:"onUnhook",value:function(){}},{key:"unhook",value:function(){console.log("unhook"),"relative"!==this.css("position")&&(this.space.hide(),this.css({position:"relative",bottom:"",left:"",right:"",top:"",width:""}),this.removeClass("hooked"),this.onUnhook(this))}}]),t}(Cuic.Element),Cuic.Hook.prototype.options={fixed:!0,hookedClass:"hooked",zIndex:4},Cuic.Movable=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Movable.prototype.options,e);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));return i.addClass("movable"),"static"===i.css("position")&&i.css({position:"relative"}),i.handles=new Cuic.Collection,i.addMoveHandle(e.handle||i.node()),i}return _inherits(t,e),_createClass(t,[{key:"addMoveHandle",value:function(e){var t=this;return e=Cuic.element(e),this.handles.add(e),e.addClass("movable-handle"),Cuic.on("mousedown",e,function(e){if((!t.options.rootOnly||e.target===e.currentTarget)&&t.events.trigger("moveStart",e)!==!1){e.preventDefault(),t.addClass("moving");var i=t.position(),n=e.clientX,o=e.clientY,s=function(e){if(t.events.trigger("move",e)!==!1){var s={};if(t.options.horizontal){var a=e.clientX-n;s.left=i.left+a,s.right=""}if(t.options.vertical){var r=e.clientY-o;s.top=i.top+r,s.bottom=""}if(t.options.constraintToParent){var l=t._calculateAvailablePosition();s=Cuic.constraintPosition(s,l),t.alignInParent()}t.css(s)}};Cuic.on("mousemove",document,s),Cuic.once("mouseup",document,function(e){Cuic.off("mousemove",document,s),t.removeClass("moving"),t.events.trigger("moveEnd",e)})}}),this}},{key:"onMove",value:function(e){return this.events.on("move",e),this}},{key:"onMoveEnd",value:function(e){return this.events.on("moveEnd",e),this}},{key:"onMoveStart",value:function(e){return this.events.on("moveStart",e),this}}]),t}(Cuic.Element),Cuic.Movable.prototype.options={handle:null,handleClassName:"movable-handle",constraintToParent:!0,horizontal:!0,namespace:"movable",rootOnly:!0,vertical:!0},Cuic.Resizable=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Resizable.prototype.options,e);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));return i.addClass("resizable"),"static"===i.css("position")&&i.css("position","relative"),i.bottomHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-s",css:{height:e.handleSize}}).appendTo(i),i.rightHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-e",css:{width:e.handleSize}}).appendTo(i),i.bottomRightHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-se",css:{height:e.handleSize,width:e.handleSize}}).appendTo(i),i.handles=new Cuic.Collection([i.rightHandle,i.bottomHandle,i.bottomRightHandle]),i.horizontalHandles=new Cuic.Collection([i.rightHandle,i.bottomRightHandle]),i.verticalHandles=new Cuic.Collection([i.bottomHandle,i.bottomRightHandle]),i.handles.each(function(e){e.on("mousedown",function(e){if(i.events.trigger("resizeStart",e)!==!1){e.preventDefault(),i.addClass("resizing");var t=e.clientX,n=e.clientY,o=i.outerHeight(),s=i.outerWidth(),a=e.currentTarget,r=o/s,l=function(e){if(i.events.trigger("resize",e)!==!1){var l={};if(i.options.horizontal)for(var c=0;c<i.horizontalHandles.length;c+=1)if(i.horizontalHandles.get(c).node()===a){var u=e.clientX-t,h=s+u;(!Number(i.options.maxWidth)||h<=i.options.maxWidth)&&(!Number(i.options.minWidth)||h>=i.options.minWidth)&&(l.width=h);break}if(i.options.vertical)for(var d=0;d<i.verticalHandles.length;d+=1)if(i.verticalHandles.get(d).node()===a){var p=e.clientY-n,f=o+p;(!Number(i.options.maxHeight)||f<=i.options.maxHeight)&&(!Number(i.options.minHeight)||f>=i.options.minHeight)&&(l.height=f);break}i.options.keepRatio&&(l.height?l.width=l.height/r:l.width&&(l.height=l.width*r)),i.css(l),i.autoResize()}};Cuic.on("mousemove",document,l),Cuic.once("mouseup",document,function(e){Cuic.off("mousemove",document,l),i.removeClass("resizing"),i.events.trigger("resizeEnd",e)})}})}),i}return _inherits(t,e),_createClass(t,[{key:"onResize",value:function(e){return this.events.on("resize",e),this}},{key:"onResizeEnd",value:function(e){return this.events.on("resizeEnd",e),this}},{key:"onResizeStart",value:function(e){return this.events.on("resizeStart",e),this}}]),t}(Cuic.Element),Cuic.Resizable.prototype.options={handleSize:10,horizontal:!0,keepRatio:!1,maxHeight:null,maxWidth:null,minHeight:1,minWidth:1,namespace:"resizable",vertical:!0},Cuic.Selectable=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Selectable.prototype.options,e);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));return i.addClass("selectable"),i.options.selected&&i.addClass("selected"),i.on("click",function(){i.hasClass("selected")?i.deselect():i.select()}),i}return _inherits(t,e),_createClass(t,[{key:"deselect",value:function(e){var t=this;return this.removeClass("selected"),this.once("transitionend",function(i){t.isSelected()||(t.events.trigger("deselected",i),"function"==typeof e&&e.call(t,i))}),this}},{key:"isSelected",value:function(){return(this.hasClass("selected")||this.attr("selected"))===!0}},{key:"onDeselected",value:function(e){return this.events.on("deselected",e),this}},{key:"onSelected",value:function(e){return this.events.on("selected",e),this}},{key:"select",value:function(e){var t=this;return this.addClass("selected"),this.once("transitionend",function(i){t.isSelected()&&(t.events.trigger("selected",i),"function"==typeof e&&e.call(t,i))}),this}}]),t}(Cuic.Element),Cuic.Selectable.prototype.options={namespace:"selectable"},Cuic.Button=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Button.prototype.options,e,{mainClass:"btn"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"button",{className:e.className,disabled:!1,html:e.label,title:e.title,type:e.type},e));return"number"==typeof e.shortcut&&(i.shortcut=new Cuic.Shortcut({keyCode:e.shortcut,target:i.element,callback:function(){this.node().click()}})),i}return _inherits(t,e),t}(Cuic.Component),Cuic.Button.prototype.options={className:"btn-default",disabled:!1,shortcut:null,title:null,type:"button"},Cuic.Dialog=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Dialog.prototype.options,e,{mainClass:"dialog"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className,role:"dialog"},e));if(i.parentNode()===document.body&&i.css({position:"absolute"}),i.fader=new Cuic.Fader({className:"fader dialog-fader",autoClose:!1,autoRemove:!1,opened:!1}).appendTo(i.options.parent),i.header=new Cuic.Element("header",{className:"dialog-header",css:{display:null!=i.options.title?"block":"none"}}).appendTo(i),i.title=new Cuic.Element("h3",{className:"dialog-title",html:i.options.title}).appendTo(i.header),i.content=new Cuic.Element("section",{className:"dialog-content",html:i.options.content}).appendTo(i),i.footer=new Cuic.Element("footer",{className:"dialog-footer",css:{display:null!=i.options.buttons?"block":"none"}}).appendTo(i),i.buttons=new Cuic.Group("div",{className:"btn-group"}).appendTo(i.footer),i.closeButton=new Cuic.Element("span",{className:i.options.closeButtonClass,html:i.options.closeButton,role:"button"}).addClass("btn-close").appendTo(i.header),i.buttons.onComponentAdded(function(){i.buttons.components.length>0&&i.footer.show()}),i.buttons.onComponentRemoved(function(){i.buttons.components.length<1&&i.footer.hide()}),i.options.buttons instanceof Array)for(var n=0;n<i.options.buttons.length;n+=1)i.addButton(i.options.buttons[n]);return parseFloat(e.contentHeight)>0&&i.content.css({height:e.contentHeight}),parseFloat(e.contentWidth)>0&&i.content.css({width:e.contentWidth}),i.options.movable&&(i.movable=new Cuic.Movable({constraintToParent:!0,enabled:i.options.movable,element:i.node(),handle:i.title,rootOnly:!1})),i.options.resizable&&(i.resizable=new Cuic.Resizable({enabled:i.options.resizable,element:i.node()})),i.shortcuts={close:new Cuic.Shortcut({element:i,keyCode:Cuic.keys.ESC,callback:function(){i.close()}})},i.fader.on("click",function(){i.options.autoClose&&i.close()}),i.on("click",function(e){Cuic.element(e.target).hasClass("btn-close")&&(e.preventDefault(),i.close())}),i.onClose(function(){i.fader.options.autoRemove=i.options.autoRemove,i.fader.close()}),i.onClosed(function(){i.options.autoRemove&&(i.remove(),i.fader.remove())}),i.onOpen(function(){var e=Math.max(i.options.zIndex,Cuic.dialogs.getCurrentZIndex()+1);i.css({"z-index":e}),i.resizeContent(),i.options.modal&&(i.css({"z-index":e+1}),i.fader.css({"z-index":e}),i.fader.open()),i.options.maximized?i.maximize():i.align(i.options.position);var t=i.buttons.children();t.length>0&&t.last().node().focus()}),i.onOpened(function(e){i.find("img")}),i.onRemoved(function(){Cuic.dialogs.remove(i)}),Cuic.dialogs.add(i),i}return _inherits(t,e),_createClass(t,[{key:"addButton",value:function(e){var t=this;return e instanceof Cuic.Button||!function(){var i=e.callback;e=new Cuic.Button({className:"btn btn-default",label:e.label}),"function"==typeof i?e.on("click",function(e){i.call(t,e)}):"close"===i&&e.on("click",function(){t.close()})}(),this.buttons.addComponent(e),e}},{key:"getBody",value:function(){return this.content}},{key:"getContent",value:function(){return this.content}},{key:"getFooter",value:function(){return this.footer}},{key:"getHeader",value:function(){return this.header}},{key:"resizeContent",value:function(){var e=this._calculateAvailableSpace();this.css({"max-height":e.height});var t=e.height;return this.header instanceof Cuic.Element&&(t-=this.header.outerHeight(!0)),this.footer instanceof Cuic.Element&&(t-=this.footer.outerHeight(!0)),t-=this.content.margin().vertical,this.content.css({"max-height":t}),this}},{key:"setContent",value:function(e){return this.content.html(e),this}},{key:"setFooter",value:function(e){return this.footer.html(e),this}},{key:"setTitle",value:function(e){return this.title.html(e),this}}]),t}(Cuic.Component),Cuic.Dialog.prototype.options={autoClose:!1,autoRemove:!0,autoResize:!0,buttons:[],closable:!0,closeButton:null,closeButtonClass:"glyphicon glyphicon-remove-sign",content:null,contentHeight:null,contentWidth:null,movable:!0,maximized:!1,modal:!0,namespace:"dialog",opened:!1,parent:document.body,position:"center",resizable:!1,title:null,zIndex:10},Cuic.dialogs=new Cuic.Collection,Cuic.dialogs.getCurrentZIndex=function(){var e=0;return Cuic.dialogs.each(function(t){var i=parseInt(t.css("z-index"));i>e&&(e=i)}),e},Cuic.onWindowResized(function(){Cuic.dialogs.each(function(e){e.resizeContent()})}),Cuic.Fader=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Fader.prototype.options,e,{mainClass:"fader"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));return i.on("click",function(){i.options.autoClose&&i.close()}),i.onClosed(function(){i.options.autoRemove&&i.remove()}),i}return _inherits(t,e),t}(Cuic.Component),Cuic.Fader.prototype.options={autoClose:!1,autoRemove:!1,namespace:"fader",opened:!1,zIndex:1},function(e){var t=0;Cuic.Grid=function(i){var n=this;i=Cuic.extend(!0,Cuic.Grid.prototype.options,i),n.animSpeed=parseInt(i.animSpeed),n.autoResize=i.autoResize===!0,n.colsWidth=parseFloat(i.colsWidth),n.editable=i.editable===!0,n.fps=parseInt(i.fps),n.maxCols=parseInt(i.maxCols),n.maxRows=parseInt(i.maxRows),n.minCols=parseInt(i.minCols),n.minRows=parseInt(i.minRows),n.rowsHeight=parseFloat(i.rowsHeight),n.spacing=parseFloat(i.spacing),n.widgets={},n.element=e(i.target),n.element.css({display:"block",minHeight:i.height,minWidth:i.width}),n.resize(i.cols,i.rows),new Cuic.Resizable({target:n.element}).onResizeEnd(function(){var e=n.getSizeX(n.element.outerWidth()),t=n.getSizeY(n.element.outerHeight());n.maxCols=e,n.maxRows=t,n.maximize()}),n.preview=e("<div>",{class:"preview",css:{"box-sizing":"border-box",height:n.rowsHeight,left:n.spacing,position:"absolute",top:n.spacing,width:n.colsWidth,zIndex:1}}),n.element.children(i.widgetSelector).each(function(){var e=this.id||"widget-"+(t+=1);n.addWidget(e,new Cuic.Grid.Widget({target:this}))}),n.autoResize&&n.minimize()},Cuic.Grid.prototype.addWidget=function(e,t){var i=this,n=t.element,o=i.preview;i.removeWidget(e),i.widgets[e]=t,i.element.append(t.element),t.element.attr("id",e),t.element.css({"box-sizing":"border-box",display:"block",margin:0,overflow:"hidden",position:"absolute"}),i.moveWidget(t,t.col,t.row),i.resizeWidget(t,t.sizeX,t.sizeY),t.col-1+t.sizeX>i.cols&&i.resize(t.col-1+t.sizeX,t.sizeY),t.row-1+t.sizeY>i.rows&&i.resize(t.sizeX,t.row-1+t.sizeY);var s,a,r=new Cuic.Resizable({target:t.element,container:i.element});r.onResize=function(){var e=n.outerHeight(),s=n.outerWidth(),a=Math.round(s/(i.colsWidth+i.spacing)),r=Math.round(e/(i.rowsHeight+i.spacing));a+t.col-1>i.maxCols?a=i.maxCols-(t.col-1):a<t.minSizeX&&(a=t.minSizeX),r+t.row-1>i.maxRows?r=i.maxRows-(t.row-1):r<t.minSizeY&&(r=t.minSizeY),o.css({height:i.calculateHeight(r),width:i.calculateWidth(a)})},r.onResizeStart=function(){return!(!i.editable||!t.resizable||t.isDragging())&&(s=n.outerHeight(),a=n.outerWidth(),n.css({zIndex:2}),i.element.append(o.css({left:n.css("left"),height:s,top:n.css("top"),width:a})),i.autoResize&&i.maximize(),!0)},r.onResizeEnd(function(){o.detach();var e=i.getSizeX(o.outerWidth()),n=i.getSizeY(o.outerHeight());i.resizeWidget(t,e,n),i.autoResize&&i.minimize()});var l=new Cuic.Movable({target:t.element,rootOnly:!0,container:i.element});return l.onMove=function(){var e=parseFloat(n.css("left")),s=parseFloat(n.css("top")),a=i.getPositionX(e),r=i.getPositionY(s);a>0&&a+t.sizeX<=i.cols+1&&r>0&&r+t.sizeY<=i.rows+1||(a=t.col,r=t.row),o.css({left:i.calculateLeft(a),top:i.calculateTop(r)})},l.onMoveStart=function(e){return!(!i.editable||!t.movable||t.isResizing())&&(s=n.outerHeight(),a=n.outerWidth(),n.css({zIndex:2}),i.element.append(o.css({left:n.css("left"),height:s,top:n.css("top"),width:a})),i.autoResize&&i.maximize(),!0)},l.onMoveEnd=function(){o.detach();var e=parseFloat(n.css("left")),s=parseFloat(n.css("top")),a=i.getSizeX(e)+1,r=i.getSizeY(s)+1;i.moveWidget(t,a,r),i.autoResize&&i.minimize()},t},Cuic.Grid.prototype.calculateHeight=function(e){return parseInt(e)*(this.rowsHeight+this.spacing)-this.spacing},Cuic.Grid.prototype.calculateLeft=function(e){return parseInt(e)*(this.colsWidth+this.spacing)-this.colsWidth},Cuic.Grid.prototype.calculateTop=function(e){return parseInt(e)*(this.rowsHeight+this.spacing)-this.rowsHeight},Cuic.Grid.prototype.calculateWidth=function(e){return parseInt(e)*(this.colsWidth+this.spacing)-this.spacing},Cuic.Grid.prototype.clear=function(){for(var e in this.widgets)this.widgets.hasOwnProperty(e)&&this.removeWidget(e);return this},Cuic.Grid.prototype.getPosition=function(e,t){return[this.getPositionX(e),this.getPositionY(t)]},Cuic.Grid.prototype.getPositionX=function(e){return Math.round(parseFloat(e)/(this.colsWidth+this.spacing))+1},Cuic.Grid.prototype.getPositionY=function(e){return Math.round(parseFloat(e)/(this.rowsHeight+this.spacing))+1},Cuic.Grid.prototype.getSize=function(e,t){return[this.getSizeX(e),this.getSizeY(t)]},Cuic.Grid.prototype.getSizeX=function(e){return Math.round(parseFloat(e)/(this.colsWidth+this.spacing))},Cuic.Grid.prototype.getSizeY=function(e){return Math.round(parseFloat(e)/(this.rowsHeight+this.spacing))},Cuic.Grid.prototype.getWidget=function(e){return this.widgets[e]},Cuic.Grid.prototype.maximize=function(){return this.resize(this.maxCols,this.maxRows)},Cuic.Grid.prototype.minimize=function(){var e=this.minCols||1,t=this.minRows||1;for(var i in this.widgets)if(this.widgets.hasOwnProperty(i)){var n=this.widgets[i];n.col+n.sizeX-1>e&&(e=n.col+n.sizeX-1),n.row+n.sizeY-1>t&&(t=n.row+n.sizeY-1)}return this.resize(e,t)},Cuic.Grid.prototype.moveWidget=function(e,t,i){var n=this;return t>0&&t-1+e.sizeX<=n.cols&&i>0&&i-1+e.sizeY<=n.rows||(t=e.col,i=e.row),t>0&&i>0&&(e.col=t,e.row=i,e.element.css({zIndex:2}),e.element.animate({left:n.calculateLeft(t),top:n.calculateTop(i)},{complete:function(){e.element.removeClass("dragging"),e.element.css({zIndex:1}),"function"==typeof n.onWidgetMoved&&n.onWidgetMoved.call(n,e)},duration:n.animSpeed,queue:!1})),n},Cuic.Grid.prototype.removeWidget=function(t){var i=this.widgets[t];return i&&(delete this.widgets[t],i.element.stop(!0,!1).animate({height:0,width:0},{complete:function(){e(this).remove()},duration:this.animSpeed,queue:!1})),i},Cuic.Grid.prototype.resize=function(e,t){return e=parseInt(e),t=parseInt(t),e<1&&(e=1),t<1&&(t=1),e>0&&e<=this.maxCols&&t>0&&t<=this.maxRows&&(this.cols=e,this.rows=t,this.element.stop(!0,!1).animate({height:this.calculateHeight(t)+2*this.spacing,width:this.calculateWidth(e)+2*this.spacing},{duration:this.animSpeed,queue:!1})),this},Cuic.Grid.prototype.resizeWidget=function(e,t,i){var n=this;return t=parseInt(t),i=parseInt(i),t<e.minSizeX&&(t=e.minSizeX),i<e.minSizeY&&(i=e.minSizeY),(!n.maxSizeX||t<=n.maxSizeX)&&(!n.maxSizeY||i>=n.maxSizeY)&&(e.sizeX=t,e.sizeY=i,e.element.css({zIndex:2}),e.element.animate({height:i*(n.rowsHeight+n.spacing)-n.spacing,width:t*(n.colsWidth+n.spacing)-n.spacing},{complete:function(){e.element.removeClass("resizing"),e.element.css({zIndex:1}),"function"==typeof n.onWidgetResized&&n.onWidgetResized.call(n,e)},duration:n.animSpeed,queue:!1})),n},Cuic.Grid.prototype.onWidgetMoved=null,Cuic.Grid.prototype.onWidgetResized=null,Cuic.Grid.prototype.options={animSpeed:200,autoResize:!0,cols:null,colsWidth:100,editable:!0,fps:30,maxCols:null,maxRows:null,minCols:null,minRows:null,rows:null,rowsHeight:100,spacing:10,widgetSelector:".widget"},Cuic.Grid.Widget=function(t){var i=this;t=Cuic.extend(!0,{},Cuic.Grid.Widget.prototype.options,t),i.col=parseInt(t.col),i.movable=t.movable===!0,i.resizable=t.resizable===!0,i.row=parseInt(t.row),i.maxSizeX=parseInt(t.maxSizeX),i.maxSizeY=parseInt(t.maxSizeY),i.minSizeX=parseInt(t.minSizeX),i.minSizeY=parseInt(t.minSizeY),i.sizeX=parseInt(t.sizeX),i.sizeY=parseInt(t.sizeY),t.target&&(i.element=e(t.target),i.element.length>0&&(i.col=parseInt(i.element.attr("data-col"))||t.col,i.movable=i.element.attr("data-movable")?/^true$/gi.test(i.element.attr("data-movable")):t.movable,i.maxSizeX=parseInt(i.element.attr("data-max-size-x"))||t.maxSizeX,i.maxSizeY=parseInt(i.element.attr("data-max-size-y"))||t.maxSizeY,i.minSizeX=parseInt(i.element.attr("data-min-size-x"))||t.minSizeX,i.minSizeY=parseInt(i.element.attr("data-min-size-y"))||t.minSizeY,i.resizable=i.element.attr("data-resizable")?/^true$/gi.test(i.element.attr("data-resizable")):t.resizable,i.row=parseInt(i.element.attr("data-row"))||t.row,i.sizeX=parseInt(i.element.attr("data-size-x"))||t.sizeX,i.sizeY=parseInt(i.element.attr("data-size-y"))||t.sizeY)),(!i.element||i.element.length<1)&&(i.element=e("<div>",{html:t.content})),i.element.addClass("widget")},Cuic.Grid.Widget.prototype.isDragging=function(){return this.element.hasClass("dragging")},Cuic.Grid.Widget.prototype.isResizing=function(){return this.element.hasClass("resizing")},Cuic.Grid.Widget.prototype.options={col:1,content:null,movable:!0,maxSizeX:null,maxSizeY:null,minSizeX:1,minSizeY:1,resizable:!0,row:1,sizeX:1,sizeY:1,target:null}}(jQuery),Cuic.Notification=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Notification.prototype.options,e,{mainClass:"notification"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));return i.closeTimer=null,i.content=new Cuic.Element("div",{className:"notification-content",html:e.content}).appendTo(i),i.closeButton=new Cuic.Element("span",{className:i.options.closeButtonClass,html:i.options.closeButton,role:"button"}).addClass("btn-close").appendTo(i),i.on("mouseenter",function(e){clearTimeout(i.closeTimer)}),i.on("mouseleave",function(e){e.currentTarget===i.node()&&i.autoClose()}),i.on("click",function(e){Cuic.element(e.target).hasClass("btn-close")&&(e.preventDefault(),i.close())}),i.onClosed(function(){i.options.autoRemove&&i.remove()}),i.onOpen(function(){i.options.position&&i.align(i.options.position)}),i.onOpened(function(){i.autoClose()}),i.onRemoved(function(){Cuic.notifications.remove(i)}),Cuic.notifications.add(i),i}return _inherits(t,e),_createClass(t,[{key:"autoClose",value:function(){var e=this;clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){e.options.autoClose&&e.close()},this.options.duration)}},{key:"setContent",value:function(e){return this.content.html(e),this}}]),t}(Cuic.Component),Cuic.Notification.prototype.options={autoClose:!0,autoRemove:!0,closable:!0,closeButton:null,closeButtonClass:"glyphicon glyphicon-remove-sign",content:null,duration:2e3,namespace:"notification",opened:!1,parent:document.body,position:"center",zIndex:10},Cuic.notifications=new Cuic.Collection,Cuic.NotificationStack=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.NotificationStack.prototype.options,e,{mainClass:"notification-stack"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));return i.options.position&&i.align(i.options.position),i.onComponentAdded(function(e){e instanceof Cuic.Notification&&setTimeout(function(){e.open()},10)}),i.onComponentRemoved(function(e){e instanceof Cuic.Notification&&e.close()}),i}return _inherits(t,e),t}(Cuic.Group),Cuic.NotificationStack.prototype.options={namespace:"notification-stack",position:"right top",zIndex:10},Cuic.Panel=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Panel.prototype.options,e,{mainClass:"panel"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));e.element?(i.header=i.find(".panel-header").eq(0),i.title=i.find(".panel-title").eq(0),i.content=i.find(".panel-content").eq(0),i.footer=i.find(".panel-footer").eq(0),i.closeButton=i.find(".panel-header .btn-close").eq(0)):(i.header=new Cuic.Element("header",{className:"panel-header"
}).prependTo(i),i.title=new Cuic.Element("h5",{className:"panel-title",html:e.title}).appendTo(i.header),i.closeButton=new Cuic.Element("span",{className:i.options.closeButtonClass,html:i.options.closeButton,role:"button"}).addClass("btn-close").appendTo(i.header),i.content=new Cuic.Element("section",{className:"panel-content",html:e.content}).appendTo(i),i.footer=new Cuic.Element("footer",{className:"panel-footer",html:e.footer}).appendTo(i),e.title||i.header.hide(),e.footer||i.footer.hide()),i.isOpened()&&(i.align(i.options.position),i.resizeContent()),i.hasParent()&&i.parent().css({overflow:"hidden"}),i.on("click",function(e){Cuic.element(e.target).hasClass("btn-close")&&(e.preventDefault(),i.close()),Cuic.element(e.target).hasClass("btn-toggle")&&(e.preventDefault(),i.toggle())}),i.onClose(function(){var e=i.outerHeight(!0),t=i.outerWidth(!0),n={};i.isAligned("left")?(n.left=-t,n.right=""):i.isAligned("right")&&(n.right=-t,n.left=""),i.isAligned("bottom")?(n.bottom=-e,n.top=""):i.isAligned("top")&&(n.top=-e,n.bottom=""),void 0===n.left&&void 0===n.right&&void 0===n.bottom&&void 0===n.top,i.css(n)});var n=function(e){i.isOpened()&&i.options.autoClose&&(e.target===i.node()||Cuic.element(e.target).isChildOf(i)||i.close())};return i.onClosed(function(){Cuic.off("click",document,n)}),i.onMinimize(function(){var e=i.clone();e.css({height:"auto",width:"auto"}),e.appendTo(i.parent());var t=e._calculateAlign(i.options.position);t.height=e.height(),t.width=e.width(),e.remove(),i.isOpened()||(i.isPosition("left")?(t.left=-i.outerWidth(!0),t.right=""):i.isPosition("right")&&(t.right=-i.outerWidth(!0),t.left=""),i.isPosition("bottom")?(t.bottom=-i.outerHeight(!0),t.top=""):i.isPosition("top")&&(t.top=-i.outerHeight(!0),t.bottom="")),i.css(t)}),i.onOpen(function(){i.resizeContent(),i.align(i.options.position)}),i.onOpened(function(){Cuic.on("click",document,n)}),Cuic.panels.add(i),i}return _inherits(t,e),_createClass(t,[{key:"getBody",value:function(){return this.content}},{key:"getContent",value:function(){return this.content}},{key:"getFooter",value:function(){return this.footer}},{key:"getHeader",value:function(){return this.header}},{key:"resizeContent",value:function(){var e=this._calculateAvailableSpace();this.css({"max-height":e.height});var t=e.height;return this.header instanceof Cuic.Element&&(t-=this.header.outerHeight(!0)),this.footer instanceof Cuic.Element&&(t-=this.footer.outerHeight(!0)),t-=this.content.margin().vertical,this.content.css({"max-height":t}),this}},{key:"setContent",value:function(e){return this.content.html(e),this}},{key:"setFooter",value:function(e){return this.footer.html(e),this}},{key:"setTitle",value:function(e){return this.title.html(e),this.header.show(),this}}]),t}(Cuic.Component),Cuic.Panel.prototype.options={autoClose:!1,closable:!0,closeButton:null,closeButtonClass:"glyphicon glyphicon-remove-sign",content:null,footer:null,maximized:!1,namespace:"panel",opened:!1,parent:null,position:"left top",title:null,zIndex:1},Cuic.panels=new Cuic.Collection,Cuic.onWindowResized(function(){Cuic.panels.each(function(e){e.resizeContent()})}),Cuic.Popup=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Popup.prototype.options,e,{mainClass:"popup"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));i.content=new Cuic.Element("div",{className:"popup-content",html:e.content}).appendTo(i),i.tail=new Cuic.Element("span",{className:"popup-tail"}).appendTo(i),i.closeButton=new Cuic.Element("span",{className:i.options.closeButtonClass,html:i.options.closeButton,role:"button"}).addClass("btn-close").appendTo(i),i.shortcuts={close:new Cuic.Shortcut({element:i,keyCode:Cuic.keys.ESC,callback:function(){i.close()}})};var n=function(e){i.isOpened()&&i.options.autoClose&&(e.target===i.node()||Cuic.element(e.target).isChildOf(i)||i.close())};return i.on("click",function(e){Cuic.element(e.target).hasClass("btn-close")&&(e.preventDefault(),i.close())}),i.onAnchored(function(){i.updateTail()}),i.onClosed(function(){Cuic.off("click",document,n),i.options.autoRemove&&i.remove()}),i.onOpen(function(){var e=Cuic.node(i.options.target).parentNode;i.appendTo(e),i.anchor(i.options.anchor,i.options.target)}),i.onOpened(function(){Cuic.on("click",document,n)}),Cuic.popups.add(i),i}return _inherits(t,e),_createClass(t,[{key:"setContent",value:function(e){return this.content.html(e),this}},{key:"updateTail",value:function(){var e={bottom:"",left:"",right:"",top:""};return this.tail.removeClass("popup-tail-bottom popup-tail-left popup-tail-right popup-tail-top"),this.isAnchored("bottom")&&this.tail.addClass("popup-tail-top"),this.isAnchored("top")&&this.tail.addClass("popup-tail-bottom"),this.isAnchored("left")&&this.tail.addClass("popup-tail-right"),this.isAnchored("right")&&this.tail.addClass("popup-tail-left"),this.tail.css(e),this}}]),t}(Cuic.Component),Cuic.Popup.prototype.options={anchor:"top",autoClose:!0,autoRemove:!1,closable:!0,closeButton:null,closeButtonClass:"glyphicon glyphicon-remove-sign",content:null,namespace:"popup",opened:!1,target:null,zIndex:9},Cuic.popups=new Cuic.Collection,Cuic.Switcher=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Switcher.prototype.options,e,{mainClass:"switcher"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className,html:e.content},e));return i.activeElement=null,i.index=0,i.timer=null,i.goTo(0),i.options.autoStart&&i.start(),Cuic.switchers.add(i),i}return _inherits(t,e),_createClass(t,[{key:"first",value:function(){this.goTo(0)}},{key:"getActiveElement",value:function(){return this.activeElement}},{key:"getElementAt",value:function(e){return this.children().eq(e)}},{key:"getIndex",value:function(){return this.children().index(this.activeElement)}},{key:"goTo",value:function(e){var t=this.children(),i=this.options.repeat;if(e>=t.length?this.index=i?0:t.length-1:e<0?this.index=i?t.length-1:0:this.index=e,this.index!==this.getIndex()){var n=this.isStarted();this.stop();for(var o=0;o<t.length;o+=1){var s=Cuic.element(t[o]);this.index===o?(s.addClass("visible"),s.removeClass("hidden")):(s.addClass("hidden"),s.removeClass("visible"))}this.activeElement=t.eq(this.index),this.activeElement.addClass("visible"),this.activeElement.removeClass("hidden"),n&&this.start()}}},{key:"isStarted",value:function(){return null!==this.timer&&void 0!==this.timer}},{key:"last",value:function(){this.goTo(this.children().length-1)}},{key:"next",value:function(){this.goTo(this.index+1)}},{key:"previous",value:function(){this.goTo(this.index-1)}},{key:"start",value:function(){var e=this;this.isStarted()||(this.timer=setInterval(function(){e.next()},this.options.delay))}},{key:"stop",value:function(){this.isStarted()&&(clearInterval(this.timer),this.timer=null)}}]),t}(Cuic.Component),Cuic.Switcher.prototype.options={autoStart:!0,delay:3e3,namespace:"switcher",repeat:!0},Cuic.switchers=new Cuic.Collection,function(e){var t=Cuic.namespace("table");Cuic.Table=function(i){i=Cuic.extend(!0,{onSorted:null,selectedClass:"selected",selectRowOnClick:!1,sortableClass:"sortable",sortColumn:0,sortOrder:"asc",target:null},i);var n=e(i.target);if(n.length>1)throw"Only one table is expected as target";if(0===n.length)throw"Invalid table target";if(!n.is("table"))throw"The target is not a table : "+i.target;var o=n.children("thead"),s=n.children("tbody");n.children("tfoot");i.selectRowOnClick&&s.children("tr").off(t("click")).on(t("click"),function(t){"TD"===t.target.nodeName&&e(this).toggleClass(i.selectedClass)}),n.sort=function(t,n){var a=[];s.children("tr").each(function(){a.push(e(this))});var r=o.find("tr > th").eq(t);if(o.find("tr > th").not(r).removeClass("ascendant descendant sorted"),r.addClass("sorted"),s.find("tr > td").removeClass("sorted"),s.find("tr").each(function(){e(this).children().eq(t).addClass("sorted")}),a.length>1){a.sort(function(e,i){if(void 0!==e&&null!==e&&void 0!==i&&null!==i){var n=e.children("td").eq(t).html(),o=i.children("td").eq(t).html();if("string"==typeof n&&(n=n.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),n>o)return 1;if(n===o)return 0}return-1}),"desc"!==n&&n!=-1||a.reverse();for(var l=0;l<a.length;l+=1)a[l].appendTo(s);"function"==typeof i.onSorted&&i.onSorted(t,n)}};var a=o.find(".default");return a=1===a.length?a:o.find(".sortable:first"),n.sort(a.index(),a.hasClass("descendant")?"desc":"asc"),o.find("tr > ."+i.sortableClass).off(t("click")).on(t("click"),function(t){if(t.currentTarget===t.target){var i,o=e(this),s=o.index();o.hasClass("ascendant")?(o.removeClass("ascendant"),o.addClass("descendant"),i="desc"):(o.removeClass("descendant"),o.addClass("ascendant"),i="asc"),n.sort(s,i)}}),n}}(jQuery),function(e){var t=Cuic.namespace("tabs"),i=0;Cuic.Tabs=function(n){var o=this;n=Cuic.extend(!0,{content:null,defaultTab:0,target:null},n);var s=e(n.target);o.tabs=s.children(".tab"),o.content=e(n.content);var a=o.tabs.filter(".default");1===a.length?o.defaultTab=a.index():(o.defaultTab=n.defaultTab,o.tabs.eq(o.defaultTab).addClass("default")),o.tabs.filter(".default").addClass("active"),o.tabs.each(function(){var t=e(this),n=o.content.find("#"+t.attr("data-content"));t.attr("tabindex",i+=1),t.hasClass("default")||n.hide()}),o.tabs.off(t("focus")).on(t("focus"),function(t){o.selectTab(e(t.currentTarget).index())})},Cuic.Tabs.prototype.disableTab=function(e){return e==this.getActiveTabIndex()&&this.selectPreviousTab(),this.getTab(e).addClass("disabled")},Cuic.Tabs.prototype.enableTab=function(e){return this.getTab(e).removeClass("disabled")},Cuic.Tabs.prototype.getActiveTab=function(){return this.tabs.filter(".active:first")},Cuic.Tabs.prototype.getActiveTabIndex=function(){return this.getActiveTab().index()},Cuic.Tabs.prototype.getTab=function(e){return this.tabs.eq(e)},Cuic.Tabs.prototype.getTabContent=function(e){var t=this.getTab(e);return this.content.find("#"+t.attr("data-content"))},Cuic.Tabs.prototype.selectDefaultTab=function(){return this.selectTab(this.defaultTab)},Cuic.Tabs.prototype.selectNextTab=function(){return this.selectTab(this.getActiveTab().next(":not(.disabled)").index())},Cuic.Tabs.prototype.selectPreviousTab=function(){return this.selectTab(this.getActiveTab().prev(":not(.disabled)").index())},Cuic.Tabs.prototype.selectTab=function(e){var t=this.getTab(e),i=this.getTabContent(e);t.hasClass("disabled")||(this.tabs.removeClass("active"),t.addClass("active"),this.content.children().not(i).hide(),i.stop(!0,!1).fadeIn(200))}}(jQuery),Cuic.Tooltip=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Tooltip.prototype.options,e,{mainClass:"tooltip"});var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e));i.currentTarget=null,i.content=new Cuic.Element("div",{className:"tooltip-content"}).appendTo(i),i.tail=new Cuic.Element("span",{className:"tooltip-tail"}).appendTo(i);var n=Cuic.find(i.options.selector);n.each(function(e){e.on("mouseenter",function(t){var n=e.data("tooltip");n&&n.length||(n=e.attr(i.options.attribute),e.attr(i.options.attribute,""),e.data("tooltip",n)),n&&n.length&&i.content.html(n),i.currentTarget=t.currentTarget,i.options.followPointer||i.parentNode()!==t.currentTarget.parentNode&&i.appendTo(t.currentTarget.parentNode),i.open()}),e.on("mouseleave",function(){i.close()})}),Cuic.on("mousemove",document,function(e){i.options.followPointer&&!i.isHidden()&&(i.parentNode()!==document.body&&i.appendTo(document.body),i.anchor(i.options.anchor,[e.pageX,e.pageY]))});var o=function(e){i.isOpened()&&i.options.autoClose&&(e.target===i.node()||Cuic.element(e.target).isChildOf(i)||i.close())};return i.onAnchored(function(){(i.isAbsolute()||i.isFixed())&&i.alignInScreen(),i.updateTail()}),i.onClosed(function(){Cuic.off("click",document,o),i.options.autoRemove&&i.remove()}),i.onOpen(function(){i.options.followPointer||i.anchor(i.options.anchor,i.currentTarget)}),i.onOpened(function(){Cuic.on("click",document,o),(i.isAbsolute()||i.isFixed())&&i.alignInScreen()}),Cuic.tooltips.add(i),i}return _inherits(t,e),_createClass(t,[{key:"setContent",value:function(e){return this.content.html(e),this}},{key:"updateTail",value:function(){var e={bottom:"",left:"",right:"",top:""};return this.tail.removeClass("tooltip-tail-bottom tooltip-tail-left tooltip-tail-right tooltip-tail-top"),this.isAnchored("bottom")&&this.tail.addClass("tooltip-tail-top"),this.isAnchored("top")&&this.tail.addClass("tooltip-tail-bottom"),this.isAnchored("left")&&this.tail.addClass("tooltip-tail-right"),this.isAnchored("right")&&this.tail.addClass("tooltip-tail-left"),this.tail.css(e),this}}]),t}(Cuic.Component),Cuic.Tooltip.prototype.options={anchor:"right",attribute:"title",followPointer:!0,namespace:"tooltip",opened:!1,selector:"[title]",zIndex:100},Cuic.tooltips=new Cuic.Collection,function(e){var t=Cuic.namespace("tree");Cuic.Tree=function(i){i=Cuic.extend(!0,{collapsed:!0,itemClass:"tree-item",itemContentClass:"tree-item-content",itemNameClass:"tree-item-name",target:null},i);var n=e(i.target);if(1!==n.length)throw new Error("Target not found : "+i.target);var o=n.find("."+i.itemClass);return 0==o.filter(".default").length&&o.first().addClass("default"),o.filter(".default").addClass("active"),i.collapsed?n.find("."+i.itemClass).not(".expanded").not(".default").children("."+i.itemContentClass).hide():n.find(".collapsed").children("."+i.itemContentClass).hide(),o.each(function(){var o=e(this),s=(o.children("."+i.itemNameClass),o.children("."+i.itemContentClass));1==s.length&&o.addClass(s.is(":visible")?"expanded":"collapsed"),o.children("."+i.itemNameClass).off(t("click")).on(t("click"),function(){o.hasClass("disabled")||1===s.length&&(n.find(".active").removeClass("active"),s.is(":visible")?o.removeClass("expanded").addClass("collapsed"):(o.addClass("active"),o.removeClass("collapsed").addClass("expanded")),s.toggle(200))})}),n}}(jQuery);