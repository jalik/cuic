/*
 * The MIT License (MIT)
 *
 * Copyright (c) 2017 Karl STEIN
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

"use strict";function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,e){if("undefined"!=typeof i)throw"Cuic already exists";if("undefined"==typeof jQuery)throw"jQuery not found";var i={DEBUG:!1,mouseX:0,mouseY:0,addClass:function(t,e){t=this.getElement(t);for(var i=this.getClasses(t),n=(e||"").split(" "),o=0;o<n.length;o+=1)i.indexOf(n[o])===-1&&i.push(n[o]);return t.className=i.join(" "),i},addEventListener:function(t,e,i){return t=this.getElement(t),"function"==typeof t.addEventListener?t.addEventListener(e,i):"function"==typeof t.attachEvent?t.attachEvent(e,i):void 0},align:function(t,e,i){return t=this.getElement(t),this.css(t,this.calculateAlign(t,e,i)),t},anchor:function(t,e,i){return t=this.getElement(t),this.css(t,this.calculateAnchor(t,e,i)),t},apply:function(t,e,i){if("function"==typeof t)return t.apply(e,i)},border:function(t){var e=parseInt(this.getComputedStyle(t,"border-bottom-width")),i=parseInt(this.getComputedStyle(t,"border-left-width")),n=parseInt(this.getComputedStyle(t,"border-right-width")),o=parseInt(this.getComputedStyle(t,"border-top-width"));return{bottom:e,horizontal:i+n,left:i,right:n,top:o,vertical:e+o}},calculateAlign:function(t,i,n){var o=this;t=this.getElement(t),i=i||"",n?(n=this.getElement(n),"HTML"===n.nodeName&&(n=document.body),n!==t.parentNode&&n.append(t)):n=t.parentNode;var s=this.outerHeight(t,!0),a=this.outerWidth(t,!0),r=this.margin(t),l=this.innerHeight(n),c=this.innerWidth(n),u=this.padding(n),h=n.scrollLeft,d=n.scrollTop,p=-d,m=-h,f={bottom:"",left:"",right:"",top:""};"fixed"===this.css(t,"position")&&(n=e,l=this.innerHeight(n),c=this.innerWidth(n),h=0,d=0,p=0,m=0);var g=function(){return h+(o.width(n)/2-a/2)},C=function(){return d+(o.height(n)/2-s/2)};a>c&&(f.width=c-(a-this.width(t))),s>l&&(f.height=l-(s-this.height(t))),i.indexOf("bottom")!==-1?f.bottom=Math.max(u.bottom,r.bottom):i.indexOf("top")!==-1?f.top=Math.max(u.top,r.top):f.top=C()+Math.max(u.top,r.top),i.indexOf("left")!==-1?f.left=Math.max(u.left,r.left):i.indexOf("right")!==-1?f.right=Math.max(u.right,r.right):f.left=g()+Math.max(u.left,r.left);for(var v in f)"number"==typeof f[v]&&(f[v]=f[v]+"px");return f},calculateAnchor:function(t,i,n){i=i||"",t=this.element(t);var o=1,s=1,a={left:n[0],top:n[1]};n instanceof Array&&2===n.length||(n=this.element(n),o=n.outerHeight(),s=n.outerWidth(),a=n.offset());var r=t.outerWidth(!0),l=t.outerHeight(!0),c=parseInt(r/2),u=parseInt(l/2),h=parseInt(s/2),d=parseInt(o/2),p={bottom:"",left:"",right:"",top:""};i.indexOf("bottom")!==-1?p.top=a.top+o:i.indexOf("top")!==-1?p.top=a.top-l:p.top=a.top+d-u,i.indexOf("left")!==-1?p.left=a.left-r:i.indexOf("right")!==-1?p.left=a.left+s:p.left=a.left+h-c,"fixed"===t.css("position")&&(p.left-=e.scrollX,p.top-=e.scrollY);for(var m in p)"number"==typeof p[m]&&(p[m]=p[m]+"px");return p},calculateMaximize:function(t){t=this.getElement(t);var e=t.parentNode,i=this.padding(e),n=this.margin(t),o={bottom:"",height:this.height(e)-n.vertical+"px",left:"",right:"",top:"",width:this.width(e)-n.horizontal+"px"};return this.isPosition("right",t)?o.right=i.right+"px":o.left=i.left+"px",this.isPosition("bottom",t)?o.bottom=i.bottom+"px":o.top=i.top+"px",o},calculateMinimize:function(t,e){t=this.getElement(t),e=e||"";var i=t.cloneNode(!0);this.css(i,{height:"auto",width:"auto"});var n=this.calculateAlign(i,e,t.parentNode);return n.height=this.outerHeight(i)+"px",n.width=this.outerWidth(i)+"px",i.remove(),n},call:function(){var t=void 0,e=void 0,i=Array.prototype.slice.call(arguments);return i.length>=2?(e=i.shift(),t=i.shift()):i.length>0&&(e=i.shift()),this.apply(e,t,i)},closest:function(t,e){return t=this.getElement(t),t.closest(e)},autoPixel:function(t){var e=["bottom","left","padding","right","top","max-height","max-width","height","width","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top"];for(var i in t)t.hasOwnProperty(i)&&"number"==typeof t[i]&&e.indexOf(i)!==-1&&(t[i]=t[i]+"px");return t},css:function(t,e){if(t=this.getElement(t),e)if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var i="";this.autoPixel(e);for(var n=0;n<t.style.length;n+=1){var o=t.style[n];if(!(o in e)){var s=t.style[o];"string"==typeof s&&""===s&&(s='""'),i+=o+": "+s+";"}}for(var a in e)if(e.hasOwnProperty(a)){var r=e[a];a in t.style||console.warn('Style "'+a+'" is not supported by element.',t),"string"==typeof r&&""===r&&(r='""'),i+=a+": "+r+";"}t.style=i}else if("string"==typeof e){if(e.indexOf(":")===-1)return t.style[e];t.style=e}return t.style},debug:function(){this.DEBUG&&void 0!==console&&console.log.apply(this,Array.prototype.slice.call(arguments))},element:function(t){return t instanceof this.Element?t:t instanceof HTMLElement?new this.Element(t):t instanceof jQuery?new this.Element(t.get(0)):"string"==typeof t?new this.Element(document.querySelector(t)):t},enterFullScreen:function(t){t=this.getElement(t),t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},extend:function(){var t=Array.prototype.slice.call(arguments),e=!1,i=t.shift();"boolean"==typeof i&&(e=i,i=t.shift());for(var n=0;n<t.length;n+=1){var o=t[n];if("object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o&&void 0!==o&&"object"===("undefined"==typeof i?"undefined":_typeof(i))&&null!==i&&void 0!==i)for(var s in o)o.hasOwnProperty(s)&&(e&&"object"===_typeof(o[s])&&null!==o[s]&&void 0!==o[s]?i[s]=this.extend(i[s],o[s]):i[s]=o[s]);else null!==o&&void 0!==o&&(i=o)}return i},getClasses:function(t){return t=this.getElement(t),t.className.split(" ")},getComputedStyle:function(t,i){return t=this.getElement(t),e.getComputedStyle(t,null).getPropertyValue(i)},getElement:function(t){if(t instanceof HTMLElement)return t;if(t instanceof HTMLDocument)return t;if(t instanceof this.Element)return t.getElement();if(t instanceof jQuery)return t.get(0);throw new TypeError("element is not supported (HTMLElement, Cuic.Element or jQuery)")},getStylePrefix:function(){var t=document.createElement("div");return""==t.WebkitAnimation?"-webkit-":""==t.MozAnimation?"-moz-":""==t.OAnimation?"-o-":""==t.WebkitTransition?"-webkit-":""==t.MozTransition?"-moz-":""==t.OTransition?"-o-":""},hasClass:function(t,e){t=this.getElement(t);for(var i=this.getClasses(t),n=(e||"").split(" "),o=n.length>0,s=0;s<n.length;s+=1)if(i.indexOf(n[s])===-1){o=!1;break}return o},height:function(t){t=this.getElement(t);var e=this.padding(t);return t.clientHeight-e.vertical},innerHeight:function(t){return t=this.getElement(t),t.clientHeight},innerWidth:function(t){return t=this.getElement(t),t.clientWidth},isChrome:function(){return!!e.chrome&&!!e.chrome.webstore},isEdge:function(){return!isIE&&!!e.StyleMedia},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isFullScreenEnabled:function(){return(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)===!0},isIE:function(){return!!document.documentMode},isOpera:function(){return!!e.opr&&!!opr.addons||!!e.opera||navigator.userAgent.indexOf(" OPR/")>=0},isParent:function(t,e){t=this.getElement(t),e=this.getElement(e);var i=e;do if(i=i.parentNode,i===t)return!0;while(i);return!1},isPosition:function(t,e){e=this.getElement(e);var i=e.style;return t.indexOf("bottom")!==-1?i.bottom&&!i.top:t.indexOf("top")!==-1?i.top&&!i.bottom:t.indexOf("left")!==-1?i.left&&!i.right:t.indexOf("right")!==-1&&(i.right&&!i.left)},isSafari:function(){return/constructor/i.test(e.HTMLElement)||function(t){return"[object SafariRemoteNotification]"===t.toString()}(!e.safari||safari.pushNotification)},margin:function(t){var e=parseInt(this.getComputedStyle(t,"margin-bottom")),i=parseInt(this.getComputedStyle(t,"margin-left")),n=parseInt(this.getComputedStyle(t,"margin-right")),o=parseInt(this.getComputedStyle(t,"margin-top"));return{bottom:e,horizontal:i+n,left:i,right:n,top:o,vertical:e+o}},maximize:function(t){return t=this.getElement(t),this.removeClass(t,"minimized"),this.addClass(t,"maximized"),this.css(t,this.calculateMaximize(t)),t},minimize:function(t,e){return t=this.getElement(t),this.removeClass(t,"maximized"),this.addClass(t,"minimized"),this.css(t,this.calculateMinimize(t,e)),t},namespace:function(t){return function(e,n){return n=i.slug(n),e+".cuic."+t+(n?"."+n:"")}},off:function(t,e,i){e=this.getElement(e);var n=this.whichEvent(t);if(t.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(n||"animation"in e.style)&&"0s"!=getComputedStyle(e)[o]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(t.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(n||"transition"in e.style)&&"0s"!=getComputedStyle(e)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}return n||console.warn('Event "'+t+'" is not supported by this browser.'),this.removeEventListener(e,n,i)},offset:function(t){return t=this.getElement(t),{left:t.offsetLeft,top:t.offsetTop}},on:function(t,e,i){e=this.getElement(e);var n=this.whichEvent(t);if(t.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(n||"animation"in e.style)&&"0s"!=getComputedStyle(e)[o]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(t.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(n||"transition"in e.style)&&"0s"!=getComputedStyle(e)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}return n||console.warn('Event "'+t+'" is not supported by this browser.'),this.addEventListener(e,n,i)},once:function(t,e,n){e=this.getElement(e);var o=this.whichEvent(t);if(t.indexOf("animation")!==-1){var s=this.prefixStyle("animation-duration");(o||"animation"in e.style)&&"0s"!=getComputedStyle(e)[s]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(t.indexOf("transition")!==-1){var a=this.prefixStyle("transition-duration");(o||"transition"in e.style)&&"0s"!=getComputedStyle(e)[a]||this.apply(n,this,Array.prototype.slice.call(arguments))}o||console.warn('Event "'+t+'" is not supported by this browser.');var r=function t(s){i.removeEventListener(e,o,t),i.apply(n,this,Array.prototype.slice.call(arguments))};return this.addEventListener(e,o,r)},outerHeight:function(t,e){t=this.getElement(t);var i=this.margin(t);return t.offsetHeight+(e?i.vertical:0)},outerWidth:function(t,e){t=this.getElement(t);var i=this.margin(t);return t.offsetWidth+(e?i.horizontal:0)},padding:function(t){var e=parseInt(this.getComputedStyle(t,"padding-bottom")),i=parseInt(this.getComputedStyle(t,"padding-left")),n=parseInt(this.getComputedStyle(t,"padding-right")),o=parseInt(this.getComputedStyle(t,"padding-top"));return{bottom:e,horizontal:i+n,left:i,right:n,top:o,vertical:e+o}},position:function(t){var e=parseInt(this.getComputedStyle(t,"bottom")),i=parseInt(this.getComputedStyle(t,"left")),n=parseInt(this.getComputedStyle(t,"right")),o=parseInt(this.getComputedStyle(t,"top"));return{bottom:e,left:i,right:n,top:o}},prefixStyle:function(t){var e=this.getStylePrefix();return"string"==typeof e&&e.length?e+t:t},removeClass:function(t,e){t=this.getElement(t);for(var i=this.getClasses(t),n=(e||"").split(" "),o=0;o<n.length;o+=1){var s=i.indexOf(n[o]);s!==-1&&i.splice(s,1)}return t.className=i.join(" "),i},removeEventListener:function(t,e,i){return t=this.getElement(t),"function"==typeof t.removeEventListener?t.removeEventListener(e,i):"function"==typeof t.detachEvent?t.detachEvent(e,i):void 0},slug:function(t){return"string"==typeof t&&(t=t.replace(/ +/g,"-"),t=t.replace(/[^a-zA-Z0-9_-]+/g,"")),t},valueOf:function(t,e){switch("undefined"==typeof t?"undefined":_typeof(t)){case"function":t=t.call(e)}return t},whichEvent:function(t){var e=void 0,i=document.createElement("div"),n={};switch(t){case"transitionend":n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(e in n)if(void 0!==i.style[e])return n[e];if(void 0!==document[t]||void 0!==document["on"+t])return t},width:function(t){t=this.getElement(t);var e=this.padding(t);return t.clientWidth-e.horizontal}};e&&(e.Cuic=i),t(document).ready(function(){i.on("mousemove",document,function(t){i.mouseX=t.clientX,i.mouseY=t.clientY}),t("html,body").css({height:"100%",minHeight:"100%"})})}(jQuery,window),Cuic.Benchmark=function(){function t(){_classCallCheck(this,t);var e=this,i=null,n=null,o=0;e.getTime=function(){return i&&n?n-i:i?Date.now()-i:0},e.isStarted=function(){return"number"==typeof i},e.reset=function(){o=0,i=null,n=null},e.start=function(){i=Date.now(),n=null},e.stop=function(){i=null,n=Date.now()}}return t}(),Cuic.Collection=function(){function t(e){_classCallCheck(this,t),this.values=e instanceof Array?e:[],this.length=this.values.length}return _createClass(t,[{key:"add",value:function(t){this.values.push(t),this.length+=1,this.onAdded(t)}},{key:"get",value:function(t){return this.values[t]}},{key:"onAdded",value:function(t){}},{key:"onRemoved",value:function(t){}},{key:"remove",value:function(t){var e=this.values.indexOf(t);e!==-1&&(this.values.splice(e,1),this.length-=1,this.onRemoved(t))}},{key:"size",value:function(){return this.values.length}}]),t}(),function(t){var e=["checkbox","color","date","datetime","email","hidden","month","number","password","radio","range","search","tel","text","time","url","week"];Cuic.checkForm=function(e,i){function n(e){"function"==typeof i.onError&&(e=t(e),e.addClass(i.errorClass),i.onError.call(e,e.attr("name"),e.val()),o+=1)}e=t(e),i=Cuic.extend(!0,{errorClass:"error",filter:null,onError:null},i);var o=0;return e.find("."+i.errorClass).removeClass(i.errorClass),e.find("."+i.errorClass).removeClass(i.errorClass),e.find("[name]").not(":disabled").each(function(){var t=this.value;Cuic.isField(this)&&Cuic.isNodeFiltered(this,i.filter)&&(this.required&&void 0!==t&&null!==t?n(this):this.pattern&&!new RegExp(this.pattern).test(t)&&n(this))}),0===o},Cuic.getFields=function(e,i){var n={};return e=t(e),i=Cuic.extend(!0,{dynamicTyping:!0,filter:null,ignoreButtons:!0,ignoreEmpty:!1,ignoreUnchecked:!1,smartTyping:!0},i),e.find("[name]").not(":disabled").each(function(){var t=this,e=t.name,o=t.type,s=["button","reset","submit"].indexOf(o)!==-1,a=["checkbox","radio"].indexOf(o)!==-1;if(Cuic.isField(t)&&Cuic.isNodeFiltered(t,i.filter)&&(!i.ignoreButtons||!s)&&(!i.ignoreUnchecked||!a||t.checked)){var r=Cuic.getFieldValue(t,i);if(null!==r&&void 0!==r||!i.ignoreEmpty){if(t.multiple===!0&&(e=e.replace(/\[]$/g,"")),e.indexOf("[")!==-1){var l=e.substr(0,e.indexOf("[")),c=e.substr(e.indexOf("["));return void(n[l]=Cuic.resolveDimensionsTree(c,n[l],r))}a?t.checked?n[e]=r:["true","TRUE"].indexOf(r)!==-1?n[e]=!1:void 0===n[e]&&(n[e]=null):n[e]=r}}}),n},Cuic.resolveDimensionsTree=function(t,e,i){if(0===t.length)return i;if(void 0===e||null===e){var n=t.match(/\[/g).length,o=t.match(/]/g).length;if(n>o)throw new SyntaxError("Missing closing ']' in '"+t+"'");if(o<n)throw new SyntaxError("Missing opening '[' in '"+t+"'")}var s=t.indexOf("[");if(s!==-1){var a=t.indexOf("]",s+1),r=t.substr(a+1),l=t.substring(s+1,a),c=l.length;if(c&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(l)){void 0!==e&&null!==e||(e={});var u=this.resolveDimensionsTree(r,e[l],i);void 0!==u&&(e[l]=u)}else if(void 0!==e&&null!==e||(e=[]),0===c){var h=this.resolveDimensionsTree(r,e[l],i);void 0!==h&&e.push(h)}else if(/^[0-9]+$/.test(l)){var d=this.resolveDimensionsTree(r,e[l],i);void 0!==d&&(e[parseInt(l)]=d)}}return e},Cuic.getFieldValue=function(e,i){i=Cuic.extend({dynamicTyping:!0,smartTyping:!0},i);var n=e.value,o=e.nodeName.toUpperCase();switch(o){case"INPUT":var s="string"==typeof e.type?e.type.toLowerCase():"";["checkbox","radio"].indexOf(s)!==-1?n=e.checked?"on"===n||n:void 0:["button","reset","submit"].indexOf(s)!==-1||["number"].indexOf(s)!==-1&&i.smartTyping&&(n=Cuic.parseValue(n));break;case"SELECT":e.multiple&&(n=[],t(e).find("option").each(function(){var t=this;t.selected&&n.push(t.value)}));break;case"TEXTAREA":}if(i.dynamicTyping&&null!==n&&void 0!==n)if(n instanceof Array)for(var a=0;a<n.length;a+=1)n[a]=Cuic.parseValue(n[a]);else n=Cuic.parseValue(n);return n},Cuic.isField=function(t){var i=t.nodeName.toUpperCase();return"TEXTAREA"===i||"SELECT"===i||"INPUT"===i&&e.indexOf(t.type)!==-1},Cuic.isNodeFiltered=function(t,e){return void 0===e||null===e||e instanceof Array&&e.indexOf(t.name)!==-1||"function"==typeof e&&e.call(t,t.name)},Cuic.parseBoolean=function(t){return!!/^true$/i.test(t)||!/^false$/i.test(t)&&null},Cuic.parseValue=function(t){if("string"==typeof t){t=t.trim();var e=this.parseBoolean(t);if(e===!0||e===!1)return e;if(/^-?[0-9]+$/.test(t))return parseInt(t);if(/^-?[0-9]+\.[0-9]+$/.test(t))return parseFloat(t)}return""===t?null:t},Cuic.serializeQueryParams=function(t){var e="";if(null!=t)if("string"==typeof t)e=t;else if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var i=[];for(var n in t)t.hasOwnProperty(n)&&null!=t[n]&&(i.push("&"),i.push(encodeURIComponent(n).trim()),i.push("="),i.push(encodeURIComponent(t[n]).trim()));i.length>0&&(i.unshift(i),e=i.join(""))}return e}}(jQuery),Cuic.Shortcut=function(){function t(e){_classCallCheck(this,t);var i=this;if(e=Cuic.extend({},Cuic.Shortcut.prototype.options,e),i.options=e,i.options.element=Cuic.getElement(e.element),"function"!=typeof i.options.callback)throw new TypeError("Shortcut.options.callback is not a function.");i.options.active&&i.activate()}return _createClass(t,[{key:"activate",value:function(){var t=this,e=this.options,i=this.getElement();Cuic.on("keydown",i,function(n){if((e.keyCode===n.keyCode||e.key===n.key||e.key===n.code)&&e.altKey===n.altKey&&e.ctrlKey===n.ctrlKey&&e.shiftKey===n.shiftKey)return n.preventDefault(),n.stopPropagation(),e.callback.call(t,i,n),!1})}},{key:"deactivate",value:function(){Cuic.off("keydown",this.getElement(),this.options.callback)}},{key:"getElement",value:function(){return Cuic.getElement(this.options.element)}}]),t}(),Cuic.Shortcut.prototype.options={active:!0,altKey:!1,callback:null,ctrlKey:!1,element:document.body,key:null,keyCode:null,shiftKey:!1},Cuic.keys={BACKSPACE:8,DEL:46,DOWN:40,ENTER:13,ESC:27,INSERT:45,LEFT:37,MINUS:109,PAGE_UP:33,PAGE_DOWN:34,PLUS:107,RIGHT:39,TAB:9,UP:38},Cuic.Element=function(){function t(e,i,n){_classCallCheck(this,t);var o=this;if(i=Cuic.extend({},i,n),o.options=Cuic.extend({},Cuic.Element.prototype.options,n),o.options.element)o.element=Cuic.getElement(o.options.element);else if("string"==typeof e)o.element=document.createElement(e);else if(e instanceof HTMLElement)o.element=e;else if(e instanceof Cuic.Element)o.element=e.getElement();else{if(!(e instanceof jQuery))throw new TypeError("Cannot create element.");o.element=e.get(0)}o.options.parent&&(o.options.parent=Cuic.getElement(o.options.parent));for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];if("className"===s){o.addClass(a);continue}null!==a&&void 0!==a&&(void 0!==o.element[s]?o.element[s]=a:"html"===s?o.element.innerHTML=a:"text"===s?o.element.innerText=a:"zIndex"===s&&o.css({"z-index":parseInt(a)}))}i.css&&o.css(i.css),o.options.debug&&o.addClass("debug"),o.element.parentNode||o.options.parent instanceof HTMLElement&&(o.appendTo(o.options.parent),o.options.position&&o.align(o.options.position))}return _createClass(t,[{key:"addClass",value:function(t){return Cuic.addClass(this.getElement(),t),this}},{key:"align",value:function(t){return Cuic.align(this.getElement(),t),this.options.position=t,this}},{key:"anchor",value:function(t,e){return e=e||this.options.target,Cuic.anchor(this.getElement(),t,e),this.options.anchor=t,this.options.target=e,this}},{key:"append",value:function(t){return this.getElement().append(Cuic.getElement(t)),this}},{key:"appendTo",value:function(t){return Cuic.getElement(t).append(this.getElement()),this}},{key:"attr",value:function(t,e){return void 0===e?this.getElement()[t]:void(t in this.getElement()&&(this.getElement()[t]=e))}},{key:"children",value:function t(){for(var t=[],e=this.getElement().children||this.getElement().childNodes,i=0;i<e.length;i+=1)e[i]instanceof HTMLElement&&t.push(e[i]);return t}},{key:"css",value:function(t){return Cuic.css(this.getElement(),t)}},{key:"disable",value:function(){return this.getElement().disabled=!0,this.addClass("disabled"),this}},{key:"enable",value:function(){return this.getElement().disabled=!1,this.removeClass("disabled"),this}},{key:"find",value:function(t){return Cuic.element(this.getElement().querySelector(t))}},{key:"findAll",value:function(t){return this.getElement().querySelectorAll(t)}},{key:"getClasses",value:function(){return Cuic.getClasses(this.getElement())}},{key:"getElement",value:function(){return this.element}},{key:"getParentElement",value:function(){return this.getElement().parentNode}},{key:"hasClass",value:function(t){return Cuic.hasClass(this.getElement(),t)}},{key:"height",value:function(){return Cuic.height(this)}},{key:"hide",value:function(){return this.css({display:"none"}),this}},{key:"html",value:function(t){return t?(this.getElement().innerHTML=t,this):this.getElement().innerHTML}},{key:"innerHeight",value:function(){return Cuic.innerHeight(this)}},{key:"innerWidth",value:function(){return Cuic.innerWidth(this)}},{key:"insertAfter",value:function(t){t=Cuic.getElement(t);var e=this.getElement().parentNode;return e.insertBefore(t,this.getElement().nextSibling),this}},{key:"insertBefore",value:function(t){t=Cuic.getElement(t);var e=this.getElement().parentNode;return e.insertBefore(t,this.getElement()),this}},{key:"isEnabled",value:function(){return this.getElement().disabled!==!0||!this.hasClass("disabled")}},{key:"isRemoved",value:function(){var t=this.getElement().parentNode;return null===t||void 0===t}},{key:"off",value:function(t,e){return Cuic.off(t,this.getElement(),e),this}},{key:"offset",value:function(){return Cuic.offset(this.getElement())}},{key:"on",value:function(t,e){return Cuic.on(t,this.getElement(),e),this}},{key:"once",value:function(t,e){return Cuic.once(t,this.getElement(),e),this}},{key:"onRemove",value:function(){}},{key:"outerHeight",value:function(t){return Cuic.outerHeight(this,t)}},{key:"outerWidth",value:function(t){return Cuic.outerWidth(this,t)}},{key:"parent",value:function t(){var t=this.getElement().parentNode;return t?Cuic.element(t):t}},{key:"position",value:function(){return Cuic.position(this.getElement())}},{key:"prepend",value:function(t){return this.getElement().prepend(Cuic.getElement(t)),this}},{key:"prependTo",value:function(t){return Cuic.getElement(t).prepend(this.getElement()),this}},{key:"remove",value:function(){return this.onRemove(),this.getElement().remove(),this}},{key:"removeClass",value:function(t){return Cuic.removeClass(this.getElement(),t),this}},{key:"setContent",value:function(t){return this.setHtml(t),this}},{key:"setHtml",value:function(t){return this.getElement().innerHTML=t,this}},{key:"setText",value:function(t){return this.getElement().innerText=t,this}},{key:"show",value:function(){return this.css({display:""}),this}},{key:"val",value:function(t){return t&&"value"in this.getElement()?(this.getElement().value=t,this):this.getElement().value}},{key:"width",value:function(){return Cuic.width(this)}}]),t}(),Cuic.Element.prototype.options={className:null,css:null,namespace:"cuic",parent:null,position:null},Cuic.Component=function(t){function e(t,i,n){_classCallCheck(this,e),n=Cuic.extend({},Cuic.Component.prototype.options,n);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i,n)),s=o;return s.addClass("component"),o}return _inherits(e,t),_createClass(e,[{key:"close",value:function(t){var e=this;return this.onClose(),this.removeClass("opened"),this.addClass("closed"),this.once("transitionend",function(i){e.onClosed(i),e.css({display:"none"}),"function"==typeof t&&t.call(e,i)}),this}},{key:"isOpened",value:function(){return this.hasClass("opened")}},{key:"maximize",value:function(t){var e=this;this.onMaximize(),this.removeClass("minimized"),this.addClass("maximized"),Cuic.maximize(this.getElement()),this.once("transitionend",function(i){e.onMaximized(i),"function"==typeof t&&t.call(e,i)})}},{key:"minimize",value:function(t){var e=this;this.onMinimize(),this.removeClass("maximized"),this.addClass("minimized"),Cuic.minimize(this.getElement(),this.options.position),this.once("transitionend",function(i){e.onMinimized(i),"function"==typeof t&&t.call(e,i)})}},{key:"onClose",value:function(){}},{key:"onClosed",value:function(){}},{key:"onMaximize",value:function(){}},{key:"onMaximized",value:function(){}},{key:"onMinimize",value:function(){}},{key:"onMinimized",value:function(){}},{key:"onOpen",value:function(){}},{key:"onOpened",value:function(){}},{key:"open",value:function(t){var e=this;return this.css({display:""}),this.onOpen(),this.removeClass("closed"),this.addClass("opened"),this.once("transitionend",function(i){e.onOpened(i),"function"==typeof t&&t.call(e,i)}),this}},{key:"toggle",value:function(t){return this.isOpened()?this.close(t):this.open(t),this}}]),e}(Cuic.Element),Cuic.Component.prototype.options={className:null,css:null,parent:null,position:null},Cuic.GroupComponent=function(t){function e(t,i,n){_classCallCheck(this,e),n=Cuic.extend({},Cuic.GroupComponent.prototype.options,n);var o=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,Cuic.extend({className:n.className,role:"group"},i),n)),s=o;return s.addClass("component-group"),o.components=new Cuic.Collection,o.components.onAdded=function(t){o.onComponentAdded(t)},o.components.onRemoved=function(t){o.onComponentRemoved(t)},o}return _inherits(e,t),_createClass(e,[{key:"add",value:function(t){if(!(t instanceof Cuic.Component))throw new TypeError("Cannot add non component to a GroupComponent.");return Cuic.isPosition("top",this.getElement())?t.prependTo(this):t.appendTo(this),this.components.add(t),t}},{key:"onComponentAdded",value:function(t){}},{key:"onComponentRemoved",value:function(t){}},{key:"remove",value:function(t){return this.components.remove(t),t}}]),e}(Cuic.Component),Cuic.GroupComponent.prototype.options={className:"group"},Cuic.Hook=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Hook.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),n=i;n.addClass("hook"),n.css({position:"relative",top:"",width:""}),n.space=new Cuic.Element("div",{className:"hook-space"});var o=n.offset(),s=function(){var t=n.outerHeight(!0)<=window.screen.availHeight;if(t)if(n.options.fixed)n.hook();else{var e=Cuic.margin(n);window.scrollY>o.top-e.top?n.hook():n.unhook()}else n.unhook()};return s(),window.onscroll=function(){s()},window.onresize=function(){s()},i}return _inherits(e,t),_createClass(e,[{key:"hook",value:function(){var t=this;if(console.log("hook"),"fixed"!==t.css("position")){var e=t.offset(),i=Cuic.margin(t);t.options.fixed&&(t.options.offsetTop=e.top),t.space.css({display:t.css("display"),float:t.css("float"),height:t.outerHeight()+"px",width:t.outerWidth()+"px","margin-bottom":i.bottom+"px","margin-left":i.left+"px","margin-right":i.right+"px","margin-top":i.top+"px"}),t.insertBefore(t.space),t.space.show(),t.css({position:"fixed",left:e.left+"px",top:t.options.offsetTop+"px",height:t.space.height()+"px",width:t.space.width()+"px",zIndex:t.options.zIndex}),t.addClass("hooked"),t.onHook(t)}}},{key:"isHooked",value:function(){return this.hasClass("hooked")}},{key:"onHook",value:function(){}},{key:"onUnhook",value:function(){}},{key:"unhook",value:function(){var t=this;console.log("unhook"),"relative"!==t.css("position")&&(t.space.hide(),t.css({position:"relative",bottom:"",left:"",right:"",top:"",width:""}),t.removeClass("hooked"),t.onUnhook(t))}}]),e}(Cuic.Component),Cuic.Hook.prototype.options={fixed:!0,hookedClass:"hooked",zIndex:4},Cuic.Movable=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Movable.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),n=i;return n.addClass("movable"),"static"===n.css("position")&&n.css({position:"relative"}),i.setDragHandle(t.handle||n.getElement()),i}return _inherits(e,t),_createClass(e,[{key:"onDrag",value:function(){}},{key:"onDragStart",value:function(){}},{key:"onDragStop",value:function(){}},{key:"setDragHandle",value:function(t){var e=this;return Cuic.addClass(t,"movable-handle"),Cuic.on("mousedown",t,function(t){if((!e.options.rootOnly||t.target===t.currentTarget)&&e.onDragStart(t)!==!1){t.preventDefault(),e.addClass("dragging");var i=e.getParentElement(),n=Cuic.margin(e),o=Cuic.outerHeight(e),s=Cuic.outerWidth(e),a=Cuic.position(e),r=Cuic.mouseX,l=Cuic.mouseY,c=setInterval(function(){var t=Cuic.padding(i),c=Cuic.innerHeight(i),u=Cuic.innerWidth(i),h=Math.max(t.left),d=Math.max(t.top),p={},m=h,f=d,g=u-t.horizontal-n.right,C=c-t.vertical-n.bottom,v=e.options.stepX,y=e.options.stepY,b=Cuic.mouseX-r,x=Cuic.mouseY-l,k=a.left+Math.round(b/v)*v,w=a.top+Math.round(x/y)*y;k<m?k=m:k+s>g&&(k=g-s),w<f?w=f:w+o>C&&(w=C-o),e.onDrag({x:k,y:w})!==!1&&(e.options.horizontal&&(p.left=k,p.right=""),e.options.vertical&&(p.top=w,p.bottom=""),e.css(p))},Math.round(1e3/e.options.fps));Cuic.once("mouseup",document.body,function(t){clearInterval(c),e.removeClass("dragging"),e.onDragStop(t)})}}),e}}]),e}(Cuic.Component),Cuic.Movable.prototype.options={className:"movable",fps:60,handle:null,handleClassName:"movable-handle",horizontal:!0,rootOnly:!0,stepX:1,stepY:1,vertical:!0},Cuic.Resizable=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Resizable.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),n=i;n.addClass("resizable"),"static"===n.css("position")&&n.css("position","relative"),n.bottomHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-s",css:{height:t.handlerSize+"px"}}).appendTo(n),n.rightHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-e",css:{width:t.handlerSize+"px"}}).appendTo(n),n.bottomRightHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-se",css:{height:t.handlerSize+"px",width:t.handlerSize+"px"}}).appendTo(n),n.handles=[n.rightHandle,n.bottomHandle,n.bottomRightHandle],n.horizontalHandles=[n.rightHandle,n.bottomRightHandle],n.verticalHandles=[n.bottomHandle,n.bottomRightHandle];var o=function(t){if(!n.onResizeStart||n.onResizeStart.call(n,t)!==!1){t.preventDefault(),n.addClass("resizing");var e=n.parent(),o=e.offset(),s=n.outerHeight(),a=n.outerWidth(),r=Cuic.padding(n),l=s/a;
Cuic.once("mouseup",document,function(t){clearInterval(c),n.removeClass("resizing"),n.onResizeStop.call(n,t)});var c=setInterval(function(){var c={};if(!n.onResize||n.onResize.call(n)!==!1){if(n.options.horizontal)for(var u=0;u<n.horizontalHandles.length;u+=1)if(n.horizontalHandles[u].getElement()===t.target){var h=Cuic.mouseX-t.clientX,d=n.offset(),p=e.innerWidth(),m=p-(d.left-o.left+r.horizontal),f=a+h;f>m&&(f=m),(!Number(i.options.maxWidth)||f<=i.options.maxWidth)&&(!Number(i.options.minWidth)||f>=i.options.minWidth)&&(f=Math.round(f/n.options.stepX)*n.options.stepX,c.width=f);break}if(n.options.vertical)for(var g=0;g<n.verticalHandles.length;g+=1)if(n.verticalHandles[g].getElement()===t.target){var C=Cuic.mouseY-t.clientY,v=n.offset(),y=e.innerHeight(),b=y-(v.top-o.top+r.vertical),x=s+C;x>b&&(x=b),(!Number(i.options.maxHeight)||x<=i.options.maxHeight)&&(!Number(i.options.minHeight)||x>=i.options.minHeight)&&(x=Math.round(x/n.options.stepY)*n.options.stepY,c.height=x);break}n.options.keepRatio&&(c.height?c.width=c.height/l:c.width&&(c.height=c.width*l)),n.css(c)}},Math.round(1e3/n.options.fps))}};return n.bottomHandle.on("mousedown",o),n.rightHandle.on("mousedown",o),n.bottomRightHandle.on("mousedown",o),i}return _inherits(e,t),_createClass(e,[{key:"onResize",value:function(){}},{key:"onResizeStart",value:function(){}},{key:"onResizeStop",value:function(){}}]),e}(Cuic.Component),Cuic.Resizable.prototype.options={className:"resizable",fps:30,handlerSize:10,horizontal:!0,keepRatio:!1,maxHeight:null,maxWidth:null,minHeight:1,minWidth:1,namespace:"resizable",stepX:1,stepY:1,vertical:!0},Cuic.Button=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Button.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"button",{className:t.className,disabled:!1,html:t.label,title:t.title,type:t.type},t)),n=i;return n.addClass("btn"),"number"==typeof t.shortcut&&(n.shortcut=new Cuic.Shortcut({keyCode:t.shortcut,target:n.element,callback:function(){n.getElement().click()}})),i}return _inherits(e,t),e}(Cuic.Component),Cuic.Button.prototype.options={className:"btn btn-default",disabled:!1,shortcut:null,title:null,type:"button"};var dialogZIndex=0;Cuic.dialogs=new Cuic.Collection,Cuic.dialogs.onAdded=function(){dialogZIndex+=1},Cuic.dialogs.onRemoved=function(){dialogZIndex-=1},Cuic.Dialog=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Dialog.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className,role:"dialog"},t)),n=i;n.addClass("dialog");var o=void 0;n.buttons=new Cuic.Collection,n.addButton=function(t){return t instanceof Cuic.Button||!function(){var e=t.callback;t=new Cuic.Button({className:"btn btn-default",label:t.label}),"function"==typeof e?t.on("click",function(t){e.call(n,t)}):"close"===e&&t.on("click",function(){n.close()})}(),o.append(t.getElement()),n.buttons.add(t),n.buttons.length>0?i.footer.show():i.footer.hide(),t};var s=n.getParentElement()===document.body;if(n.css({position:s?"fixed":"absolute"}),n.fader=new Cuic.Fader({className:"fader dialog-fader",autoClose:!1,autoRemove:!1}).appendTo(t.parent),n.header=new Cuic.Element("header",{className:"dialog-header",css:{display:null!=t.title?"block":"none"}}).appendTo(n),n.title=new Cuic.Element("h3",{className:"dialog-title",html:t.title}).appendTo(n.header),n.content=new Cuic.Element("section",{className:"dialog-content",html:t.content}).appendTo(n),n.footer=new Cuic.Element("footer",{className:"dialog-footer",css:{display:null!=t.buttons?"block":"none"}}).appendTo(n),o=new Cuic.Element("div",{className:"btn-group",role:"group"}).appendTo(n.footer),n.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:n.options.closeButton,role:"button"}).appendTo(n.header),n.options.closeable?n.closeButton.show():n.closeButton.hide(),t.buttons instanceof Array)for(var a=0;a<t.buttons.length;a+=1)n.addButton(t.buttons[a]);return parseFloat(t.contentHeight)>0&&content.css("height",t.contentHeight),parseFloat(t.contentWidth)>0&&content.css("width",t.contentWidth),n.fader.on("click",function(){n.options.autoClose&&n.close()}),n.on("click",function(t){Cuic.hasClass(t.target,"btn-close")&&(t.preventDefault(),n.close())}),n.options.movable&&(n.movable=new Cuic.Movable({element:n.getElement(),handle:n.title,parent:n.getParentElement(),rootOnly:!1})),n.shortcuts={close:new Cuic.Shortcut({element:n,keyCode:Cuic.keys.ESC,callback:function(){n.close()}})},Cuic.dialogs.add(n),i}return _inherits(e,t),_createClass(e,[{key:"getBody",value:function(){return this.content}},{key:"getContent",value:function(){return this.content}},{key:"getFooter",value:function(){return this.footer}},{key:"getHeader",value:function(){return this.header}},{key:"onClose",value:function(){this.fader.options.autoRemove=this.options.autoRemove,this.fader.close()}},{key:"onClosed",value:function(){this.options.autoRemove&&this.remove()}},{key:"onOpen",value:function(){var t=this.options.zIndex+dialogZIndex;if(this.css({"z-index":t}),this.resizeContent(),this.options.modal&&(this.css({"z-index":t+1}),this.fader.css({"z-index":t}),this.fader.open()),this.options.maximized?this.maximize():this.align(this.options.position),this.buttons.length>0){var e=this.buttons.get(this.buttons.length-1);e.getElement().focus()}}},{key:"onOpened",value:function(){}},{key:"onRemove",value:function(){Cuic.dialogs.remove(this)}},{key:"resizeContent",value:function(){var t=this.getParentElement(),e=this.css("display"),i=window.innerHeight;t&&t!==document.body&&(i=Cuic.height(t));var n=Cuic.border(this),o=Cuic.margin(this);i-=o.vertical,i-=n.vertical,this.css({"max-height":i+"px"});var s=i;return this.header instanceof Cuic.Element&&(s-=this.header.outerHeight(!0)),this.footer instanceof Cuic.Element&&(s-=this.footer.outerHeight(!0)),this.content.css({"max-height":s+"px",overflow:"auto"}),this.css({display:e}),this}},{key:"setTitle",value:function(t){return this.title.html(t),this}}]),e}(Cuic.Component),Cuic.Dialog.prototype.options={autoClose:!1,autoRemove:!0,autoResize:!0,buttons:[],className:"dialog",closeable:!0,closeButton:null,content:null,contentHeight:null,contentWidth:null,movable:!0,maximized:!1,modal:!0,namespace:"dialog",parent:document.body,position:"center",title:null,zIndex:5},Cuic.Fader=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Fader.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),n=i;n.addClass("fader");var o=i.getParentElement()===document.body;return o&&i.css({position:"fixed"}),i.on("click",function(){i.options.autoClose&&i.close()}),i}return _inherits(e,t),_createClass(e,[{key:"onClosed",value:function(){this.options.autoRemove&&this.remove()}}]),e}(Cuic.Component),Cuic.Button.prototype.options={autoClose:!1,autoRemove:!1,className:"fader",namespace:"fader",zIndex:1},function(t){var e=0;Cuic.Grid=function(i){var n=this;i=Cuic.extend(!0,Cuic.Grid.prototype.options,i),n.animSpeed=parseInt(i.animSpeed),n.autoResize=i.autoResize===!0,n.colsWidth=parseFloat(i.colsWidth),n.editable=i.editable===!0,n.fps=parseInt(i.fps),n.maxCols=parseInt(i.maxCols),n.maxRows=parseInt(i.maxRows),n.minCols=parseInt(i.minCols),n.minRows=parseInt(i.minRows),n.rowsHeight=parseFloat(i.rowsHeight),n.spacing=parseFloat(i.spacing),n.widgets={},n.element=t(i.target),n.element.css({display:"block",minHeight:i.height,minWidth:i.width}),n.resize(i.cols,i.rows),new Cuic.Resizable({target:n.element}).onResizeStop=function(){var t=n.getSizeX(n.element.outerWidth()),e=n.getSizeY(n.element.outerHeight());n.maxCols=t,n.maxRows=e,n.maximize()},n.preview=t("<div>",{class:"preview",css:{"box-sizing":"border-box",height:n.rowsHeight,left:n.spacing,position:"absolute",top:n.spacing,width:n.colsWidth,zIndex:1}}),n.element.children(i.widgetSelector).each(function(){var t=this.id||"widget-"+(e+=1);n.addWidget(t,new Cuic.Grid.Widget({target:this}))}),n.autoResize&&n.minimize()},Cuic.Grid.prototype.addWidget=function(t,e){var i=this,n=e.element,o=i.preview;i.removeWidget(t),i.widgets[t]=e,i.element.append(e.element),e.element.attr("id",t),e.element.css({"box-sizing":"border-box",display:"block",margin:0,overflow:"hidden",position:"absolute"}),i.moveWidget(e,e.col,e.row),i.resizeWidget(e,e.sizeX,e.sizeY),e.col-1+e.sizeX>i.cols&&i.resize(e.col-1+e.sizeX,e.sizeY),e.row-1+e.sizeY>i.rows&&i.resize(e.sizeX,e.row-1+e.sizeY);var s,a,r=new Cuic.Resizable({target:e.element,container:i.element});r.onResize=function(){var t=n.outerHeight(),s=n.outerWidth(),a=Math.round(s/(i.colsWidth+i.spacing)),r=Math.round(t/(i.rowsHeight+i.spacing));a+e.col-1>i.maxCols?a=i.maxCols-(e.col-1):a<e.minSizeX&&(a=e.minSizeX),r+e.row-1>i.maxRows?r=i.maxRows-(e.row-1):r<e.minSizeY&&(r=e.minSizeY),o.css({height:i.calculateHeight(r),width:i.calculateWidth(a)})},r.onResizeStart=function(){return!(!i.editable||!e.resizable||e.isDragging())&&(s=n.outerHeight(),a=n.outerWidth(),n.css({zIndex:2}),i.element.append(o.css({left:n.css("left"),height:s,top:n.css("top"),width:a})),i.autoResize&&i.maximize(),!0)},r.onResizeStop=function(){o.detach();var t=i.getSizeX(o.outerWidth()),n=i.getSizeY(o.outerHeight());i.resizeWidget(e,t,n),i.autoResize&&i.minimize()};var l=new Cuic.Movable({target:e.element,rootOnly:!0,container:i.element});return l.onDrag=function(){var t=parseFloat(n.css("left")),s=parseFloat(n.css("top")),a=i.getPositionX(t),r=i.getPositionY(s);a>0&&a+e.sizeX<=i.cols+1&&r>0&&r+e.sizeY<=i.rows+1||(a=e.col,r=e.row),o.css({left:i.calculateLeft(a),top:i.calculateTop(r)})},l.onDragStart=function(t){return!(!i.editable||!e.movable||e.isResizing())&&(s=n.outerHeight(),a=n.outerWidth(),n.css({zIndex:2}),i.element.append(o.css({left:n.css("left"),height:s,top:n.css("top"),width:a})),i.autoResize&&i.maximize(),!0)},l.onDragStop=function(){o.detach();var t=parseFloat(n.css("left")),s=parseFloat(n.css("top")),a=i.getSizeX(t)+1,r=i.getSizeY(s)+1;i.moveWidget(e,a,r),i.autoResize&&i.minimize()},e},Cuic.Grid.prototype.calculateHeight=function(t){return parseInt(t)*(this.rowsHeight+this.spacing)-this.spacing},Cuic.Grid.prototype.calculateLeft=function(t){return parseInt(t)*(this.colsWidth+this.spacing)-this.colsWidth},Cuic.Grid.prototype.calculateTop=function(t){return parseInt(t)*(this.rowsHeight+this.spacing)-this.rowsHeight},Cuic.Grid.prototype.calculateWidth=function(t){return parseInt(t)*(this.colsWidth+this.spacing)-this.spacing},Cuic.Grid.prototype.clear=function(){for(var t in this.widgets)this.widgets.hasOwnProperty(t)&&this.removeWidget(t);return this},Cuic.Grid.prototype.getPosition=function(t,e){return[this.getPositionX(t),this.getPositionY(e)]},Cuic.Grid.prototype.getPositionX=function(t){return Math.round(parseFloat(t)/(this.colsWidth+this.spacing))+1},Cuic.Grid.prototype.getPositionY=function(t){return Math.round(parseFloat(t)/(this.rowsHeight+this.spacing))+1},Cuic.Grid.prototype.getSize=function(t,e){return[this.getSizeX(t),this.getSizeY(e)]},Cuic.Grid.prototype.getSizeX=function(t){return Math.round(parseFloat(t)/(this.colsWidth+this.spacing))},Cuic.Grid.prototype.getSizeY=function(t){return Math.round(parseFloat(t)/(this.rowsHeight+this.spacing))},Cuic.Grid.prototype.getWidget=function(t){return this.widgets[t]},Cuic.Grid.prototype.maximize=function(){return this.resize(this.maxCols,this.maxRows)},Cuic.Grid.prototype.minimize=function(){var t=this.minCols||1,e=this.minRows||1;for(var i in this.widgets)if(this.widgets.hasOwnProperty(i)){var n=this.widgets[i];n.col+n.sizeX-1>t&&(t=n.col+n.sizeX-1),n.row+n.sizeY-1>e&&(e=n.row+n.sizeY-1)}return this.resize(t,e)},Cuic.Grid.prototype.moveWidget=function(t,e,i){var n=this;return e>0&&e-1+t.sizeX<=n.cols&&i>0&&i-1+t.sizeY<=n.rows||(e=t.col,i=t.row),e>0&&i>0&&(t.col=e,t.row=i,t.element.css({zIndex:2}),t.element.animate({left:n.calculateLeft(e),top:n.calculateTop(i)},{complete:function(){t.element.removeClass("dragging"),t.element.css({zIndex:1}),"function"==typeof n.onWidgetMoved&&n.onWidgetMoved.call(n,t)},duration:n.animSpeed,queue:!1})),n},Cuic.Grid.prototype.removeWidget=function(e){var i=this.widgets[e];return i&&(delete this.widgets[e],i.element.stop(!0,!1).animate({height:0,width:0},{complete:function(){t(this).remove()},duration:this.animSpeed,queue:!1})),i},Cuic.Grid.prototype.resize=function(t,e){return t=parseInt(t),e=parseInt(e),t<1&&(t=1),e<1&&(e=1),t>0&&t<=this.maxCols&&e>0&&e<=this.maxRows&&(this.cols=t,this.rows=e,this.element.stop(!0,!1).animate({height:this.calculateHeight(e)+2*this.spacing,width:this.calculateWidth(t)+2*this.spacing},{duration:this.animSpeed,queue:!1})),this},Cuic.Grid.prototype.resizeWidget=function(t,e,i){var n=this;return e=parseInt(e),i=parseInt(i),e<t.minSizeX&&(e=t.minSizeX),i<t.minSizeY&&(i=t.minSizeY),(!n.maxSizeX||e<=n.maxSizeX)&&(!n.maxSizeY||i>=n.maxSizeY)&&(t.sizeX=e,t.sizeY=i,t.element.css({zIndex:2}),t.element.animate({height:i*(n.rowsHeight+n.spacing)-n.spacing,width:e*(n.colsWidth+n.spacing)-n.spacing},{complete:function(){t.element.removeClass("resizing"),t.element.css({zIndex:1}),"function"==typeof n.onWidgetResized&&n.onWidgetResized.call(n,t)},duration:n.animSpeed,queue:!1})),n},Cuic.Grid.prototype.onWidgetMoved=null,Cuic.Grid.prototype.onWidgetResized=null,Cuic.Grid.prototype.options={animSpeed:200,autoResize:!0,cols:null,colsWidth:100,editable:!0,fps:30,maxCols:null,maxRows:null,minCols:null,minRows:null,rows:null,rowsHeight:100,spacing:10,widgetSelector:".widget"},Cuic.Grid.Widget=function(e){var i=this;e=Cuic.extend(!0,{},Cuic.Grid.Widget.prototype.options,e),i.col=parseInt(e.col),i.movable=e.movable===!0,i.resizable=e.resizable===!0,i.row=parseInt(e.row),i.maxSizeX=parseInt(e.maxSizeX),i.maxSizeY=parseInt(e.maxSizeY),i.minSizeX=parseInt(e.minSizeX),i.minSizeY=parseInt(e.minSizeY),i.sizeX=parseInt(e.sizeX),i.sizeY=parseInt(e.sizeY),e.target&&(i.element=t(e.target),i.element.length>0&&(i.col=parseInt(i.element.attr("data-col"))||e.col,i.movable=i.element.attr("data-movable")?/^true$/gi.test(i.element.attr("data-movable")):e.movable,i.maxSizeX=parseInt(i.element.attr("data-max-size-x"))||e.maxSizeX,i.maxSizeY=parseInt(i.element.attr("data-max-size-y"))||e.maxSizeY,i.minSizeX=parseInt(i.element.attr("data-min-size-x"))||e.minSizeX,i.minSizeY=parseInt(i.element.attr("data-min-size-y"))||e.minSizeY,i.resizable=i.element.attr("data-resizable")?/^true$/gi.test(i.element.attr("data-resizable")):e.resizable,i.row=parseInt(i.element.attr("data-row"))||e.row,i.sizeX=parseInt(i.element.attr("data-size-x"))||e.sizeX,i.sizeY=parseInt(i.element.attr("data-size-y"))||e.sizeY)),(!i.element||i.element.length<1)&&(i.element=t("<div>",{html:e.content})),i.element.addClass("widget")},Cuic.Grid.Widget.prototype.isDragging=function(){return this.element.hasClass("dragging")},Cuic.Grid.Widget.prototype.isResizing=function(){return this.element.hasClass("resizing")},Cuic.Grid.Widget.prototype.options={col:1,content:null,movable:!0,maxSizeX:null,maxSizeY:null,minSizeX:1,minSizeY:1,resizable:!0,row:1,sizeX:1,sizeY:1,target:null}}(jQuery),Cuic.notifications=new Cuic.Collection,Cuic.Notification=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Notification.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className,html:t.content},t)),n=i;return n.addClass("notification"),n.closeTimer=null,n.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:n.options.closeButton,role:"button"}).appendTo(n),n.options.closeable?n.closeButton.show():n.closeButton.hide(),n.on("mouseenter",function(t){clearTimeout(n.closeTimer)}),n.on("mouseleave",function(t){t.currentTarget===n.getElement()&&n.autoClose()}),n.on("click",function(t){Cuic.hasClass(t.target,"btn-close")&&(t.preventDefault(),n.close())}),Cuic.notifications.add(n),i}return _inherits(e,t),_createClass(e,[{key:"autoClose",value:function(){var t=this;clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){t.options.autoClose&&t.close()},this.options.duration)}},{key:"onClosed",value:function(){this.options.autoRemove&&this.remove()}},{key:"onOpen",value:function(){if(this.options.position){var t=this.getParentElement()===document.body;this.css({position:t?"fixed":"absolute"}),this.align(this.options.position)}}},{key:"onOpened",value:function(){this.autoClose()}},{key:"onRemove",value:function(){Cuic.notifications.remove(this)}}]),e}(Cuic.Component),Cuic.Notification.prototype.options={autoClose:!0,autoRemove:!0,className:"notification",closeable:!0,closeButton:"",content:null,duration:2e3,parent:document.body,position:"center",zIndex:10},Cuic.NotificationStack=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.NotificationStack.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className,html:t.content},t)),n=i;if(n.addClass("notification-stack"),n.options.position){var o=n.getParentElement()===document.body;n.css({position:o?"fixed":"absolute"}),n.align(n.options.position)}return i}return _inherits(e,t),_createClass(e,[{key:"onComponentAdded",value:function(t){t instanceof Cuic.Notification&&setTimeout(function(){t.open()},10)}},{key:"onComponentRemoved",value:function(t){t instanceof Cuic.Notification&&t.close()}}]),e}(Cuic.GroupComponent),Cuic.NotificationStack.prototype.options={className:"notification-stack",namespace:"notification-stack",position:"right top",zIndex:10},Cuic.Panel=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Panel.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),n=i;n.addClass("panel"),t.element?(n.header=n.find(".panel-header"),n.title=n.find(".panel-title"),n.content=n.find(".panel-content"),n.footer=n.find(".panel-footer"),n.closeButton=n.find(".panel-header .btn-close")):(n.header=new Cuic.Element("header",{className:"panel-header"}).prependTo(n),n.title=new Cuic.Element("h5",{className:"panel-title",html:t.title}).appendTo(n.header),n.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:n.options.closeButton,role:"button"}).appendTo(n.header),n.content=new Cuic.Element("section",{className:"panel-content",html:t.content}).appendTo(n),n.footer=new Cuic.Element("footer",{className:"panel-footer",html:t.footer}).appendTo(n),t.title||n.header.hide(),t.footer||n.footer.hide());var o=n.getParentElement()===document.body;return n.css({position:o?"fixed":"absolute"}),n.align(n.options.position),n.resizeContent(),Cuic.css(n.getParentElement(),{overflow:"hidden"}),n.options.visible?n.open():n.close(),n.options.maximized&&n.maximize(),n.closeButton&&(n.options.closeable?n.closeButton.show():n.closeButton.hide()),n.on("click",function(t){Cuic.hasClass(t.target,"btn-close")&&(t.preventDefault(),n.close()),Cuic.hasClass(t.target,"btn-toggle")&&(t.preventDefault(),n.toggle())}),Cuic.on("click",document,function(t){var e=n.getElement();t.target===e||Cuic.isParent(e,t.target)||n.options.autoClose&&n.isOpened()}),i}return _inherits(e,t),_createClass(e,[{key:"getBody",value:function(){return this.content}},{key:"getContent",value:function(){return this.content}},{key:"getFooter",value:function(){return this.footer}},{key:"getHeader",value:function(){return this.header}},{key:"onClose",value:function(){var t=this.outerHeight(!0),e=this.outerWidth(!0),i={};Cuic.isPosition("left",this)?(i.left=-e+"px",i.right=""):Cuic.isPosition("right",this)&&(i.right=-e+"px",i.left=""),Cuic.isPosition("bottom",this)?(i.bottom=-t+"px",i.top=""):Cuic.isPosition("top",this)&&(i.top=-t+"px",i.bottom=""),this.css(i)}},{key:"onMinimize",value:function(){var t=this.getElement(),e=t.parentNode,i=t.cloneNode(!0);Cuic.css(i,{height:"auto",width:"auto"});var n=Cuic.calculateAlign(i,this.options.position,e);n.height=Cuic.height(i),n.width=Cuic.width(i),i.remove(),this.isOpened()||(Cuic.isPosition("left",this)?(n.left=-this.outerWidth(!0),n.right=""):Cuic.isPosition("right",this)&&(n.right=-this.outerWidth(!0),n.left=""),Cuic.isPosition("bottom",this)?(n.bottom=-this.outerHeight(!0),n.top=""):Cuic.isPosition("top",this)&&(n.top=-this.outerHeight(!0),n.bottom="")),this.resizeContent(),this.css(n)}},{key:"onOpen",value:function(){this.resizeContent(),this.align(this.options.position)}},{key:"resizeContent",value:function(){var t=this.getParentElement(),e=this.css("display"),i=window.innerHeight;t&&t!==document.body&&(i=Cuic.height(t));var n=Cuic.border(this),o=Cuic.margin(this);i-=o.vertical,i-=n.vertical,this.css({"max-height":i+"px"});var s=i;return this.header instanceof Cuic.Element&&(s-=this.header.outerHeight(!0)),this.footer instanceof Cuic.Element&&(s-=this.footer.outerHeight(!0)),this.content.css({"max-height":s+"px",overflow:"auto"}),this.css({display:e}),this}},{key:"setTitle",value:function(t){return this.title.html(t),this.header.show(),this}}]),e}(Cuic.Component),Cuic.Panel.prototype.options={autoClose:!1,className:"panel",closeable:!0,closeButton:"",parent:null,content:null,css:null,footer:null,maximized:!1,namespace:"panel",position:"left top",title:null,visible:!1,zIndex:1},Cuic.Popup=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Popup.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),n=i;return n.addClass("popup"),n.content=new Cuic.Element("div",{className:"popup-content",html:t.content}).appendTo(n),n.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:n.options.closeButton,role:"button"}).appendTo(n),n.options.closeable?n.closeButton.show():n.closeButton.hide(),n.on("click",function(t){Cuic.hasClass(t.target,"btn-close")&&(t.preventDefault(),n.close())}),Cuic.on("click",document,function(t){var e=n.getElement();t.target===e||Cuic.isParent(e,t.target)||n.options.autoClose&&n.isOpened()&&n.close()}),n.shortcuts={close:new Cuic.Shortcut({element:n,keyCode:Cuic.keys.ESC,callback:function(){n.close()}})},i}return _inherits(e,t),_createClass(e,[{key:"getContent",value:function(){return this.content}},{key:"onClosed",value:function(){this.options.autoRemove&&this.remove()}},{key:"onOpen",value:function(){var t=Cuic.getElement(this.options.target).parentNode;this.appendTo(t),this.anchor(this.options.anchor,this.options.target)}},{key:"setContent",value:function(t){return this.content.setHtml(t),this}}]),e}(Cuic.Component),Cuic.Popup.prototype.options={anchor:"top",autoClose:!0,autoRemove:!1,className:"popup",closeable:!0,closeButton:"",content:null,css:null,namespace:"popup",target:null,zIndex:9},Cuic.Switcher=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Switcher.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className,html:t.content},t)),n=i;return n.addClass("switcher"),n.activeElement=null,n.index=0,n.timer=null,n.goTo(0),n.options.autoStart&&n.start(),i}return _inherits(e,t),_createClass(e,[{key:"first",value:function(){this.goTo(0)}},{key:"getActiveElement",value:function(){return this.activeElement}},{key:"getElementAt",value:function(t){return this.children()[t]}},{key:"getIndex",value:function(){return this.children().indexOf(this.activeElement)}},{key:"goTo",value:function(t){var e=this.children(),i=this.options.repeat;if(t>=e.length?this.index=i?0:e.length-1:t<0?this.index=i?e.length-1:0:this.index=t,this.index!==this.getIndex()){var n=this.isStarted();this.stop(),this.activeElement=e[this.index];for(var o=0;o<e.length;o+=1){var s=Cuic.element(e[o]);this.index===o?(s.addClass("visible"),s.removeClass("hidden")):(s.addClass("hidden"),s.removeClass("visible"))}n&&this.start()}}},{key:"isStarted",value:function(){return null!==this.timer&&void 0!==this.timer}},{key:"last",value:function(){this.goTo(this.children().length-1)}},{key:"next",value:function(){this.goTo(this.index+1)}},{key:"previous",value:function(){this.goTo(this.index-1)}},{key:"start",value:function(){var t=this;this.isStarted()||(this.timer=setInterval(function(){t.next()},this.options.delay))}},{key:"stop",value:function(){this.isStarted()&&(clearInterval(this.timer),this.timer=null)}}]),e}(Cuic.Component),Cuic.Switcher.prototype.options={autoStart:!0,delay:3e3,namespace:"switcher",repeat:!0,target:null},function(t){var e=Cuic.namespace("table");Cuic.Table=function(i){i=Cuic.extend(!0,{onSorted:null,selectedClass:"selected",selectRowOnClick:!1,sortableClass:"sortable",sortColumn:0,sortOrder:"asc",target:null},i);var n=t(i.target);if(n.length>1)throw"Only one table is expected as target";if(0===n.length)throw"Invalid table target";if(!n.is("table"))throw"The target is not a table : "+i.target;var o=n.children("thead"),s=n.children("tbody");n.children("tfoot");i.selectRowOnClick&&s.children("tr").off(e("click")).on(e("click"),function(e){"TD"===e.target.nodeName&&t(this).toggleClass(i.selectedClass)}),n.sort=function(e,n){var a=[];s.children("tr").each(function(){a.push(t(this))});var r=o.find("tr > th").eq(e);if(o.find("tr > th").not(r).removeClass("ascendant descendant sorted"),r.addClass("sorted"),s.find("tr > td").removeClass("sorted"),s.find("tr").each(function(){t(this).children().eq(e).addClass("sorted")}),a.length>1){a.sort(function(t,i){if(void 0!==t&&null!==t&&void 0!==i&&null!==i){var n=t.children("td").eq(e).html(),o=i.children("td").eq(e).html();if("string"==typeof n&&(n=n.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),n>o)return 1;if(n===o)return 0}return-1}),"desc"!==n&&n!=-1||a.reverse();for(var l=0;l<a.length;l+=1)a[l].appendTo(s);"function"==typeof i.onSorted&&i.onSorted(e,n)}};var a=o.find(".default");return a=1===a.length?a:o.find(".sortable:first"),n.sort(a.index(),a.hasClass("descendant")?"desc":"asc"),o.find("tr > ."+i.sortableClass).off(e("click")).on(e("click"),function(e){if(e.currentTarget===e.target){var i,o=t(this),s=o.index();o.hasClass("ascendant")?(o.removeClass("ascendant"),o.addClass("descendant"),i="desc"):(o.removeClass("descendant"),o.addClass("ascendant"),i="asc"),n.sort(s,i)}}),n}}(jQuery),function(t){var e=Cuic.namespace("tabs"),i=0;Cuic.Tabs=function(n){var o=this;n=Cuic.extend(!0,{content:null,defaultTab:0,target:null},n);var s=t(n.target);o.tabs=s.children(".tab"),o.content=t(n.content);var a=o.tabs.filter(".default");1===a.length?o.defaultTab=a.index():(o.defaultTab=n.defaultTab,o.tabs.eq(o.defaultTab).addClass("default")),o.tabs.filter(".default").addClass("active"),o.tabs.each(function(){var e=t(this),n=o.content.find("#"+e.attr("data-content"));e.attr("tabindex",i+=1),e.hasClass("default")||n.hide()}),o.tabs.off(e("focus")).on(e("focus"),function(e){o.selectTab(t(e.currentTarget).index())})},Cuic.Tabs.prototype.disableTab=function(t){return t==this.getActiveTabIndex()&&this.selectPreviousTab(),this.getTab(t).addClass("disabled")},Cuic.Tabs.prototype.enableTab=function(t){return this.getTab(t).removeClass("disabled")},Cuic.Tabs.prototype.getActiveTab=function(){return this.tabs.filter(".active:first")},Cuic.Tabs.prototype.getActiveTabIndex=function(){return this.getActiveTab().index()},Cuic.Tabs.prototype.getTab=function(t){return this.tabs.eq(t)},Cuic.Tabs.prototype.getTabContent=function(t){var e=this.getTab(t);return this.content.find("#"+e.attr("data-content"))},Cuic.Tabs.prototype.selectDefaultTab=function(){return this.selectTab(this.defaultTab)},Cuic.Tabs.prototype.selectNextTab=function(){return this.selectTab(this.getActiveTab().next(":not(.disabled)").index())},Cuic.Tabs.prototype.selectPreviousTab=function(){return this.selectTab(this.getActiveTab().prev(":not(.disabled)").index())},Cuic.Tabs.prototype.selectTab=function(t){var e=this.getTab(t),i=this.getTabContent(t);e.hasClass("disabled")||(this.tabs.removeClass("active"),e.addClass("active"),this.content.children().not(i).hide(),i.stop(!0,!1).fadeIn(200))}}(jQuery),Cuic.tooltips=new Cuic.Collection,Cuic.Tooltip=function(t){function e(t){_classCallCheck(this,e),t=Cuic.extend({},Cuic.Tooltip.prototype.options,t);var i=_possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"div",{className:t.className},t)),n=i;n.addClass("tooltip"),n.attribute=t.attribute,n.followPointer=t.followPointer===!0,n.content=new Cuic.Element("div",{className:"tooltip-content"}).appendTo(n),n.tail=new Cuic.Element("span",{className:"tooltip-tail"}).appendTo(n);var o=Cuic.element(n.options.selector);return Cuic.element(o).on("mouseenter",function(t){var e=Cuic.element(t.currentTarget),i=e.attr("data-tooltip");i&&i.length||(i=e.attr(n.options.attribute)),i&&i.length&&(e.attr(n.attribute,""),e.attr("data-tooltip",i),n.content.setHtml(i),n.options.followPointer?(n.appendTo(document.body),n.anchor(n.options.anchor,[t.pageX,t.pageY])):(n.appendTo(t.target.parentNode),n.anchor(n.options.anchor,t.target),n.refreshTail())),n.open()}),Cuic.element(o).on("mousemove",function(t){n.isOpened()&&(n.options.followPointer?(n.appendTo(document.body),n.anchor(n.options.anchor,[t.pageX,t.pageY])):(n.appendTo(t.target.parentNode),n.anchor(n.options.anchor,t.target),n.refreshTail()))}),Cuic.element(o).on("mouseleave",function(){n.close()}),Cuic.on("click",document,function(t){var e=n.getElement();t.target===e||Cuic.isParent(e,t.target)||n.close()}),Cuic.tooltips.add(n),i}return _inherits(e,t),_createClass(e,[{key:"onClosed",value:function(){this.options.autoRemove&&this.remove()}},{key:"refreshTail",value:function(){switch(this.options.position){case"top":this.tail.removeClass("tail-top tail-left tail-right").addClass("tail-bottom"),this.tail.css({left:"50%",right:"auto",top:"auto",bottom:-this.tail.height()+"px",margin:"0 0 0 "+-this.tail.width()/2+"px"});break;case"bottom":this.tail.removeClass("tail-bottom tail-left tail-right").addClass("tail-top"),this.tail.css({left:"50%",right:"auto",top:-this.tail.height()+"px",bottom:"auto",margin:"0 0 0 "+-this.tail.width()/2+"px"});break;case"right":this.tail.removeClass("tail-top tail-bottom tail-right").addClass("tail-left"),this.tail.css({left:-this.tail.width()+"px",right:"auto",top:"50%",bottom:"auto",margin:-this.tail.height()/2+"px 0 0 0"});break;case"left":this.tail.removeClass("tail-top tail-bottom tail-left").addClass("tail-right"),this.tail.css({left:"auto",right:-this.tail.width()+"px",top:"50%",bottom:"auto",margin:-this.tail.height()/2+"px 0 0 0"})}}},{key:"setContent",value:function(t){return this.content.setHtml(t),this}}]),e}(Cuic.Component),Cuic.Tooltip.prototype.options={anchor:"right bottom",attribute:"title",className:"tooltip",css:null,followPointer:!0,namespace:"tooltip",selector:"[title]",zIndex:10},function(t){var e=Cuic.namespace("tree");Cuic.Tree=function(i){i=Cuic.extend(!0,{collapsed:!0,itemClass:"tree-item",itemContentClass:"tree-item-content",itemNameClass:"tree-item-name",target:null},i);var n=t(i.target);if(1!==n.length)throw new Error("Target not found : "+i.target);var o=n.find("."+i.itemClass);return 0==o.filter(".default").length&&o.first().addClass("default"),o.filter(".default").addClass("active"),i.collapsed?n.find("."+i.itemClass).not(".expanded").not(".default").children("."+i.itemContentClass).hide():n.find(".collapsed").children("."+i.itemContentClass).hide(),o.each(function(){var o=t(this),s=(o.children("."+i.itemNameClass),o.children("."+i.itemContentClass));1==s.length&&o.addClass(s.is(":visible")?"expanded":"collapsed"),o.children("."+i.itemNameClass).off(e("click")).on(e("click"),function(){o.hasClass("disabled")||1===s.length&&(n.find(".active").removeClass("active"),s.is(":visible")?o.removeClass("expanded").addClass("collapsed"):(o.addClass("active"),o.removeClass("collapsed").addClass("expanded")),s.toggle(200))})}),n}}(jQuery);
