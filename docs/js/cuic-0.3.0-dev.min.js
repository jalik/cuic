/*
 * The MIT License (MIT)
 *
 * Copyright (c) 2017 Karl STEIN
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */

"use strict";function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}),function(e,t){if("undefined"!=typeof n)throw"Cuic already exists";if("undefined"==typeof jQuery)throw"jQuery not found";var n={DEBUG:!1,mouseX:0,mouseY:0,addClass:function(e,t){e=this.node(e);for(var n=this.getClasses(e),i=(t||"").split(" "),o=0;o<i.length;o+=1)n.indexOf(i[o])===-1&&n.push(i[o]);return e.className=n.join(" "),n},addEventListener:function(e,t,n){return e=this.node(e),"function"==typeof e.addEventListener?e.addEventListener(t,n):"function"==typeof e.attachEvent?e.attachEvent(t,n):void 0},align:function(e,t,n){return e=this.node(e),this.css(e,this.calculateAlign(e,t,n)),e},anchor:function(e,t,n){return e=this.node(e),this.css(e,this.calculateAnchor(e,t,n)),e},apply:function(e,t,n){if("function"==typeof e)return e.apply(t,n)},autoPixel:function(e){var t=["bottom","left","padding","right","top","max-height","max-width","height","width","margin","margin-bottom","margin-left","margin-right","margin-top","padding","padding-bottom","padding-left","padding-right","padding-top"];for(var n in e)e.hasOwnProperty(n)&&"number"==typeof e[n]&&t.indexOf(n)!==-1&&(e[n]=e[n]+"px");return e},border:function(e){var t=parseInt(this.getComputedStyle(e,"border-bottom-width")),n=parseInt(this.getComputedStyle(e,"border-left-width")),i=parseInt(this.getComputedStyle(e,"border-right-width")),o=parseInt(this.getComputedStyle(e,"border-top-width"));return{bottom:t,horizontal:n+i,left:n,right:i,top:o,vertical:t+o}},calculateAlign:function(e,n,i){var o=this;e=this.node(e),n=n||"",i?(i=this.node(i),"HTML"===i.nodeName&&(i=document.body),i!==e.parentNode&&i.append(e)):i=e.parentNode;var s=this.outerHeight(e,!0),a=this.outerWidth(e,!0),r=this.margin(e),l=this.innerHeight(i),c=this.innerWidth(i),u=this.padding(i),d=i.scrollLeft,h=i.scrollTop,p=-h,f=-d,m={bottom:"",left:"",right:"",top:""};"fixed"===this.css(e,"position")&&(i=t,l=this.innerHeight(i),c=this.innerWidth(i),d=0,h=0,p=0,f=0);var v=function(){return d+(o.width(i)/2-a/2)},g=function(){return h+(o.height(i)/2-s/2)};return a>c&&(m.width=c-(a-this.width(e))),s>l&&(m.height=l-(s-this.height(e))),n.indexOf("bottom")!==-1?m.bottom=Math.max(u.bottom,r.bottom):n.indexOf("top")!==-1?m.top=Math.max(u.top,r.top):m.top=g()+Math.max(u.top,r.top),n.indexOf("left")!==-1?m.left=Math.max(u.left,r.left):n.indexOf("right")!==-1?m.right=Math.max(u.right,r.right):m.left=v()+Math.max(u.left,r.left),m},calculateAnchor:function(e,n,i){n=n||"",e=this.element(e);var o=1,s=1,a={left:i[0],top:i[1]};i instanceof Array&&2===i.length||(i=this.element(i),o=i.outerHeight(),s=i.outerWidth(),a=i.offset());var r=e.outerWidth(!0),l=e.outerHeight(!0),c=parseInt(r/2),u=parseInt(l/2),d=parseInt(s/2),h=parseInt(o/2),p={bottom:"",left:"",right:"",top:""};return n.indexOf("bottom")!==-1?p.top=a.top+o:n.indexOf("top")!==-1?p.top=a.top-l:p.top=a.top+h-u,n.indexOf("left")!==-1?p.left=a.left-r:n.indexOf("right")!==-1?p.left=a.left+s:p.left=a.left+d-c,"fixed"===e.css("position")&&(p.left-=t.scrollX,p.top-=t.scrollY),p},calculateMaximize:function(e){e=this.node(e);var t=e.parentNode,n=this.padding(t),i=this.margin(e),o={bottom:"",height:this.height(t)-i.vertical,left:"",right:"",top:"",width:this.width(t)-i.horizontal};return this.isPosition("right",e)?o.right=n.right:o.left=n.left,this.isPosition("bottom",e)?o.bottom=n.bottom:o.top=n.top,o},calculateMinimize:function(e,t){e=this.node(e),t=t||"";var n=e.cloneNode(!0);this.css(n,{height:"auto",width:"auto"});var i=this.calculateAlign(n,t,e.parentNode);return i.height=this.outerHeight(n),i.width=this.outerWidth(n),n.remove(),i},call:function(){var e=void 0,t=void 0,n=Array.prototype.slice.call(arguments);return n.length>=2?(t=n.shift(),e=n.shift()):n.length>0&&(t=n.shift()),this.apply(t,e,n)},closest:function(e,t){return e=this.node(e),this.element(e.closest(t))},css:function(e,t){if(e=this.node(e),t)if("object"===("undefined"==typeof t?"undefined":_typeof(t))){var n="";this.autoPixel(t);for(var i=0;i<e.style.length;i+=1){var o=e.style[i];if(!(o in t)){var s=e.style[o];"string"==typeof s&&""===s&&(s='""'),n+=o+": "+s+";"}}for(var a in t)if(t.hasOwnProperty(a)){var r=t[a];a in e.style||console.warn('Style "'+a+'" is not supported by element.',e),"string"==typeof r&&""===r&&(r='""'),n+=a+": "+r+";"}e.style=n}else if("string"==typeof t){if(t.indexOf(":")===-1)return e.style[t];e.style=t}return e.style},debug:function(){this.DEBUG&&void 0!==console&&console.log.apply(this,Array.prototype.slice.call(arguments))},element:function(e){return e instanceof this.Element?e:e instanceof HTMLElement?new this.Element(e):e instanceof jQuery?new this.Element(e.get(0)):"string"==typeof e?new this.Element(document.querySelector(e)):e},enterFullScreen:function(e){e=this.node(e),e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()},exitFullScreen:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()},extend:function(){var e=Array.prototype.slice.call(arguments),t=!1,n=e.shift();"boolean"==typeof n&&(t=n,n=e.shift());for(var i=0;i<e.length;i+=1){var o=e[i];if("object"===("undefined"==typeof o?"undefined":_typeof(o))&&null!==o&&void 0!==o&&"object"===("undefined"==typeof n?"undefined":_typeof(n))&&null!==n&&void 0!==n)for(var s in o)o.hasOwnProperty(s)&&(t&&"object"===_typeof(o[s])&&null!==o[s]&&void 0!==o[s]?n[s]=this.extend(n[s],o[s]):n[s]=o[s]);else null!==o&&void 0!==o&&(n=o)}return n},find:function(e,t){t=this.node(t||document);var n=t.querySelectorAll(e);return new this.Set(n,t,e)},getClasses:function(e){return e=this.node(e),e.className.split(" ")},getComputedStyle:function(e,n){return e=this.node(e),t.getComputedStyle(e,null).getPropertyValue(n)},getStylePrefix:function(){var e=document.createElement("div");return""==e.WebkitAnimation?"-webkit-":""==e.MozAnimation?"-moz-":""==e.OAnimation?"-o-":""==e.WebkitTransition?"-webkit-":""==e.MozTransition?"-moz-":""==e.OTransition?"-o-":""},hasClass:function(e,t){e=this.node(e);for(var n=this.getClasses(e),i=(t||"").split(" "),o=i.length>0,s=0;s<i.length;s+=1)if(n.indexOf(i[s])===-1){o=!1;break}return o},height:function(e){e=this.node(e);var t=this.padding(e);return e.clientHeight-t.vertical},innerHeight:function(e){return e=this.node(e),e.clientHeight},innerWidth:function(e){return e=this.node(e),e.clientWidth},isChrome:function(){return!!t.chrome&&!!t.chrome.webstore},isEdge:function(){return!isIE&&!!t.StyleMedia},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isFullScreenEnabled:function(){return(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)===!0},isIE:function(){return!!document.documentMode},isOpera:function(){return!!t.opr&&!!opr.addons||!!t.opera||navigator.userAgent.indexOf(" OPR/")>=0},isParent:function(e,t){e=this.node(e),t=this.node(t);var n=t;do if(n=n.parentNode,n===e)return!0;while(n);return!1},isPosition:function(e,t){t=this.node(t);var n=this.position(t);return e.indexOf("center")!==-1?n.top==n.bottom||n.left==n.right:e.indexOf("bottom")!==-1?n.bottom<n.top:e.indexOf("top")!==-1?n.top<n.bottom:e.indexOf("left")!==-1?n.left<n.right:e.indexOf("right")!==-1&&n.right<n.left},isSafari:function(){return/constructor/i.test(t.HTMLElement)||function(e){return"[object SafariRemoteNotification]"===e.toString()}(!t.safari||safari.pushNotification)},margin:function(e){var t=parseInt(this.getComputedStyle(e,"margin-bottom")),n=parseInt(this.getComputedStyle(e,"margin-left")),i=parseInt(this.getComputedStyle(e,"margin-right")),o=parseInt(this.getComputedStyle(e,"margin-top"));return{bottom:t,horizontal:n+i,left:n,right:i,top:o,vertical:t+o}},maximize:function(e){return e=this.node(e),this.removeClass(e,"minimized"),this.addClass(e,"maximized"),this.css(e,this.calculateMaximize(e)),e},minimize:function(e,t){return e=this.node(e),this.removeClass(e,"maximized"),this.addClass(e,"minimized"),this.css(e,this.calculateMinimize(e,t)),e},namespace:function(e){return function(t,i){return i=n.slug(i),t+".cuic."+e+(i?"."+i:"")}},node:function(e){if(e instanceof HTMLElement)return e;if(e instanceof HTMLDocument)return e;if(e instanceof this.Element)return e.node();if(e instanceof jQuery)return e.get(0);throw new TypeError("element is not supported (HTMLElement, Cuic.Element or jQuery)")},off:function(e,t,n){t=this.node(t);var i=this.whichEvent(e);if(e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(i||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(i||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(n,this,Array.prototype.slice.call(arguments))}return i||console.warn('Event "'+e+'" is not supported by this browser.'),this.removeEventListener(t,i,n)},offset:function(e){return e=this.node(e),{left:e.offsetLeft,top:e.offsetTop}},on:function(e,t,n){t=this.node(t);var i=this.whichEvent(e);if(e.indexOf("animation")!==-1){var o=this.prefixStyle("animation-duration");(i||"animation"in t.style)&&"0s"!=getComputedStyle(t)[o]||this.apply(n,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var s=this.prefixStyle("transition-duration");(i||"transition"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(n,this,Array.prototype.slice.call(arguments))}return i||console.warn('Event "'+e+'" is not supported by this browser.'),this.addEventListener(t,i,n)},once:function(e,t,i){t=this.node(t);var o=this.whichEvent(e);if(e.indexOf("animation")!==-1){var s=this.prefixStyle("animation-duration");(o||"animation"in t.style)&&"0s"!=getComputedStyle(t)[s]||this.apply(i,this,Array.prototype.slice.call(arguments))}else if(e.indexOf("transition")!==-1){var a=this.prefixStyle("transition-duration");(o||"transition"in t.style)&&"0s"!=getComputedStyle(t)[a]||this.apply(i,this,Array.prototype.slice.call(arguments))}o||console.warn('Event "'+e+'" is not supported by this browser.');var r=function e(s){n.removeEventListener(t,o,e),n.apply(i,this,Array.prototype.slice.call(arguments))};return this.addEventListener(t,o,r)},outerHeight:function(e,t){e=this.node(e);var n=this.margin(e);return e.offsetHeight+(t?n.vertical:0)},outerWidth:function(e,t){e=this.node(e);var n=this.margin(e);return e.offsetWidth+(t?n.horizontal:0)},padding:function(e){var t=parseInt(this.getComputedStyle(e,"padding-bottom")),n=parseInt(this.getComputedStyle(e,"padding-left")),i=parseInt(this.getComputedStyle(e,"padding-right")),o=parseInt(this.getComputedStyle(e,"padding-top"));return{bottom:t,horizontal:n+i,left:n,right:i,top:o,vertical:t+o}},position:function(e){var t=parseInt(this.getComputedStyle(e,"bottom")),n=parseInt(this.getComputedStyle(e,"left")),i=parseInt(this.getComputedStyle(e,"right")),o=parseInt(this.getComputedStyle(e,"top"));return{bottom:t,left:n,right:i,top:o}},prefixStyle:function(e){var t=this.getStylePrefix();return"string"==typeof t&&t.length?t+e:e},ready:function(e){document.addEventListener("DOMContentLoaded",e)},removeClass:function(e,t){e=this.node(e);for(var n=this.getClasses(e),i=(t||"").split(" "),o=0;o<i.length;o+=1){var s=n.indexOf(i[o]);s!==-1&&n.splice(s,1)}return e.className=n.join(" "),n},removeEventListener:function(e,t,n){return e=this.node(e),"function"==typeof e.removeEventListener?e.removeEventListener(t,n):"function"==typeof e.detachEvent?e.detachEvent(t,n):void 0},slug:function(e){return"string"==typeof e&&(e=e.replace(/ +/g,"-"),e=e.replace(/[^a-zA-Z0-9_-]+/g,"")),e},toCamelCase:function(e){return e.toLowerCase().replace(/[-_]+/g," ").replace(/[^\w\s]/g,"").replace(/ (.)/g,function(e){return e.toUpperCase()}).replace(/ /g,"")},valueOf:function(e,t){switch("undefined"==typeof e?"undefined":_typeof(e)){case"function":e=e.call(t)}return e},whichEvent:function(e){var t=void 0,n=document.createElement("div"),i={};switch(e){case"transitionend":i={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"}}for(t in i)if(void 0!==n.style[t])return i[t];if(void 0!==document[e]||void 0!==document["on"+e])return e},width:function(e){e=this.node(e);var t=this.padding(e);return e.clientWidth-t.horizontal}};t&&(t.Cuic=n),e(document).ready(function(){n.on("mousemove",document,function(e){n.mouseX=e.clientX,n.mouseY=e.clientY}),e("html,body").css({height:"100%",minHeight:"100%"})})}(jQuery,window),Cuic.Benchmark=function(){function e(){_classCallCheck(this,e);var t=this,n=null,i=null,o=0;t.getTime=function(){return n&&i?i-n:n?Date.now()-n:0},t.isStarted=function(){return"number"==typeof n},t.reset=function(){o=0,n=null,i=null},t.start=function(){n=Date.now(),i=null},t.stop=function(){n=null,i=Date.now()}}return e}(),Cuic.Collection=function(){function e(t){_classCallCheck(this,e),this.events=new Cuic.Events,this.values=t instanceof Array?t:[],this.length=this.values.length}return _createClass(e,[{key:"add",value:function(e){this.values.push(e),this.length+=1,this.events.trigger("added",e)}},{key:"each",value:function(e){for(var t=0;t<this.values.length;t+=1)e.call(this,this.values[t])}},{key:"get",value:function(e){return this.values[e]}},{key:"indexOf",value:function(e){return this.values.indexOf(e)}},{key:"onAdded",value:function(e){return this.events.on("added",e),this}},{key:"onRemoved",value:function(e){return this.events.on("removed",e),this}},{key:"remove",value:function(e){var t=this.values.indexOf(e);t!==-1&&(this.values.splice(t,1),this.length-=1,this.events.trigger("removed",e))}},{key:"size",value:function(){return this.values.length}}]),e}(),Cuic.Events=function(){function e(t){_classCallCheck(this,e),this.callbacks={},this.context=t}return _createClass(e,[{key:"clear",value:function(){this.callbacks=[]}},{key:"off",value:function(e,t){if(this.callbacks[e]instanceof Array)for(var n=this.callbacks[e],i=0;i<n.length;i+=1)if(n[i]===t){n.splice(i,1);break}}},{key:"on",value:function(e,t){this.callbacks[e]instanceof Array||(this.callbacks[e]=[]),this.callbacks[e].push(t)}},{key:"once",value:function(e,t){var n=arguments,i=this;this.callbacks[e]instanceof Array||(this.callbacks[e]=[]);var o=function o(){var s=Array.prototype.slice.call(n),a=s.shift();t.apply(a,s),i.off(e,o)};this.callbacks[e].push(o)}},{key:"trigger",value:function(e){if(this.callbacks[e]instanceof Array)for(var t=this.callbacks[e],n=Array.prototype.slice.call(arguments,1),i=0;i<t.length;i+=1)t[i].apply(this.context,n)}}]),e}(),function(e){var t=["checkbox","color","date","datetime","email","hidden","month","number","password","radio","range","search","tel","text","time","url","week"];Cuic.checkForm=function(t,n){function i(t){"function"==typeof n.onError&&(t=e(t),t.addClass(n.errorClass),n.onError.call(t,t.attr("name"),t.val()),o+=1)}t=e(t),n=Cuic.extend(!0,{errorClass:"error",filter:null,onError:null},n);var o=0;return t.find("."+n.errorClass).removeClass(n.errorClass),t.find("."+n.errorClass).removeClass(n.errorClass),t.find("[name]").not(":disabled").each(function(){var e=this.value;Cuic.isField(this)&&Cuic.isNodeFiltered(this,n.filter)&&(this.required&&void 0!==e&&null!==e?i(this):this.pattern&&!new RegExp(this.pattern).test(e)&&i(this))}),0===o},Cuic.getFields=function(t,n){var i={};return t=e(t),n=Cuic.extend(!0,{dynamicTyping:!0,filter:null,ignoreButtons:!0,ignoreEmpty:!1,ignoreUnchecked:!1,smartTyping:!0},n),t.find("[name]").not(":disabled").each(function(){var e=this,t=e.name,o=e.type,s=["button","reset","submit"].indexOf(o)!==-1,a=["checkbox","radio"].indexOf(o)!==-1;if(Cuic.isField(e)&&Cuic.isNodeFiltered(e,n.filter)&&(!n.ignoreButtons||!s)&&(!n.ignoreUnchecked||!a||e.checked)){var r=Cuic.getFieldValue(e,n);if(null!==r&&void 0!==r||!n.ignoreEmpty){if(e.multiple===!0&&(t=t.replace(/\[]$/g,"")),t.indexOf("[")!==-1){var l=t.substr(0,t.indexOf("[")),c=t.substr(t.indexOf("["));return void(i[l]=Cuic.resolveDimensionsTree(c,i[l],r))}a?e.checked?i[t]=r:["true","TRUE"].indexOf(r)!==-1?i[t]=!1:void 0===i[t]&&(i[t]=null):i[t]=r}}}),i},Cuic.resolveDimensionsTree=function(e,t,n){if(0===e.length)return n;if(void 0===t||null===t){var i=e.match(/\[/g).length,o=e.match(/]/g).length;if(i>o)throw new SyntaxError("Missing closing ']' in '"+e+"'");if(o<i)throw new SyntaxError("Missing opening '[' in '"+e+"'")}var s=e.indexOf("[");if(s!==-1){var a=e.indexOf("]",s+1),r=e.substr(a+1),l=e.substring(s+1,a),c=l.length;if(c&&/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(l)){void 0!==t&&null!==t||(t={});var u=this.resolveDimensionsTree(r,t[l],n);void 0!==u&&(t[l]=u)}else if(void 0!==t&&null!==t||(t=[]),0===c){var d=this.resolveDimensionsTree(r,t[l],n);void 0!==d&&t.push(d)}else if(/^[0-9]+$/.test(l)){var h=this.resolveDimensionsTree(r,t[l],n);void 0!==h&&(t[parseInt(l)]=h)}}return t},Cuic.getFieldValue=function(t,n){n=Cuic.extend({dynamicTyping:!0,smartTyping:!0},n);var i=t.value,o=t.nodeName.toUpperCase();switch(o){case"INPUT":var s="string"==typeof t.type?t.type.toLowerCase():"";["checkbox","radio"].indexOf(s)!==-1?i=t.checked?"on"===i||i:void 0:["button","reset","submit"].indexOf(s)!==-1||["number"].indexOf(s)!==-1&&n.smartTyping&&(i=Cuic.parseValue(i));break;case"SELECT":t.multiple&&(i=[],e(t).find("option").each(function(){var e=this;e.selected&&i.push(e.value)}));break;case"TEXTAREA":}if(n.dynamicTyping&&null!==i&&void 0!==i)if(i instanceof Array)for(var a=0;a<i.length;a+=1)i[a]=Cuic.parseValue(i[a]);else i=Cuic.parseValue(i);return i},Cuic.isField=function(e){var n=e.nodeName.toUpperCase();return"TEXTAREA"===n||"SELECT"===n||"INPUT"===n&&t.indexOf(e.type)!==-1},Cuic.isNodeFiltered=function(e,t){return void 0===t||null===t||t instanceof Array&&t.indexOf(e.name)!==-1||"function"==typeof t&&t.call(e,e.name)},Cuic.parseBoolean=function(e){return!!/^true$/i.test(e)||!/^false$/i.test(e)&&null},Cuic.parseValue=function(e){if("string"==typeof e){e=e.trim();var t=this.parseBoolean(e);if(t===!0||t===!1)return t;if(/^-?[0-9]+$/.test(e))return parseInt(e);if(/^-?[0-9]+\.[0-9]+$/.test(e))return parseFloat(e)}return""===e?null:e},Cuic.serializeQueryParams=function(e){var t="";if(null!=e)if("string"==typeof e)t=e;else if("object"===("undefined"==typeof e?"undefined":_typeof(e))){var n=[];for(var i in e)e.hasOwnProperty(i)&&null!=e[i]&&(n.push("&"),n.push(encodeURIComponent(i).trim()),n.push("="),n.push(encodeURIComponent(e[i]).trim()));n.length>0&&(n.unshift(n),t=n.join(""))}return t}}(jQuery),Cuic.Shortcut=function(){function e(t){_classCallCheck(this,e);var n=this;if(t=Cuic.extend({},Cuic.Shortcut.prototype.options,t),n.options=t,n.options.element=Cuic.node(t.element),"function"!=typeof n.options.callback)throw new TypeError("Shortcut.options.callback is not a function.");n.options.active&&n.activate()}return _createClass(e,[{key:"activate",value:function(){var e=this,t=this.options,n=this.node();Cuic.on("keydown",n,function(i){if((t.keyCode===i.keyCode||t.key===i.key||t.key===i.code)&&t.altKey===i.altKey&&t.ctrlKey===i.ctrlKey&&t.shiftKey===i.shiftKey)return i.preventDefault(),i.stopPropagation(),t.callback.call(e,n,i),!1})}},{key:"deactivate",value:function(){Cuic.off("keydown",this.node(),this.options.callback)}},{key:"node",value:function(){return Cuic.node(this.options.element)}}]),e}(),Cuic.Shortcut.prototype.options={active:!0,altKey:!1,callback:null,ctrlKey:!1,element:document.body,key:null,keyCode:null,shiftKey:!1},Cuic.keys={BACKSPACE:8,DEL:46,DOWN:40,ENTER:13,ESC:27,INSERT:45,LEFT:37,MINUS:109,PAGE_UP:33,PAGE_DOWN:34,PLUS:107,RIGHT:39,TAB:9,UP:38},Cuic.Element=function(){function e(t,n,i){var o=this;_classCallCheck(this,e);var s=this;if(n=Cuic.extend({},n),s.options=Cuic.extend({},Cuic.Element.prototype.options,i),s.options.element)s.element=Cuic.node(s.options.element);else if("string"==typeof t)s.element=document.createElement(t);else if(t instanceof HTMLElement)s.element=t;else if(t instanceof Cuic.Element)s.element=t.node();else if(t instanceof Cuic.Set)s.element=t.get(0);else{if(!(t instanceof jQuery))throw new TypeError("Cannot create element.");s.element=t.get(0)}for(var a in n)if(n.hasOwnProperty(a)){var r=n[a];if("className"===a){s.addClass(r);continue}if("css"===a){s.css(r);continue}null!==r&&void 0!==r&&(void 0!==s.element[a]?s.element[a]=r:"html"===a?s.element.innerHTML=r:"text"===a&&(s.element.innerText=r))}if("number"==typeof s.options.zIndex&&s.css({"z-index":parseInt(s.options.zIndex)}),s.options.css&&s.css(s.options.css),s.options.debug&&s.addClass("debug"),s.events=new Cuic.Events(this),s.events.on("aligned",function(){o.addPositionClass(o.options.position,s.options.namespace)}),s.events.on("anchored",function(){o.addPositionClass(o.options.anchor,s.options.namespace)}),s.options.parent){var l=null;if("string"==typeof s.options.parent){var c=Cuic.find(s.options.parent);c.length&&(l=c[0])}else l=Cuic.node(s.options.parent);l&&s.appendTo(l)}s.options.position&&s.element.parentNode&&s.align(s.options.position)}return _createClass(e,[{key:"addClass",value:function(e){return Cuic.addClass(this.node(),e),this}},{key:"addPositionClass",value:function(e,t){var n=function(e){return t?t+"-"+e:e};return this.removeClass([n("bottom"),n("left"),n("right"),n("top")].join(" ")),e.indexOf("bottom")!==-1?this.addClass(n("bottom")):e.indexOf("top")!==-1&&this.addClass(n("top")),e.indexOf("left")!==-1?this.addClass(n("left")):e.indexOf("right")!==-1&&this.addClass(n("right")),this}},{key:"align",value:function(e){return Cuic.align(this.node(),e),this.options.position=e,this.events.trigger("aligned",e),this}},{key:"anchor",value:function(e,t){return t=t||this.options.target,Cuic.anchor(this.node(),e,t),this.options.anchor=e,this.options.target=t,this.events.trigger("anchored",e),this}},{key:"append",value:function(e){return this.node().append(Cuic.node(e)),this}},{key:"appendTo",value:function(e){return Cuic.node(e).append(this.node()),this}},{key:"attr",value:function(e,t){return void 0===t?this.node()[e]:void(e in this.node()&&(this.node()[e]=t))}},{key:"border",value:function(){return Cuic.border(this)}},{key:"children",value:function e(t){for(var e=[],n=this.node().children||this.node().childNodes,i=0;i<n.length;i+=1)n[i]instanceof HTMLElement&&(t&&!n[i].matches(t)||e.push(n[i]));return new Cuic.Set(e,this.node(),t)}},{key:"css",value:function(e){return Cuic.css(this.node(),e)}},{key:"data",value:function(e,t){var n=this.node().dataset;return void 0===t?e?n[e]:n:void(n[Cuic.toCamelCase(e)]=t)}},{key:"disable",value:function(){return this.node().disabled=!0,this.addClass("disabled"),this.events.trigger("disabled"),this}},{key:"enable",value:function(){return this.node().disabled=!1,this.removeClass("disabled"),this.events.trigger("enabled"),this}},{key:"find",value:function(e){return Cuic.find(e,this.node())}},{key:"getClasses",value:function(){return Cuic.getClasses(this.node())}},{key:"hasClass",value:function(e){return Cuic.hasClass(this.node(),e)}},{key:"height",value:function(){return Cuic.height(this)}},{key:"hide",value:function(){return this.css({display:"none"}),this.events.trigger("hidden"),this}},{key:"html",value:function(e){return void 0!==e?(e&&"object"===("undefined"==typeof e?"undefined":_typeof(e))&&(e instanceof Cuic.Element?e=e.node().outerHTML:e instanceof jQuery&&(e=e[0].outerHTML)),this.node().innerHTML=e,this):this.node().innerHTML}},{key:"innerHeight",value:function(){return Cuic.innerHeight(this)}},{key:"innerWidth",value:function(){return Cuic.innerWidth(this)}},{key:"insertAfter",value:function(e){e=Cuic.node(e);var t=this.node().parentNode;return t.insertBefore(e,this.node().nextSibling),this}},{key:"insertBefore",value:function(e){e=Cuic.node(e);var t=this.node().parentNode;return t.insertBefore(e,this.node()),this}},{key:"isEnabled",value:function(){return this.node().disabled!==!0||!this.hasClass("disabled")}},{key:"isRemoved",value:function(){var e=this.node().parentNode;return null===e||void 0===e}},{key:"margin",value:function(){return Cuic.margin(this)}},{key:"node",value:function(){return this.element}},{key:"off",value:function(e,t){return Cuic.off(e,this.node(),t),this}},{key:"offset",value:function(){return Cuic.offset(this.node())}},{key:"on",value:function(e,t){return Cuic.on(e,this.node(),t),this}},{key:"once",value:function(e,t){return Cuic.once(e,this.node(),t),this}},{key:"onAligned",value:function(e){return this.events.on("aligned",e),this}},{key:"onAnchored",value:function(e){return this.events.on("anchored",e),this}},{key:"onRemoved",value:function(e){return this.events.on("removed",e),this}},{key:"outerHeight",value:function(e){return Cuic.outerHeight(this,e)}},{key:"outerWidth",value:function(e){return Cuic.outerWidth(this,e)}},{key:"padding",value:function(){return Cuic.padding(this)}},{key:"parent",value:function e(){var e=this.parentNode();return e?Cuic.element(e):null}},{key:"parentNode",value:function(){return this.node().parentNode}},{key:"position",value:function(){return Cuic.position(this.node())}},{key:"prepend",value:function(e){return this.node().prepend(Cuic.node(e)),this}},{key:"prependTo",value:function(e){return Cuic.node(e).prepend(this.node()),this}},{key:"remove",value:function(){return this.node().remove(),this.events.trigger("removed"),this}},{key:"removeClass",value:function(e){return Cuic.removeClass(this.node(),e),this}},{key:"show",value:function(){return this.css({display:""}),this.events.trigger("showed"),this}},{key:"text",value:function(e){return void 0!==e?(this.node().innerText=e,this):this.node().innerText}},{key:"val",value:function(e){return void 0!==e?(this.node().value=e,this):this.node().value}},{key:"width",value:function(){return Cuic.width(this)}}]),e}(),Cuic.Element.prototype.options={className:null,namespace:null,parent:null},Cuic.Component=function(e){function t(e,n,i){_classCallCheck(this,t),i=Cuic.extend({},Cuic.Component.prototype.options,i);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i)),s=o;return s.addClass("component"),s.options.closable&&s.addClass("closable"),"boolean"==typeof s.options.opened&&(s.options.opened?s.open():(s.hide(),s.close())),s.options.maximized&&s.maximize(),o}return _inherits(t,e),_createClass(t,[{key:"close",value:function(e){var t=this;return this.events.trigger("close"),this.removeClass("opened"),this.addClass("closed"),this.once("transitionend",function(n){t.isOpened()||(t.events.trigger("closed",n),t.hide(),"function"==typeof e&&e.call(t,n))}),this}},{key:"isMaximized",value:function(){return this.hasClass("maximized")}},{key:"isMinimized",value:function(){return this.hasClass("minimized")}},{key:"isOpened",value:function(){return this.hasClass("opened")}},{key:"maximize",value:function(e){var t=this;this.events.trigger("maximize"),this.removeClass("minimized"),this.addClass("maximized"),Cuic.maximize(this),this.once("transitionend",function(n){t.isMaximized()&&(t.events.trigger("maximized",n),"function"==typeof e&&e.call(t,n))})}},{key:"minimize",value:function(e){var t=this;this.events.trigger("minimize"),this.removeClass("maximized"),this.addClass("minimized"),Cuic.minimize(this,this.options.position),this.once("transitionend",function(n){t.isMinimized()&&(t.events.trigger("minimized",n),"function"==typeof e&&e.call(t,n))})}},{key:"onClose",value:function(e){this.events.on("close",e)}},{key:"onClosed",value:function(e){this.events.on("closed",e)}},{key:"onMaximize",value:function(e){this.events.on("maximize",e)}},{key:"onMaximized",value:function(e){this.events.on("maximized",e)}},{key:"onMinimize",value:function(e){this.events.on("minimize",e)}},{key:"onMinimized",value:function(e){this.events.on("minimized",e)}},{key:"onOpen",value:function(e){this.events.on("open",e)}},{key:"onOpened",value:function(e){this.events.on("opened",e)}},{key:"open",value:function(e){var t=this;return this.show(),this.events.trigger("open"),this.removeClass("closed"),this.addClass("opened"),this.once("transitionend",function(n){t.isOpened()&&(t.events.trigger("opened",n),"function"==typeof e&&e.call(t,n))}),this}},{key:"toggle",value:function(e){return this.isOpened()?this.close(e):this.open(e),this}}]),t}(Cuic.Element),Cuic.Component.prototype.options={className:null,css:null,parent:null},Cuic.Group=function(e){function t(e,n,i){_classCallCheck(this,t),i=Cuic.extend({},Cuic.Group.prototype.options,i);var o=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,Cuic.extend({className:i.className,role:"group"},n),i)),s=o;return s.addClass("component-group"),s.components=new Cuic.Collection,o}return _inherits(t,e),_createClass(t,[{key:"addComponent",value:function(e){if(!(e instanceof Cuic.Element))throw new TypeError("Cannot add non component to a Group.");return Cuic.isPosition("top",this.node())?e.prependTo(this):e.appendTo(this),this.components.add(e),this}},{key:"onComponentAdded",value:function(e){return this.components.onAdded(e),this}},{key:"onComponentRemoved",value:function(e){return this.components.onRemoved(e),this}},{key:"removeComponent",value:function(e){return this.components.remove(e),this}}]),t}(Cuic.Element),Cuic.Group.prototype.options={className:"group",namespace:"group"},Cuic.Hook=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Hook.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;i.addClass("hook"),i.css({position:"relative",top:"",width:""}),i.space=new Cuic.Element("div",{className:"hook-space"});var o=i.offset(),s=function(){var e=i.outerHeight(!0)<=window.screen.availHeight;if(e)if(i.options.fixed)i.hook();else{var t=i.margin();window.scrollY>o.top-t.top?i.hook():i.unhook()}else i.unhook()};return s(),window.onscroll=function(){s()},window.onresize=function(){s()},n}return _inherits(t,e),_createClass(t,[{key:"hook",value:function(){var e=this;if(console.log("hook"),"fixed"!==e.css("position")){var t=e.offset(),n=e.margin();e.options.fixed&&(e.options.offsetTop=t.top),e.space.css({display:e.css("display"),float:e.css("float"),height:e.outerHeight(),width:e.outerWidth(),"margin-bottom":n.bottom,"margin-left":n.left,"margin-right":n.right,"margin-top":n.top}),e.insertBefore(e.space),e.space.show(),e.css({position:"fixed",left:t.left,top:e.options.offsetTop,height:e.space.height(),width:e.space.width(),zIndex:e.options.zIndex}),e.addClass("hooked"),e.onHook(e);
}}},{key:"isHooked",value:function(){return this.hasClass("hooked")}},{key:"onHook",value:function(){}},{key:"onUnhook",value:function(){}},{key:"unhook",value:function(){var e=this;console.log("unhook"),"relative"!==e.css("position")&&(e.space.hide(),e.css({position:"relative",bottom:"",left:"",right:"",top:"",width:""}),e.removeClass("hooked"),e.onUnhook(e))}}]),t}(Cuic.Element),Cuic.Hook.prototype.options={fixed:!0,hookedClass:"hooked",zIndex:4},Cuic.Movable=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Movable.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;return i.addClass("movable"),"static"===i.css("position")&&i.css({position:"relative"}),i.handles=new Cuic.Collection,i.addMoveHandle(e.handle||i.node()),n}return _inherits(t,e),_createClass(t,[{key:"addMoveHandle",value:function(e){var t=this;return t.handles.add(e),Cuic.addClass(e,"movable-handle"),Cuic.on("mousedown",e,function(e){if((!t.options.rootOnly||e.target===e.currentTarget)&&t.events.trigger("moveStart",e)!==!1){e.preventDefault(),t.addClass("moving");var n=t.parent(),i=t.position(),o=e.clientX,s=e.clientY,a=function(e){if(t.events.trigger("move",e)!==!1){var a=t.outerHeight(!0),r=t.outerWidth(!0),l={},c=0,u=0,d=n.width(),h=n.height();switch(t.css("position")){case"absolute":var p=n.padding();d+=p.horizontal,h+=p.vertical}var f=e.clientX-o,m=e.clientY-s,v=i.left+f,g=i.top+m;v<c?v=c:v+r>d&&(v=d-r),g<u?g=u:g+a>h&&(g=h-a),t.options.horizontal&&(l.left=v,l.right=""),t.options.vertical&&(l.top=g,l.bottom=""),t.css(l)}};Cuic.on("mousemove",document,a),Cuic.once("mouseup",document,function(e){Cuic.off("mousemove",document,a),t.removeClass("moving"),t.events.trigger("moveEnd",e)})}}),t}},{key:"onMove",value:function(e){return this.events.on("move",e),this}},{key:"onMoveEnd",value:function(e){return this.events.on("moveEnd",e),this}},{key:"onMoveStart",value:function(e){return this.events.on("moveStart",e),this}}]),t}(Cuic.Element),Cuic.Movable.prototype.options={className:"movable",handle:null,handleClassName:"movable-handle",horizontal:!0,namespace:"movable",rootOnly:!0,vertical:!0},Cuic.Resizable=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Resizable.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;return i.addClass("resizable"),"static"===i.css("position")&&i.css("position","relative"),i.bottomHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-s",css:{height:e.handleSize}}).appendTo(i),i.rightHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-e",css:{width:e.handleSize}}).appendTo(i),i.bottomRightHandle=new Cuic.Element("div",{className:"resize-handle resize-handle-se",css:{height:e.handleSize,width:e.handleSize}}).appendTo(i),i.handles=new Cuic.Collection([i.rightHandle,i.bottomHandle,i.bottomRightHandle]),i.horizontalHandles=new Cuic.Collection([i.rightHandle,i.bottomRightHandle]),i.verticalHandles=new Cuic.Collection([i.bottomHandle,i.bottomRightHandle]),i.handles.each(function(e){e.on("mousedown",function(e){if(i.events.trigger("resizeStart",e)!==!1){e.preventDefault(),i.addClass("resizing");var t=i.parent(),o=e.clientX,s=e.clientY,a=i.outerHeight(),r=i.outerWidth(),l=e.currentTarget,c=a/r,u=function(e){if(i.events.trigger("resize",e)!==!1){var u={};if(i.options.horizontal)for(var d=0;d<i.horizontalHandles.length;d+=1)if(i.horizontalHandles.get(d).node()===l){var h=e.clientX-o,p=r+h;(!Number(n.options.maxWidth)||p<=n.options.maxWidth)&&(!Number(n.options.minWidth)||p>=n.options.minWidth)&&(u.width=p);break}if(i.options.vertical)for(var f=0;f<i.verticalHandles.length;f+=1)if(i.verticalHandles.get(f).node()===l){var m=e.clientY-s,v=a+m;(!Number(n.options.maxHeight)||v<=n.options.maxHeight)&&(!Number(n.options.minHeight)||v>=n.options.minHeight)&&(u.height=v);break}if(u.width){var g=t.width(),C=t.padding(),y=i.margin(),b=g;switch(i.css("position")){case"absolute":b+=C.horizontal,b-=y.horizontal;break;case"relative":b-=y.horizontal}u.width>b&&(u.width=b)}if(u.height){var k=t.innerHeight(),x=t.padding(),w=i.margin(),z=k-x.vertical;switch(i.css("position")){case"absolute":z+=x.vertical,z-=w.vertical;break;case"relative":z-=w.vertical}u.height>z&&(u.height=z)}i.options.keepRatio&&(u.height?u.width=u.height/c:u.width&&(u.height=u.width*c)),i.css(u)}};Cuic.on("mousemove",document,u),Cuic.once("mouseup",document,function(e){Cuic.off("mousemove",document,u),i.removeClass("resizing"),i.events.trigger("resizeEnd",e)})}})}),n}return _inherits(t,e),_createClass(t,[{key:"onResize",value:function(e){return this.events.on("resize",e),this}},{key:"onResizeEnd",value:function(e){return this.events.on("resizeEnd",e),this}},{key:"onResizeStart",value:function(e){return this.events.on("resizeStart",e),this}}]),t}(Cuic.Element),Cuic.Resizable.prototype.options={className:"resizable",handleSize:10,horizontal:!0,keepRatio:!1,maxHeight:null,maxWidth:null,minHeight:1,minWidth:1,namespace:"resizable",vertical:!0},Cuic.Selectable=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Selectable.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;return i.addClass("selectable"),i.options.selected&&i.addClass("selected"),i.on("click",function(){i.hasClass("selected")?i.deselect():i.select()}),n}return _inherits(t,e),_createClass(t,[{key:"deselect",value:function(e){var t=this;return this.removeClass("selected"),this.once("transitionend",function(n){t.isSelected()||(t.events.trigger("deselected",n),"function"==typeof e&&e.call(t,n))}),this}},{key:"isSelected",value:function(){return(this.hasClass("selected")||this.attr("selected"))===!0}},{key:"onDeselected",value:function(e){return this.events.on("deselected",e),this}},{key:"onSelected",value:function(e){return this.events.on("selected",e),this}},{key:"select",value:function(e){var t=this;return this.addClass("selected"),this.once("transitionend",function(n){t.isSelected()&&(t.events.trigger("selected",n),"function"==typeof e&&e.call(t,n))}),this}}]),t}(Cuic.Element),Cuic.Selectable.prototype.options={className:"selectable",namespace:"selectable"},Cuic.Set=function(){function e(t,n,i){_classCallCheck(this,e),this.length=0,this.context=n,this.selector=i;for(var o=0;o<t.length;o+=1)if(t.hasOwnProperty(o)){var s=t[o];s instanceof HTMLElement&&(s=Cuic.element(s)),this[this.length]=s,this.length+=1}}return _createClass(e,[{key:"each",value:function(e){for(var t=0;t<this.length;t+=1)e.call(this,this[t])}},{key:"eq",value:function(e){return this[e]}},{key:"filter",value:function(e){var t=[];return"string"==typeof e&&this.each(function(n){n.node().matches(e)&&t.push(n)}),new Cuic.Set(t,this.context,e)}},{key:"find",value:function(e){var t=[];return"string"==typeof e&&this.each(function(n){n.find(e).each(function(e){t.push(e)})}),new Cuic.Set(t,this.context,e)}},{key:"first",value:function(){return this.length?this[0]:null}},{key:"get",value:function(e){return this[e].node()}},{key:"index",value:function(e){for(var t=0;t<this.length;t+=1)if(this.eq(t)===e||this.get(t)===e)return t;return-1}},{key:"last",value:function(){return this.length?this[this.length-1]:null}},{key:"not",value:function(e){var t=[];return"string"==typeof e&&this.each(function(n){n.node().matches(e)||t.push(n)}),new Cuic.Set(t,this.context)}}]),e}(),Cuic.Button=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Button.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"button",{className:e.className,disabled:!1,html:e.label,title:e.title,type:e.type},e)),i=n;return i.addClass("btn"),"number"==typeof e.shortcut&&(i.shortcut=new Cuic.Shortcut({keyCode:e.shortcut,target:i.element,callback:function(){i.node().click()}})),n}return _inherits(t,e),t}(Cuic.Component),Cuic.Button.prototype.options={className:"btn btn-default",disabled:!1,shortcut:null,title:null,type:"button"};var dialogZIndex=0;Cuic.dialogs=new Cuic.Collection,Cuic.dialogs.onAdded(function(){dialogZIndex+=1}),Cuic.dialogs.onRemoved(function(){dialogZIndex-=1}),Cuic.Dialog=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Dialog.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className,role:"dialog"},e)),i=n;i.addClass("dialog");var o=i.parentNode()===document.body;if(i.css({position:o?"fixed":"absolute"}),i.fader=new Cuic.Fader({className:"fader dialog-fader",autoClose:!1,autoRemove:!1}).appendTo(i.options.parent),i.header=new Cuic.Element("header",{className:"dialog-header",css:{display:null!=i.options.title?"block":"none"}}).appendTo(i),i.title=new Cuic.Element("h3",{className:"dialog-title",html:i.options.title}).appendTo(i.header),i.content=new Cuic.Element("section",{className:"dialog-content",html:i.options.content}).appendTo(i),i.footer=new Cuic.Element("footer",{className:"dialog-footer",css:{display:null!=i.options.buttons?"block":"none"}}).appendTo(i),i.buttons=new Cuic.Group("div",{className:"btn-group"}).appendTo(i.footer),i.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:i.options.closeButton,role:"button"}).appendTo(i.header),i.options.buttons instanceof Array)for(var s=0;s<i.options.buttons.length;s+=1)i.addButton(i.options.buttons[s]);parseFloat(e.contentHeight)>0&&content.css({height:e.contentHeight}),parseFloat(e.contentWidth)>0&&content.css({width:e.contentWidth}),i.fader.on("click",function(){i.options.autoClose&&i.close()}),i.on("click",function(e){Cuic.hasClass(e.target,"btn-close")&&(e.preventDefault(),i.close())});var a=function(e){var t=i.node();e.target===t||Cuic.isParent(t,e.target)||i.options.autoClose&&i.close()};return Cuic.on("click",document,a),i.onRemoved(function(){Cuic.off("click",document,a)}),i.movable=new Cuic.Movable({enabled:i.options.movable,element:i.node(),handle:i.title,rootOnly:!1}),i.shortcuts={close:new Cuic.Shortcut({element:i,keyCode:Cuic.keys.ESC,callback:function(){i.close()}})},Cuic.dialogs.add(i),i.onClose(function(){i.fader.options.autoRemove=i.options.autoRemove,i.fader.close()}),i.onClosed(function(){i.options.autoRemove&&i.remove()}),i.onOpen(function(){var e=i.options.zIndex+dialogZIndex;i.css({"z-index":e}),i.resizeContent(),i.options.modal&&(i.css({"z-index":e+1}),i.fader.css({"z-index":e}),i.fader.open()),i.options.maximized?i.maximize():i.align(i.options.position);var t=i.buttons.children();t.length>0&&t.last().node().focus()}),i.onOpened(function(e){}),i.onRemoved(function(){Cuic.dialogs.remove(i)}),n}return _inherits(t,e),_createClass(t,[{key:"addButton",value:function(e){var t=this;return e instanceof Cuic.Button||!function(){var n=e.callback;e=new Cuic.Button({className:"btn btn-default",label:e.label}),"function"==typeof n?e.on("click",function(e){n.call(t,e)}):"close"===n&&e.on("click",function(){t.close()})}(),this.buttons.addComponent(e),this.buttons.children().length>0?this.footer.show():this.footer.hide(),e}},{key:"getBody",value:function(){return this.content}},{key:"getContent",value:function(){return this.content}},{key:"getFooter",value:function(){return this.footer}},{key:"getHeader",value:function(){return this.header}},{key:"resizeContent",value:function(){var e=this.parentNode(),t=this.css("display"),n=window.innerHeight;e&&e!==document.body&&(n=Cuic.height(e));var i=this.border(),o=this.margin();n-=o.vertical,n-=i.vertical,this.css({"max-height":n});var s=n;return this.header instanceof Cuic.Element&&(s-=this.header.outerHeight(!0)),this.footer instanceof Cuic.Element&&(s-=this.footer.outerHeight(!0)),this.content.css({"max-height":s,overflow:"auto"}),this.css({display:t}),this}},{key:"setContent",value:function(e){return this.content.html(e),this}},{key:"setFooter",value:function(e){return this.footer.html(e),this}},{key:"setTitle",value:function(e){return this.title.html(e),this}}]),t}(Cuic.Component),Cuic.Dialog.prototype.options={autoClose:!1,autoRemove:!0,autoResize:!0,buttons:[],className:"dialog",closable:!0,closeButton:null,content:null,contentHeight:null,contentWidth:null,movable:!0,maximized:!1,modal:!0,namespace:"dialog",parent:document.body,position:"center",title:null,zIndex:5},Cuic.Fader=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Fader.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;i.addClass("fader");var o=i.parentNode()===document.body;return o&&i.css({position:"fixed"}),i.on("click",function(){i.options.autoClose&&i.close()}),i.onClosed(function(){i.options.autoRemove&&i.remove()}),n}return _inherits(t,e),t}(Cuic.Component),Cuic.Button.prototype.options={autoClose:!1,autoRemove:!1,className:"fader",namespace:"fader",zIndex:1},function(e){var t=0;Cuic.Grid=function(n){var i=this;n=Cuic.extend(!0,Cuic.Grid.prototype.options,n),i.animSpeed=parseInt(n.animSpeed),i.autoResize=n.autoResize===!0,i.colsWidth=parseFloat(n.colsWidth),i.editable=n.editable===!0,i.fps=parseInt(n.fps),i.maxCols=parseInt(n.maxCols),i.maxRows=parseInt(n.maxRows),i.minCols=parseInt(n.minCols),i.minRows=parseInt(n.minRows),i.rowsHeight=parseFloat(n.rowsHeight),i.spacing=parseFloat(n.spacing),i.widgets={},i.element=e(n.target),i.element.css({display:"block",minHeight:n.height,minWidth:n.width}),i.resize(n.cols,n.rows),new Cuic.Resizable({target:i.element}).onResizeEnd(function(){var e=i.getSizeX(i.element.outerWidth()),t=i.getSizeY(i.element.outerHeight());i.maxCols=e,i.maxRows=t,i.maximize()}),i.preview=e("<div>",{class:"preview",css:{"box-sizing":"border-box",height:i.rowsHeight,left:i.spacing,position:"absolute",top:i.spacing,width:i.colsWidth,zIndex:1}}),i.element.children(n.widgetSelector).each(function(){var e=this.id||"widget-"+(t+=1);i.addWidget(e,new Cuic.Grid.Widget({target:this}))}),i.autoResize&&i.minimize()},Cuic.Grid.prototype.addWidget=function(e,t){var n=this,i=t.element,o=n.preview;n.removeWidget(e),n.widgets[e]=t,n.element.append(t.element),t.element.attr("id",e),t.element.css({"box-sizing":"border-box",display:"block",margin:0,overflow:"hidden",position:"absolute"}),n.moveWidget(t,t.col,t.row),n.resizeWidget(t,t.sizeX,t.sizeY),t.col-1+t.sizeX>n.cols&&n.resize(t.col-1+t.sizeX,t.sizeY),t.row-1+t.sizeY>n.rows&&n.resize(t.sizeX,t.row-1+t.sizeY);var s,a,r=new Cuic.Resizable({target:t.element,container:n.element});r.onResize=function(){var e=i.outerHeight(),s=i.outerWidth(),a=Math.round(s/(n.colsWidth+n.spacing)),r=Math.round(e/(n.rowsHeight+n.spacing));a+t.col-1>n.maxCols?a=n.maxCols-(t.col-1):a<t.minSizeX&&(a=t.minSizeX),r+t.row-1>n.maxRows?r=n.maxRows-(t.row-1):r<t.minSizeY&&(r=t.minSizeY),o.css({height:n.calculateHeight(r),width:n.calculateWidth(a)})},r.onResizeStart=function(){return!(!n.editable||!t.resizable||t.isDragging())&&(s=i.outerHeight(),a=i.outerWidth(),i.css({zIndex:2}),n.element.append(o.css({left:i.css("left"),height:s,top:i.css("top"),width:a})),n.autoResize&&n.maximize(),!0)},r.onResizeEnd(function(){o.detach();var e=n.getSizeX(o.outerWidth()),i=n.getSizeY(o.outerHeight());n.resizeWidget(t,e,i),n.autoResize&&n.minimize()});var l=new Cuic.Movable({target:t.element,rootOnly:!0,container:n.element});return l.onMove=function(){var e=parseFloat(i.css("left")),s=parseFloat(i.css("top")),a=n.getPositionX(e),r=n.getPositionY(s);a>0&&a+t.sizeX<=n.cols+1&&r>0&&r+t.sizeY<=n.rows+1||(a=t.col,r=t.row),o.css({left:n.calculateLeft(a),top:n.calculateTop(r)})},l.onMoveStart=function(e){return!(!n.editable||!t.movable||t.isResizing())&&(s=i.outerHeight(),a=i.outerWidth(),i.css({zIndex:2}),n.element.append(o.css({left:i.css("left"),height:s,top:i.css("top"),width:a})),n.autoResize&&n.maximize(),!0)},l.onMoveEnd=function(){o.detach();var e=parseFloat(i.css("left")),s=parseFloat(i.css("top")),a=n.getSizeX(e)+1,r=n.getSizeY(s)+1;n.moveWidget(t,a,r),n.autoResize&&n.minimize()},t},Cuic.Grid.prototype.calculateHeight=function(e){return parseInt(e)*(this.rowsHeight+this.spacing)-this.spacing},Cuic.Grid.prototype.calculateLeft=function(e){return parseInt(e)*(this.colsWidth+this.spacing)-this.colsWidth},Cuic.Grid.prototype.calculateTop=function(e){return parseInt(e)*(this.rowsHeight+this.spacing)-this.rowsHeight},Cuic.Grid.prototype.calculateWidth=function(e){return parseInt(e)*(this.colsWidth+this.spacing)-this.spacing},Cuic.Grid.prototype.clear=function(){for(var e in this.widgets)this.widgets.hasOwnProperty(e)&&this.removeWidget(e);return this},Cuic.Grid.prototype.getPosition=function(e,t){return[this.getPositionX(e),this.getPositionY(t)]},Cuic.Grid.prototype.getPositionX=function(e){return Math.round(parseFloat(e)/(this.colsWidth+this.spacing))+1},Cuic.Grid.prototype.getPositionY=function(e){return Math.round(parseFloat(e)/(this.rowsHeight+this.spacing))+1},Cuic.Grid.prototype.getSize=function(e,t){return[this.getSizeX(e),this.getSizeY(t)]},Cuic.Grid.prototype.getSizeX=function(e){return Math.round(parseFloat(e)/(this.colsWidth+this.spacing))},Cuic.Grid.prototype.getSizeY=function(e){return Math.round(parseFloat(e)/(this.rowsHeight+this.spacing))},Cuic.Grid.prototype.getWidget=function(e){return this.widgets[e]},Cuic.Grid.prototype.maximize=function(){return this.resize(this.maxCols,this.maxRows)},Cuic.Grid.prototype.minimize=function(){var e=this.minCols||1,t=this.minRows||1;for(var n in this.widgets)if(this.widgets.hasOwnProperty(n)){var i=this.widgets[n];i.col+i.sizeX-1>e&&(e=i.col+i.sizeX-1),i.row+i.sizeY-1>t&&(t=i.row+i.sizeY-1)}return this.resize(e,t)},Cuic.Grid.prototype.moveWidget=function(e,t,n){var i=this;return t>0&&t-1+e.sizeX<=i.cols&&n>0&&n-1+e.sizeY<=i.rows||(t=e.col,n=e.row),t>0&&n>0&&(e.col=t,e.row=n,e.element.css({zIndex:2}),e.element.animate({left:i.calculateLeft(t),top:i.calculateTop(n)},{complete:function(){e.element.removeClass("dragging"),e.element.css({zIndex:1}),"function"==typeof i.onWidgetMoved&&i.onWidgetMoved.call(i,e)},duration:i.animSpeed,queue:!1})),i},Cuic.Grid.prototype.removeWidget=function(t){var n=this.widgets[t];return n&&(delete this.widgets[t],n.element.stop(!0,!1).animate({height:0,width:0},{complete:function(){e(this).remove()},duration:this.animSpeed,queue:!1})),n},Cuic.Grid.prototype.resize=function(e,t){return e=parseInt(e),t=parseInt(t),e<1&&(e=1),t<1&&(t=1),e>0&&e<=this.maxCols&&t>0&&t<=this.maxRows&&(this.cols=e,this.rows=t,this.element.stop(!0,!1).animate({height:this.calculateHeight(t)+2*this.spacing,width:this.calculateWidth(e)+2*this.spacing},{duration:this.animSpeed,queue:!1})),this},Cuic.Grid.prototype.resizeWidget=function(e,t,n){var i=this;return t=parseInt(t),n=parseInt(n),t<e.minSizeX&&(t=e.minSizeX),n<e.minSizeY&&(n=e.minSizeY),(!i.maxSizeX||t<=i.maxSizeX)&&(!i.maxSizeY||n>=i.maxSizeY)&&(e.sizeX=t,e.sizeY=n,e.element.css({zIndex:2}),e.element.animate({height:n*(i.rowsHeight+i.spacing)-i.spacing,width:t*(i.colsWidth+i.spacing)-i.spacing},{complete:function(){e.element.removeClass("resizing"),e.element.css({zIndex:1}),"function"==typeof i.onWidgetResized&&i.onWidgetResized.call(i,e)},duration:i.animSpeed,queue:!1})),i},Cuic.Grid.prototype.onWidgetMoved=null,Cuic.Grid.prototype.onWidgetResized=null,Cuic.Grid.prototype.options={animSpeed:200,autoResize:!0,cols:null,colsWidth:100,editable:!0,fps:30,maxCols:null,maxRows:null,minCols:null,minRows:null,rows:null,rowsHeight:100,spacing:10,widgetSelector:".widget"},Cuic.Grid.Widget=function(t){var n=this;t=Cuic.extend(!0,{},Cuic.Grid.Widget.prototype.options,t),n.col=parseInt(t.col),n.movable=t.movable===!0,n.resizable=t.resizable===!0,n.row=parseInt(t.row),n.maxSizeX=parseInt(t.maxSizeX),n.maxSizeY=parseInt(t.maxSizeY),n.minSizeX=parseInt(t.minSizeX),n.minSizeY=parseInt(t.minSizeY),n.sizeX=parseInt(t.sizeX),n.sizeY=parseInt(t.sizeY),t.target&&(n.element=e(t.target),n.element.length>0&&(n.col=parseInt(n.element.attr("data-col"))||t.col,n.movable=n.element.attr("data-movable")?/^true$/gi.test(n.element.attr("data-movable")):t.movable,n.maxSizeX=parseInt(n.element.attr("data-max-size-x"))||t.maxSizeX,n.maxSizeY=parseInt(n.element.attr("data-max-size-y"))||t.maxSizeY,n.minSizeX=parseInt(n.element.attr("data-min-size-x"))||t.minSizeX,n.minSizeY=parseInt(n.element.attr("data-min-size-y"))||t.minSizeY,n.resizable=n.element.attr("data-resizable")?/^true$/gi.test(n.element.attr("data-resizable")):t.resizable,n.row=parseInt(n.element.attr("data-row"))||t.row,n.sizeX=parseInt(n.element.attr("data-size-x"))||t.sizeX,n.sizeY=parseInt(n.element.attr("data-size-y"))||t.sizeY)),(!n.element||n.element.length<1)&&(n.element=e("<div>",{html:t.content})),n.element.addClass("widget")},Cuic.Grid.Widget.prototype.isDragging=function(){return this.element.hasClass("dragging")},Cuic.Grid.Widget.prototype.isResizing=function(){return this.element.hasClass("resizing")},Cuic.Grid.Widget.prototype.options={col:1,content:null,movable:!0,maxSizeX:null,maxSizeY:null,minSizeX:1,minSizeY:1,resizable:!0,row:1,sizeX:1,sizeY:1,target:null}}(jQuery),Cuic.notifications=new Cuic.Collection,Cuic.Notification=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Notification.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;return i.addClass("notification"),i.closeTimer=null,i.content=new Cuic.Element("div",{className:"notification-content",html:e.content}).appendTo(i),i.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:i.options.closeButton,role:"button"}).appendTo(i),i.on("mouseenter",function(e){clearTimeout(i.closeTimer)}),i.on("mouseleave",function(e){e.currentTarget===i.node()&&i.autoClose()}),i.on("click",function(e){Cuic.hasClass(e.target,"btn-close")&&(e.preventDefault(),i.close())}),Cuic.notifications.add(i),i.onClosed(function(){i.options.autoRemove&&i.remove()}),i.onOpen(function(){if(i.options.position){var e=i.parentNode()===document.body;i.css({position:e?"fixed":"absolute"}),i.align(i.options.position)}}),i.onOpened(function(){i.autoClose()}),i.onRemoved(function(){Cuic.notifications.remove(i)}),n}return _inherits(t,e),_createClass(t,[{key:"autoClose",value:function(){var e=this;clearTimeout(this.closeTimer),this.closeTimer=setTimeout(function(){e.options.autoClose&&e.close()},this.options.duration)}},{key:"setContent",value:function(e){return this.content.html(e),this}}]),t}(Cuic.Component),Cuic.Notification.prototype.options={autoClose:!0,autoRemove:!0,className:"notification",closable:!0,closeButton:"",content:null,duration:2e3,namespace:"notification",parent:document.body,position:"center",zIndex:10},Cuic.NotificationStack=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.NotificationStack.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;if(i.addClass("notification-stack"),i.options.position){var o=i.parentNode()===document.body;i.css({position:o?"fixed":"absolute"}),i.align(i.options.position)}return i.onComponentAdded(function(e){e instanceof Cuic.Notification&&setTimeout(function(){e.open()},10)}),i.onComponentRemoved(function(e){e instanceof Cuic.Notification&&e.close()}),n}return _inherits(t,e),t}(Cuic.Group),Cuic.NotificationStack.prototype.options={className:"notification-stack",namespace:"notification-stack",position:"right top",zIndex:10},Cuic.Panel=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Panel.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;i.addClass("panel"),e.element?(i.header=i.find(".panel-header").eq(0),i.title=i.find(".panel-title").eq(0),i.content=i.find(".panel-content").eq(0),i.footer=i.find(".panel-footer").eq(0),i.closeButton=i.find(".panel-header .btn-close").eq(0)):(i.header=new Cuic.Element("header",{className:"panel-header"}).prependTo(i),i.title=new Cuic.Element("h5",{className:"panel-title",html:e.title}).appendTo(i.header),i.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:i.options.closeButton,role:"button"}).appendTo(i.header),i.content=new Cuic.Element("section",{className:"panel-content",html:e.content}).appendTo(i),i.footer=new Cuic.Element("footer",{className:"panel-footer",html:e.footer}).appendTo(i),e.title||i.header.hide(),e.footer||i.footer.hide());var o=i.parentNode()===document.body;return i.css({position:o?"fixed":"absolute"}),i.align(i.options.position),i.resizeContent(),Cuic.css(i.parentNode(),{overflow:"hidden"}),i.on("click",function(e){Cuic.hasClass(e.target,"btn-close")&&(e.preventDefault(),i.close()),Cuic.hasClass(e.target,"btn-toggle")&&(e.preventDefault(),i.toggle())}),Cuic.on("click",document,function(e){var t=i.node();e.target===t||Cuic.isParent(t,e.target)||i.options.autoClose&&i.isOpened()}),i.onClose(function(){var e=i.outerHeight(!0),t=i.outerWidth(!0),n={};Cuic.isPosition("left",i)?(n.left=-t,n.right=""):Cuic.isPosition("right",i)&&(n.right=-t,n.left=""),Cuic.isPosition("bottom",i)?(n.bottom=-e,n.top=""):Cuic.isPosition("top",i)&&(n.top=-e,n.bottom=""),i.css(n)}),i.onMinimize(function(){var e=i.node(),t=e.parentNode,n=e.cloneNode(!0);Cuic.css(n,{height:"auto",width:"auto"});var o=Cuic.calculateAlign(n,i.options.position,t);o.height=Cuic.height(n),o.width=Cuic.width(n),n.remove(),i.isOpened()||(Cuic.isPosition("left",i)?(o.left=-i.outerWidth(!0),o.right=""):Cuic.isPosition("right",i)&&(o.right=-i.outerWidth(!0),o.left=""),Cuic.isPosition("bottom",i)?(o.bottom=-i.outerHeight(!0),o.top=""):Cuic.isPosition("top",i)&&(o.top=-i.outerHeight(!0),o.bottom="")),i.resizeContent(),i.css(o)}),i.onOpen(function(){i.resizeContent(),i.align(i.options.position)}),n}return _inherits(t,e),_createClass(t,[{key:"getBody",value:function(){return this.content}},{key:"getContent",value:function(){return this.content}},{key:"getFooter",value:function(){return this.footer}},{key:"getHeader",value:function(){return this.header}},{key:"resizeContent",value:function(){var e=this.parentNode(),t=this.css("display"),n=window.innerHeight;e&&e!==document.body&&(n=Cuic.height(e));var i=this.border(),o=this.margin();n-=o.vertical,n-=i.vertical,this.css({"max-height":n});var s=n;return this.header instanceof Cuic.Element&&(s-=this.header.outerHeight(!0)),this.footer instanceof Cuic.Element&&(s-=this.footer.outerHeight(!0)),this.content.css({"max-height":s,overflow:"auto"}),this.css({display:t}),this}},{key:"setContent",value:function(e){return this.content.html(e),this}},{key:"setFooter",value:function(e){return this.footer.html(e),this}},{key:"setTitle",value:function(e){return this.title.html(e),this.header.show(),this}}]),t}(Cuic.Component),Cuic.Panel.prototype.options={autoClose:!1,className:"panel",closable:!0,closeButton:"",content:null,footer:null,maximized:!1,namespace:"panel",opened:!1,parent:null,position:"left top",title:null,zIndex:1},Cuic.Popup=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Popup.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;return i.addClass("popup"),i.content=new Cuic.Element("div",{className:"popup-content",html:e.content}).appendTo(i),i.closeButton=new Cuic.Element("span",{className:"btn-close glyphicon glyphicon-remove-sign",html:i.options.closeButton,role:"button"}).appendTo(i),i.on("click",function(e){Cuic.hasClass(e.target,"btn-close")&&(e.preventDefault(),i.close())}),Cuic.on("click",document,function(e){var t=i.node();e.target===t||Cuic.isParent(t,e.target)||i.options.autoClose&&i.isOpened()&&i.close()}),i.shortcuts={close:new Cuic.Shortcut({element:i,keyCode:Cuic.keys.ESC,callback:function(){i.close()}})},i.onClosed(function(){i.options.autoRemove&&i.remove()}),i.onOpen(function(){var e=Cuic.node(i.options.target).parentNode;i.appendTo(e),i.anchor(i.options.anchor,i.options.target)}),n}return _inherits(t,e),_createClass(t,[{key:"setContent",value:function(e){return this.content.html(e),this}}]),t}(Cuic.Component),Cuic.Popup.prototype.options={anchor:"top",autoClose:!0,autoRemove:!1,className:"popup",closable:!0,closeButton:"",content:null,namespace:"popup",target:null,zIndex:9},Cuic.Switcher=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Switcher.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className,html:e.content},e)),i=n;return i.addClass("switcher"),i.activeElement=null,i.index=0,i.timer=null,i.goTo(0),i.options.autoStart&&i.start(),n}return _inherits(t,e),_createClass(t,[{key:"first",value:function(){this.goTo(0)}},{key:"getActiveElement",value:function(){return this.activeElement}},{key:"getElementAt",value:function(e){return this.children().eq(e)}},{key:"getIndex",value:function(){return this.children().indexOf(this.activeElement)}},{key:"goTo",value:function(e){var t=this.children(),n=this.options.repeat;if(e>=t.length?this.index=n?0:t.length-1:e<0?this.index=n?t.length-1:0:this.index=e,this.index!==this.getIndex()){var i=this.isStarted();this.stop();for(var o=0;o<t.length;o+=1){var s=Cuic.element(t[o]);this.index===o?(s.addClass("visible"),s.removeClass("hidden")):(s.addClass("hidden"),s.removeClass("visible"))}this.activeElement=t.eq(this.index),this.activeElement.addClass("visible"),this.activeElement.removeClass("hidden"),i&&this.start()}}},{key:"isStarted",value:function(){return null!==this.timer&&void 0!==this.timer}},{key:"last",value:function(){this.goTo(this.children().length-1)}},{key:"next",value:function(){this.goTo(this.index+1)}},{key:"previous",value:function(){this.goTo(this.index-1)}},{key:"start",value:function(){var e=this;this.isStarted()||(this.timer=setInterval(function(){e.next()},this.options.delay))}},{key:"stop",value:function(){this.isStarted()&&(clearInterval(this.timer),this.timer=null)}}]),t}(Cuic.Component),Cuic.Switcher.prototype.options={autoStart:!0,delay:3e3,namespace:"switcher",repeat:!0},function(e){var t=Cuic.namespace("table");Cuic.Table=function(n){n=Cuic.extend(!0,{onSorted:null,selectedClass:"selected",selectRowOnClick:!1,sortableClass:"sortable",sortColumn:0,sortOrder:"asc",target:null},n);var i=e(n.target);if(i.length>1)throw"Only one table is expected as target";if(0===i.length)throw"Invalid table target";if(!i.is("table"))throw"The target is not a table : "+n.target;var o=i.children("thead"),s=i.children("tbody");i.children("tfoot");n.selectRowOnClick&&s.children("tr").off(t("click")).on(t("click"),function(t){"TD"===t.target.nodeName&&e(this).toggleClass(n.selectedClass)}),i.sort=function(t,i){var a=[];s.children("tr").each(function(){a.push(e(this))});var r=o.find("tr > th").eq(t);if(o.find("tr > th").not(r).removeClass("ascendant descendant sorted"),r.addClass("sorted"),s.find("tr > td").removeClass("sorted"),s.find("tr").each(function(){e(this).children().eq(t).addClass("sorted")}),a.length>1){a.sort(function(e,n){if(void 0!==e&&null!==e&&void 0!==n&&null!==n){var i=e.children("td").eq(t).html(),o=n.children("td").eq(t).html();if("string"==typeof i&&(i=i.toLowerCase()),"string"==typeof o&&(o=o.toLowerCase()),i>o)return 1;if(i===o)return 0}return-1}),"desc"!==i&&i!=-1||a.reverse();for(var l=0;l<a.length;l+=1)a[l].appendTo(s);"function"==typeof n.onSorted&&n.onSorted(t,i)}};var a=o.find(".default");return a=1===a.length?a:o.find(".sortable:first"),i.sort(a.index(),a.hasClass("descendant")?"desc":"asc"),o.find("tr > ."+n.sortableClass).off(t("click")).on(t("click"),function(t){if(t.currentTarget===t.target){var n,o=e(this),s=o.index();o.hasClass("ascendant")?(o.removeClass("ascendant"),o.addClass("descendant"),n="desc"):(o.removeClass("descendant"),o.addClass("ascendant"),n="asc"),i.sort(s,n);
}}),i}}(jQuery),function(e){var t=Cuic.namespace("tabs"),n=0;Cuic.Tabs=function(i){var o=this;i=Cuic.extend(!0,{content:null,defaultTab:0,target:null},i);var s=e(i.target);o.tabs=s.children(".tab"),o.content=e(i.content);var a=o.tabs.filter(".default");1===a.length?o.defaultTab=a.index():(o.defaultTab=i.defaultTab,o.tabs.eq(o.defaultTab).addClass("default")),o.tabs.filter(".default").addClass("active"),o.tabs.each(function(){var t=e(this),i=o.content.find("#"+t.attr("data-content"));t.attr("tabindex",n+=1),t.hasClass("default")||i.hide()}),o.tabs.off(t("focus")).on(t("focus"),function(t){o.selectTab(e(t.currentTarget).index())})},Cuic.Tabs.prototype.disableTab=function(e){return e==this.getActiveTabIndex()&&this.selectPreviousTab(),this.getTab(e).addClass("disabled")},Cuic.Tabs.prototype.enableTab=function(e){return this.getTab(e).removeClass("disabled")},Cuic.Tabs.prototype.getActiveTab=function(){return this.tabs.filter(".active:first")},Cuic.Tabs.prototype.getActiveTabIndex=function(){return this.getActiveTab().index()},Cuic.Tabs.prototype.getTab=function(e){return this.tabs.eq(e)},Cuic.Tabs.prototype.getTabContent=function(e){var t=this.getTab(e);return this.content.find("#"+t.attr("data-content"))},Cuic.Tabs.prototype.selectDefaultTab=function(){return this.selectTab(this.defaultTab)},Cuic.Tabs.prototype.selectNextTab=function(){return this.selectTab(this.getActiveTab().next(":not(.disabled)").index())},Cuic.Tabs.prototype.selectPreviousTab=function(){return this.selectTab(this.getActiveTab().prev(":not(.disabled)").index())},Cuic.Tabs.prototype.selectTab=function(e){var t=this.getTab(e),n=this.getTabContent(e);t.hasClass("disabled")||(this.tabs.removeClass("active"),t.addClass("active"),this.content.children().not(n).hide(),n.stop(!0,!1).fadeIn(200))}}(jQuery),Cuic.tooltips=new Cuic.Collection,Cuic.Tooltip=function(e){function t(e){_classCallCheck(this,t),e=Cuic.extend({},Cuic.Tooltip.prototype.options,e);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"div",{className:e.className},e)),i=n;i.addClass("tooltip"),i.content=new Cuic.Element("div",{className:"tooltip-content"}).appendTo(i),i.tail=new Cuic.Element("span",{className:"tooltip-tail"}).appendTo(i);var o=Cuic.find(i.options.selector);return o.each(function(e){e.on("mouseenter",function(t){var n=e.data("tooltip");n&&n.length||(n=e.attr(i.options.attribute),e.attr(i.options.attribute,""),e.data("tooltip",n)),n&&n.length&&i.content.html(n),i.update(t),i.open()}),e.on("mousemove",function(e){i.update(e)}),e.on("mouseleave",function(){i.close()})}),Cuic.on("click",document,function(e){var t=i.node();e.target===t||Cuic.isParent(t,e.target)||i.close()}),Cuic.tooltips.add(i),i.onClosed(function(){i.options.autoRemove&&i.remove()}),i.onAnchored(function(){i.updateTail()}),n}return _inherits(t,e),_createClass(t,[{key:"setContent",value:function(e){return this.content.html(e),this}},{key:"update",value:function(e){return this.options.followPointer?(this.parentNode()!==document.body&&this.appendTo(document.body),this.anchor(this.options.anchor,[e.pageX,e.pageY])):(this.parentNode()!==e.currentTarget.parentNode&&this.appendTo(e.currentTarget.parentNode),this.anchor(this.options.anchor,e.currentTarget),this.updateTail()),this}},{key:"updateTail",value:function(){var e={"margin-bottom":0,"margin-left":0,"margin-right":0,"margin-top":0,bottom:"",left:"",right:"",top:""};return this.tail.removeClass("tooltip-tail-bottom tooltip-tail-left tooltip-tail-right tooltip-tail-top"),this.options.anchor.indexOf("bottom")!==-1&&(this.tail.addClass("tooltip-tail-top"),e.top=-this.tail.outerHeight(),e["margin-left"]=-this.tail.outerWidth()/2),this.options.anchor.indexOf("top")!==-1&&(this.tail.addClass("tooltip-tail-bottom"),e.bottom=-this.tail.outerHeight(),e["margin-left"]=-this.tail.outerWidth()/2),this.options.anchor.indexOf("left")!==-1&&(this.tail.addClass("tooltip-tail-right"),e.right=-this.tail.outerWidth(),e["margin-top"]=-this.tail.outerHeight()/2),this.options.anchor.indexOf("right")!==-1&&(this.tail.addClass("tooltip-tail-left"),e.left=-this.tail.outerWidth(),e["margin-top"]=-this.tail.outerHeight()/2),this.tail.css(e),this}}]),t}(Cuic.Component),Cuic.Tooltip.prototype.options={anchor:"right",attribute:"title",className:"tooltip",followPointer:!0,namespace:"tooltip",selector:"[title]",zIndex:10},function(e){var t=Cuic.namespace("tree");Cuic.Tree=function(n){n=Cuic.extend(!0,{collapsed:!0,itemClass:"tree-item",itemContentClass:"tree-item-content",itemNameClass:"tree-item-name",target:null},n);var i=e(n.target);if(1!==i.length)throw new Error("Target not found : "+n.target);var o=i.find("."+n.itemClass);return 0==o.filter(".default").length&&o.first().addClass("default"),o.filter(".default").addClass("active"),n.collapsed?i.find("."+n.itemClass).not(".expanded").not(".default").children("."+n.itemContentClass).hide():i.find(".collapsed").children("."+n.itemContentClass).hide(),o.each(function(){var o=e(this),s=(o.children("."+n.itemNameClass),o.children("."+n.itemContentClass));1==s.length&&o.addClass(s.is(":visible")?"expanded":"collapsed"),o.children("."+n.itemNameClass).off(t("click")).on(t("click"),function(){o.hasClass("disabled")||1===s.length&&(i.find(".active").removeClass("active"),s.is(":visible")?o.removeClass("expanded").addClass("collapsed"):(o.addClass("active"),o.removeClass("collapsed").addClass("expanded")),s.toggle(200))})}),i}}(jQuery);
